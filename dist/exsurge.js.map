{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f7663700012f8996aaa3","webpack:///./src/index.js","webpack:///./src/Exsurge.Core.js","webpack:///./src/Exsurge.Text.js","webpack:///./src/Exsurge.Glyphs.js","webpack:///./src/Exsurge.Drawing.js","webpack:///./assets/fonts/ExsurgeChar.otf","webpack:///./src/Exsurge.Chant.js","webpack:///./src/Exsurge.Chant.Signs.js","webpack:///./src/Exsurge.Gabc.js","webpack:///./src/Exsurge.Chant.Markings.js","webpack:///./src/Exsurge.Chant.Neumes.js"],"names":[],"mappings":"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","file":"exsurge.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"exsurge\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"exsurge\"] = factory();\n\telse\n\t\troot[\"exsurge\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f7663700012f8996aaa3\n **/","//\r\n// Author(s):\r\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\r\n//\r\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n//\r\n\r\n'use strict';\r\n\r\nimport { Annotation, ChantContext } from 'Exsurge.Drawing'\r\nimport { Gabc } from 'Exsurge.Gabc'\r\n\r\n// client side support\r\nvar ChantVisualElementPrototype = Object.create(HTMLElement.prototype);\r\n\r\nChantVisualElementPrototype.createdCallback = function() {\r\n  var ctxt = new ChantContext();\r\n  \r\n  ctxt.lyricTextFont = \"'Crimson Text', serif\";\r\n  ctxt.lyricTextSize *= 1.2;\r\n  ctxt.dropCapTextFont = ctxt.lyricTextFont;\r\n  ctxt.annotationTextFont = ctxt.lyricTextFont;\r\n\r\n  var useDropCap = true;\r\n  var useDropCapAttr = this.getAttribute(\"use-drop-cap\");\r\n  if (useDropCapAttr === 'false')\r\n    useDropCap = false;\r\n\r\n  var score = Gabc.loadChantScore(ctxt, this.innerText, useDropCap);\r\n\r\n  var annotationAttr = this.getAttribute(\"annotation\");\r\n  if (annotationAttr) {\r\n    // add an annotation\r\n    score.annotation = new Annotation(ctxt, annotationAttr);\r\n  }\r\n\r\n  var _element = this;\r\n\r\n  var width = 0;\r\n  var doLayout = function() {\r\n    var newWidth = _element.parentElement.clientWidth;\r\n    if(width === newWidth) return;\r\n    width = newWidth;\r\n    // perform layout on the chant\r\n    score.performLayout(ctxt, function() {\r\n      score.layoutChantLines(ctxt, width, function() {\r\n        // render the score to svg code\r\n        _element.innerHTML = score.createDrawable(ctxt);\r\n      });\r\n    });\r\n  }\r\n  doLayout();\r\n  if (window.addEventListener)\r\n    window.addEventListener('resize',doLayout,false);\r\n  else if (window.attachEvent)\r\n    window.attachEvent('onresize',doLayout);\r\n}\r\n\r\nChantVisualElementPrototype.attachedCallback = function() {\r\n  \r\n}\r\n\r\ndocument.registerElement = document.registerElement || function() {};\r\n// register the custom element\r\nexport var ChantVisualElement = document.registerElement('chant-visual', {\r\n  prototype: ChantVisualElementPrototype\r\n});\r\n\r\n\r\nexport * from 'Exsurge.Core'\r\nexport * from 'Exsurge.Text'\r\nexport * from 'Exsurge.Glyphs'\r\nexport * from 'Exsurge.Drawing'\r\nexport * from 'Exsurge.Chant'\r\nexport * from 'Exsurge.Chant.Markings'\r\nexport * from 'Exsurge.Chant.Signs'\r\nexport * from 'Exsurge.Chant.Neumes'\r\nexport * from 'Exsurge.Gabc'\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","//\r\n// Author(s):\r\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\r\n//\r\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n//\r\n\r\nexport var Units = {\r\n  // enums\r\n  DeviceIndepenedent: 0, // device independent units: 96/inch\r\n  Centimeters: 1,\r\n  Millimeters: 2,\r\n  Inches: 3,\r\n\r\n  // constants for device independent units (diu)\r\n  DIU_PER_INCH: 96,\r\n  DIU_PER_CENTIMETER: 96 / 2.54,\r\n\r\n  ToDeviceIndependent: function (n, inputUnits) {\r\n    switch (inputUnits) {\r\n      case Centimeters:\r\n        return n * DIU_PER_CENTIMETER;\r\n      case Millimeters:\r\n        return n * DIU_PER_CENTIMETER / 10;\r\n      case Inches:\r\n        return n * DIU_PER_INCH;\r\n      default:\r\n        return n;\r\n    }\r\n  },\r\n\r\n  FromDeviceIndependent: function (n, outputUnits) {\r\n    switch (outputUnits) {\r\n      case Centimeters:\r\n        return n / DIU_PER_CENTIMETER;\r\n      case Millimeters:\r\n        return n / DIU_PER_CENTIMETER * 10;\r\n      case Inches:\r\n        return n / DIU_PER_INCH;\r\n      default:\r\n        return n;\r\n    }\r\n  },\r\n\r\n\r\n  StringToUnitsType: function(s) {\r\n    switch (s.ToLower()) {\r\n      case \"in\":\r\n      case \"inches\":\r\n        return Inches;\r\n\r\n      case \"cm\":\r\n      case \"centimeters\":\r\n        return Centimeters;\r\n\r\n      case \"mm\":\r\n      case \"millimeters\":\r\n        return Millimeters;\r\n\r\n      case \"di\":\r\n      case \"device-independent\":\r\n        return DeviceIndepenedent;\r\n\r\n      default:\r\n        return DeviceIndepenedent;\r\n    }\r\n  },\r\n\r\n  UnitsTypeToString: function(units) {\r\n    switch (units) {\r\n      case Inches: return \"in\";\r\n      case Centimeters: return \"cm\";\r\n      case Millimeters: return \"mm\";\r\n      case DeviceIndepenedent: return \"device-independent\";\r\n      default: return \"device-independent\";\r\n    }\r\n  }\r\n}\r\n\r\nexport function DeviceIndependent(n) {\r\n  return n;\r\n}\r\n\r\nexport function Centimeters(n) {\r\n  return Units.ToDeviceIndependent(n, Units.Centimeters);\r\n}\r\n\r\nexport function Millimeters(n) {\r\n  return Units.ToDeviceIndependent(n, Units.Millimeters);\r\n}\r\n\r\nexport function Inches(n) {\r\n  return Units.ToDeviceIndependent(n, Units.Inches);\r\n}\r\n\r\nexport function ToCentimeters(n) {\r\n  return Units.FromDeviceIndependent(n, Units.Centimeters);\r\n}\r\n\r\nexport function ToMillimeters(n) {\r\n  return Units.FromDeviceIndependent(n, Units.Millimeters);\r\n}\r\n\r\nexport function ToInches(n) {\r\n  return Units.FromDeviceIndependent(n, Units.Inches);\r\n}\r\n\r\n\r\n/*\r\n * Point\r\n */\r\nexport class Point {\r\n  constructor(x, y) {\r\n    this.x = (typeof x !== 'undefined') ? x : 0;\r\n    this.y = (typeof y !== 'undefined') ? y : 0;\r\n  }\r\n\r\n  clone() {\r\n    return new Point(this.x, this.y);\r\n  }\r\n\r\n  equals(point) {\r\n    return this.x === point.x && this.y === point.y;\r\n  }\r\n}\r\n\r\n/*\r\n * Rect\r\n */\r\nexport class Rect {\r\n  constructor(x, y, width, height) {\r\n    this.x = (typeof x !== 'undefined') ? x : Infinity;\r\n    this.y = (typeof y !== 'undefined') ? y : Infinity;\r\n    this.width = (typeof width !== 'undefined') ? width : -Infinity;\r\n    this.height = (typeof height !== 'undefined') ? height : -Infinity;\r\n  }\r\n\r\n  clone() {\r\n    return new Rect(this.x, this.y, this.width, this.height);\r\n  }\r\n\r\n  isEmpty() {\r\n    return (this.x === Infinity &&\r\n            this.y === Infinity &&\r\n            this.width === -Infinity &&\r\n            this.height === -Infinity);\r\n  }\r\n\r\n  // convenience method\r\n  right() {\r\n    return this.x + this.width;\r\n  }\r\n\r\n  bottom() {\r\n    return this.y + this.height;\r\n  }\r\n\r\n  equals(rect) {\r\n    return this.x === rect.x && this.y === rect.y &&\r\n           this.width === rect.width && this.height === rect.height;\r\n  }\r\n\r\n  // other can be a Point or a Rect\r\n  contains(other) {\r\n    if (other instanceof Point) {\r\n      return other.x >= this.x &&\r\n              other.x <= this.x + this.width &&\r\n              other.y >= this.y &&\r\n              other.y <= this.y + this.height;\r\n    } else { // better be instance of Rect\r\n      return this.x <= other.x &&\r\n              this.x + this.width >= other.x + other.width &&\r\n              this.y <= other.y &&\r\n              this.y + this.height >= other.y + other.height;\r\n    }\r\n  }\r\n\r\n  union(rect) {\r\n\r\n    var right = Math.max(this.x + this.width, rect.x + rect.width);\r\n    var bottom = Math.max(this.y + this.height, rect.y + rect.height);\r\n\r\n    this.x = Math.min(this.x, rect.x);\r\n    this.y = Math.min(this.y, rect.y);\r\n\r\n    this.width = right - this.x;\r\n    this.height = bottom - this.y;\r\n  }\r\n}\r\n\r\n/**\r\n * Margins\r\n *\r\n * @class\r\n */\r\nexport class Margins {\r\n  constructor(left, top, right, bottom) {\r\n    this.left = (typeof left !== 'undefined') ? left : 0;\r\n    this.top = (typeof top !== 'undefined') ? top : 0;\r\n    this.right = (typeof right !== 'undefined') ? right : 0;\r\n    this.bottom = (typeof bottom !== 'undefined') ? bottom : 0;\r\n  }\r\n\r\n  clone() {\r\n    return new Margins(this.left, this.top, this.right, this.bottom);\r\n  }\r\n\r\n  equals(margins) {\r\n    return this.left === margins.left &&\r\n        this.top === margins.top &&\r\n        this.right === margins.right &&\r\n        this.bottom === margins.bottom;\r\n  }\r\n}\r\n\r\n/**\r\n * Size\r\n *\r\n * @class\r\n */\r\nexport class Size {\r\n  constructor(width, height) {\r\n    this.width = (typeof width !== 'undefined') ? width : 0;\r\n    this.height = (typeof height !== 'undefined') ? height : 0;\r\n  }\r\n\r\n  clone() {\r\n    return new Size(this.width, this.height);\r\n  }\r\n\r\n  equals(size) {\r\n    return this.width === size.width && this.height === size.height;\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * Pitches, notes\r\n */\r\nexport var Step = {\r\n  Do: 0,\r\n  Du: 1,\r\n  Re: 2,\r\n  Me: 3,\r\n  Mi: 4,\r\n  Fa: 5,\r\n  Fu: 6,\r\n  So: 7,\r\n  La: 9,\r\n  Te: 10,\r\n  Ti: 11\r\n};\r\n\r\n  // this little array helps map step values to staff positions. The numeric values of steps\r\n  // correspond to whole step increments (2) or half step increments (1). This gives us the ability\r\n  // to compare pitches precisely, but makes it challenging to place steps on the staff. this little\r\n  // array maps the steps to an incremental position the steps take on the staff line. This works\r\n  // so simply because chant only uses do and fa clefs, and only has a flatted ti (te), making\r\n  // for relatively easy mapping to staff line locations.\r\n  //                         Do Du Re Me Mi Fa Fu So    La Te Ti\r\nvar __StepToStaffPosition = [0, 0, 1, 1, 2, 3, 3, 4, 4, 5, 6, 6];\r\nvar __StaffOffsetToStep = [Step.Do, Step.Re, Step.Mi, Step.Fa, Step.So, Step.La, Step.Ti]; // no accidentals in this one\r\n\r\n\r\nexport class Pitch {\r\n  constructor(step, octave) {\r\n    this.step = step;\r\n    this.octave = octave;\r\n  }\r\n  \r\n  toInt() {\r\n    return this.octave * 12 + this.step;\r\n  }\r\n\r\n  isHigherThan(pitch) {\r\n    return this.toInt() > pitch.toInt();\r\n  }\r\n\r\n  isLowerThan(pitch) {\r\n    return this.toInt() < pitch.toInt();\r\n  }\r\n\r\n  equals(pitch) {\r\n    return this.toInt() === pitch.toInt();\r\n  }\r\n\r\n  static stepToStaffOffset(step) {\r\n    return __StepToStaffPosition[step];\r\n  }\r\n\r\n  static staffOffsetToStep(offset) {\r\n    while (offset < 0)\r\n      offset = __StaffOffsetToStep.length + offset;\r\n\r\n    return __StaffOffsetToStep[offset % __StaffOffsetToStep.length];\r\n  }\r\n}\r\n\r\n// for positioning markings on notes\r\nexport var MarkingPositionHint = {\r\n  Default: 0,\r\n  Above: 1,\r\n  Below: 2\r\n};\r\n\r\nexport function generateRandomGuid() {\r\n  function s4() {\r\n    return Math.floor((1 + Math.random()) * 0x10000)\r\n      .toString(16)\r\n      .substring(1);\r\n  }\r\n  return s4() + s4();\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Core.js\n **/","//\n// Author(s):\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\n//\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n//\n\nimport * as Exsurge from 'Exsurge.Core'\n\n/**\n * @class\n */\nexport class Language {\n  constructor(name) {\n    this.name = (typeof name !== 'undefined') ? name : \"<unknown>\";\n  }\n\n  /**\n   * @param {String} text The string to parsed into words.\n   * @return {Word[]} the resulting parsed words from syllabification\n   */\n  syllabify(text) {\n\n    var parsedWords = [];\n\n    if (typeof text === 'undefined' || text === \"\")\n      return parsedWords;\n\n    // Divide the text into words separated by whitespace\n    var words = text.split(/[\\s]+/);\n\n    for (var i = 0, end = words.length; i < end; i++)\n      parsedWords.push(this.syllabifyWord(words[i]));\n\n    return parsedWords;\n  }\n}\n\n/**\n * @class\n */\nexport class Latin extends Language {\n\n  /**\n   * @constructs\n   */\n  constructor() {\n    super(\"Latin\");\n\n    // fixme: should we include 'diphthongs' with accented vowels, e.g., áe?\n    // fixme: ui is only diphthong in the exceptional cases below (according to Wheelock's Latin)\n    this.diphthongs = [\"ae\", \"au\", \"oe\"];\n\n    // some words that are simply exceptions to standard syllabification rules!\n    var wordExceptions = new Object();\n\n    // ui combos pronounced as dipthongs\n    wordExceptions[\"huius\"] = [\"hui\", \"us\"];\n    wordExceptions[\"cuius\"] = [\"cui\", \"us\"];\n    wordExceptions[\"huic\"] = [\"huic\"];\n    wordExceptions[\"cui\"] = [\"cui\"];\n    wordExceptions[\"hui\"] = [\"hui\"];\n\n    this.vowels = ['a', 'e', 'i', 'o', 'u',\n                   'á', 'é', 'í', 'ó', 'ú',\n                   'æ', 'œ',\n                   'ǽ',  // no accented œ in unicode?\n                   'y']; // y is treated as a vowel; not native to Latin but useful for words borrowed from Greek\n\n    this.muteConsonantsAndF = ['b', 'c', 'd', 'g', 'p', 't', 'f'];\n\n    this.liquidConsonants = ['l', 'r'];\n  }\n\n  // c must be lowercase!\n  isVowel(c) {\n    for (var i = 0, end = this.vowels.length; i < end; i++)\n      if (this.vowels[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   * f is not a mute consonant, but we lump it together for syllabification\n   * since it is syntactically treated the same way\n   *\n   * @param {String} c The character to test; must be lowercase\n   * @return {boolean} true if c is an f or a mute consonant\n   */\n  isMuteConsonantOrF(c) {\n    for (var i = 0, end = this.muteConsonantsAndF.length; i < end; i++)\n      if (this.muteConsonantsAndF[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   *\n   * @param {String} c The character to test; must be lowercase\n   * @return {boolean} true if c is a liquid consonant\n   */\n  isLiquidConsonant(c) {\n    for (var i = 0, end = this.liquidConsonants.length; i < end; i++)\n      if (this.liquidConsonants[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   *\n   * @param {String} s The string to test; must be lowercase\n   * @return {boolean} true if s is a diphthong\n   */\n  isDiphthong(s) {\n    for (var i = 0, end = this.diphthongs.length; i < end; i++)\n      if (this.diphthongs[i] === s)\n        return true;\n\n    return false;\n  }\n\n  /**\n   * Rules for Latin syllabification (from Collins, \"A Primer on Ecclesiastical Latin\")\n   *\n   * Divisions occur when:\n   *   1. After open vowels (those not followed by a consonant) (e.g., \"pi-us\" and \"De-us\")\n   *   2. After vowels followed by a single consonant (e.g., \"vi-ta\" and \"ho-ra\")\n   *   3. After the first consonant when two or more consonants follow a vowel\n   *      (e.g., \"mis-sa\", \"minis-ter\", and \"san-ctus\").\n   *\n   * Exceptions:\n   *   1. In compound words the consonants stay together (e.g., \"de-scribo\").\n   *   2. A mute consonant (b, c, d, g, p, t) or f followed by a liquid consonant (l, r)\n   *      go with the succeeding vowel: \"la-crima\", \"pa-tris\"\n   *\n   * In addition to these rules, Wheelock's Latin provides this sound exception:\n   *   -  Also counted as single consonants are qu and the aspirates ch, ph,\n   *      th, which should never be separated in syllabification:\n   *      architectus, ar-chi-tec-tus; loquacem, lo-qua-cem.\n   *\n   */\n  syllabifyWord(word) {\n    var syllables = [];\n    var haveCompleteSyllable = false;\n    var previousWasVowel = false;\n    var workingString = word.toLowerCase();\n    var startSyllable = 0;\n\n    var c, lookahead, haveLookahead;\n\n    // a helper function to create syllables\n    var makeSyllable = function (length) {\n      if (haveCompleteSyllable) {\n        syllables.push(word.substr(startSyllable, length));\n        startSyllable += length;\n      }\n\n      haveCompleteSyllable = false;\n    }\n\n    for (var i = 0, wordLength = workingString.length; i < wordLength; i++) {\n\n      c = workingString[i];\n\n      // get our lookahead in case we need them...\n      lookahead = '*';\n      haveLookahead = (i + 1) < wordLength;\n\n      if (haveLookahead)\n        lookahead = workingString[i + 1];\n\n      var cIsVowel = this.isVowel(c);\n\n      // i is a special case for a vowel. when i is at the beginning\n      // of the word (Iesu) or i is between vowels (alleluia),\n      // then the i is treated as a consonant (y)\n      if (c === 'i') {\n        if (i === 0 && haveLookahead && this.isVowel(lookahead))\n          cIsVowel = false;\n        else if (previousWasVowel && haveLookahead && this.isVowel(lookahead)) {\n          cIsVowel = false;\n        }\n      }\n\n      if (c === '-') {\n\n        // a hyphen forces a syllable break, which effectively resets\n        // the logic...\n\n        haveCompleteSyllable = true;\n        previousWasVowel = false;\n        makeSyllable(i - startSyllable);\n        startSyllable++;\n\n      } else if (cIsVowel) {\n\n        // once we get a vowel, we have a complete syllable\n        haveCompleteSyllable = true;\n\n        if (previousWasVowel && !this.isDiphthong(workingString[i - 1] + \"\" + c)) {\n          makeSyllable(i - startSyllable);\n          haveCompleteSyllable = true;\n        }\n\n        previousWasVowel = true;\n\n      } else if (haveLookahead) {\n\n        if ((c === 'q' && lookahead === 'u') ||\n            (lookahead === 'h' && (c === 'c' || c === 'p' || c === 't'))) {\n          // handle wheelock's exceptions for qu, ch, ph and th\n          makeSyllable(i - startSyllable);\n          i++; // skip over the 'h' or 'u'\n        } else if (previousWasVowel && this.isVowel(lookahead)) {\n          // handle division rule 2\n          makeSyllable(i - startSyllable);\n        } else if (this.isMuteConsonantOrF(c) && this.isLiquidConsonant(lookahead)) {\n          // handle exception 2\n          makeSyllable(i - startSyllable);\n        } else if (haveCompleteSyllable) {\n          // handle division rule 3\n          makeSyllable(i + 1 - startSyllable);\n        }\n\n        previousWasVowel = false;\n      }\n    }\n\n    // if we have a complete syllable, we can add it as a new one. Otherwise\n    // we tack the remaining characters onto the last syllable.\n    if (haveCompleteSyllable)\n      syllables.push(word.substr(startSyllable));\n    else if (startSyllable > 0)\n      syllables[syllables.length - 1] += word.substr(startSyllable);\n\n    return syllables;\n  }\n\n  /**\n   * @param {String} s the string to search\n   * @param {Number} startIndex The index at which to start searching for a vowel in the string\n   * @retuns a custom class with three properties: {found: (true/false) startIndex: (start index in s of vowel segment) length ()}\n   */\n  findVowelSegment(s, startIndex) {\n\n    var i, end, index;\n    var workingString = s.toLowerCase();\n\n    // do we have a diphthongs?\n    for (i = 0, end = this.diphthongs.length; i < end; i++) {\n      var d = this.diphthongs[i];\n      index = workingString.indexOf(d, startIndex);\n\n      if (index >= 0)\n        return { found: true, startIndex: index, length: d.length };\n    }\n\n    // no diphthongs. Let's look for single vowels then...\n    for (i = 0, end = this.vowels.length; i < end; i++) {\n      index = workingString.indexOf(this.vowels[i], startIndex);\n\n      if (index >= 0)\n        return { found: true, startIndex: index, length: 1 };\n    }\n\n    // no vowels sets found after startIndex!\n    return { found: false, startIndex: -1, length: -1 };\n  }\n}\n\n\n/**\n * @class\n */\nexport class Spanish extends Language {\n\n  constructor() {\n    super(\"Spanish\");\n\n    this.vowels = ['a', 'e', 'i', 'o', 'u', 'y',\n                    'á', 'é', 'í', 'ó', 'ú', 'ü'];\n\n    this.weakVowels = ['i', 'u', 'ü', 'y'];\n\n    this.strongVowels = ['a', 'e', 'o', 'á', 'é', 'í', 'ó', 'ú'];\n\n\n    this.dipthongs = [\"ai\", \"ei\", \"oi\", \"ui\", \"ia\", \"ie\", \"io\", \"iu\", \"au\", \"eu\", \"ou\", \"ua\", \"ue\", \"uo\",\n                       \"ái\", \"éi\", \"ói\", \"úi\", \"iá\", \"ié\", \"ió\", \"iú\", \"áu\", \"éu\", \"óu\", \"uá\", \"ué\", \"uó\",\n                       \"üe\", \"üi\"];\n\n    this.uDipthongExpections = [\"gue\", \"gui\", \"qua\", \"que\", \"qui\", \"quo\"];\n  }\n\n  // c must be lowercase!\n  isVowel(c) {\n    for (var i = 0, end = this.vowels.length; i < end; i++)\n      if (this.vowels[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   * @param {String} c The character to test; must be lowercase\n   * @return {boolean} true if c is an f or a mute consonant\n   */\n  isWeakVowel(c) {\n    for (var i = 0, end = this.weakVowels.length; i < end; i++)\n      if (this.weakVowels[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   * @param {String} c The character to test; must be lowercase\n   * @return {boolean} true if c is an f or a mute consonant\n   */\n  isStrongVowel(c) {\n    for (var i = 0, end = this.strongVowels.length; i < end; i++)\n      if (this.strongVowels[i] === c)\n        return true;\n\n    return false;\n  }\n\n  /**\n   *\n   * @param {String} s The string to test; must be lowercase\n   * @return {boolean} true if s is a diphthong\n   */\n  isDiphthong(s) {\n    for (var i = 0, end = this.diphthongs.length; i < end; i++)\n      if (this.diphthongs[i] === s)\n        return true;\n\n    return false;\n  }\n\n  createSyllable(text) {\n\n/*\n    var accented = false;\n    var ellidesToNext = false;\n\n    if (text.length > 0) {\n        \n        if (text[0] == '`') {\n            accented = true;\n            text = text.substr(1);\n        }\n\n        if (text[text.length - 1] == '_') {\n            ellidesToNext = true;\n            text = text.substr(0, text.length - 1);\n        }\n    }\n\n    var s = new Syllable(text);\n\n    s.isMusicalAccent = accented;\n    s.elidesToNext = ellidesToNext;*/\n\n    return text;\n  }\n\n  /**\n   */\n  syllabifyWord(word) {\n\n    var syllables = [];\n\n    var haveCompleteSyllable = false;\n    var previousIsVowel = false;\n    var previousIsStrongVowel = false; // only valid if previousIsVowel == true\n    var startSyllable = 0;\n\n    // fixme: first check for prefixes\n\n    for (i = 0; i < word.length; i++) {\n\n      var c = word[i].toLowerCase();\n\n      if (this.isVowel(c)) {\n\n        // we have a complete syllable as soon as we have a vowel\n        haveCompleteSyllable = true;\n\n        var cIsStrongVowel = this.isStrongVowel(c);\n\n        if (previousIsVowel) {\n          // if we're at a strong vowel, then we finish out the last syllable\n          if (cIsStrongVowel) {\n            if (previousIsStrongVowel) {\n              syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable)));\n              startSyllable = i;\n            }\n          }\n        }\n\n        previousIsVowel = true;\n        previousIsStrongVowel = cIsStrongVowel;\n\n      } else {\n        if (!haveCompleteSyllable) {\n          // do nothing since we don't have a complete syllable yet...\n        } else {\n\n          // handle explicit syllable breaks\n          if (word[i] === '-') {\n            // start new syllable\n            syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable)));\n            startSyllable = ++i;\n          } else {\n\n            var numberOfConsonants = 1, consonant2;\n\n            // count how many more consonants there are\n            for (j = i + 1; j < word.length; j++) {\n              if (this.isVowel(word[j]))\n                break;\n              numberOfConsonants++;\n            }\n\n            if (numberOfConsonants === 1) {\n              // start new syllable\n              syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable)));\n              startSyllable = i;\n\n            } else if (numberOfConsonants === 2) {\n              consonant2 = word[i + 1].toLowerCase();\n              if (consonant2 === 'l' || consonant2 === 'r' || (c === 'c' && consonant2 === 'h')) {\n                // split before the consonant pair\n                syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable)));\n                startSyllable = i++;\n              } else {\n                //split the consonants\n                syllables.push(this.createSyllable(word.substr(startSyllable, ++i - startSyllable)));\n                startSyllable = i;\n              }\n\n            } else if (numberOfConsonants === 3) {\n              consonant2 = word[i + 1].toLowerCase();\n\n              // if second consonant is s, divide cc-c, otherwise divide c-cc\n              if (consonant2 === 's') {\n                i += 2;\n                syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable)));\n              } else\n                syllables.push(this.createSyllable(word.substr(startSyllable, ++i - startSyllable)));\n\n              startSyllable = i;\n\n            } else if (numberOfConsonants === 4) {\n              // four always get split cc-cc\n              syllables.push(this.createSyllable(word.substr(startSyllable, i - startSyllable + 2)));\n              startSyllable = i + 2;\n              i += 3;\n            }\n          }\n\n          haveCompleteSyllable = false;\n        }\n\n        previousIsVowel = false;\n      }\n    }\n\n\n    // if we have a complete syllable, we can add it as a new one. Otherwise\n    // we tack the remaining characters onto the last syllable.\n    if (haveCompleteSyllable)\n      syllables.push(word.substr(startSyllable));\n    else if (startSyllable > 0)\n      syllables[syllables.length - 1] += word.substr(startSyllable);\n    else if (syllables.length === 0)\n      syllables.push(this.createSyllable(word))\n\n    return syllables;\n  }\n\n  /**\n   * @param {String} s the string to search\n   * @param {Number} startIndex The index at which to start searching for a vowel in the string\n   * @retuns a custom class with three properties: {found: (true/false) startIndex: (start index in s of vowel segment) length ()}\n   */\n  findVowelSegment(s, startIndex) {\n\n    var i, end, index;\n    var workingString = s.toLowerCase();\n\n    // do we have a diphthongs?\n    for (i = 0, end = this.diphthongs.length; i < end; i++) {\n      var d = this.diphthongs[i];\n      index = workingString.indexOf(d, startIndex);\n\n      if (index >= 0) {\n\n        // check the exceptions...\n        if (d[0] === 'u' && index > 0) {\n          var tripthong = s.substr(index - 1, 3).toLowerCase();\n\n          for (j = 0, endj = this.uDipthongExpections.length; i < endj; j++) {\n            if (tripthong === this.uDipthongExpections[j]) {\n              // search from after the u...\n              return this.findVowelSegment(s, index + 1);\n            }\n          }\n        }\n\n        return { found: true, startIndex: index, length: d.length };\n      }\n    }\n\n    // no diphthongs. Let's look for single vowels then...\n    for (i = 0, end = this.vowels.length; i < end; i++) {\n      index = workingString.indexOf(this.vowels[i], startIndex);\n\n      if (index >= 0)\n        return { found: true, startIndex: index, length: 1 };\n    }\n\n    // no vowels sets found after startIndex!\n    return { found: false, startIndex: -1, length: -1 };\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Text.js\n **/","//\r\n// Author(s):\r\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\r\n//\r\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n//\r\n\r\n\r\n// generated based on the svg data\r\nexport let Glyphs = {\r\n  \"None\": {\r\n    \"svgSrc\": \"<g></g>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 0,\r\n      \"height\": 0\r\n    },\r\n    \"origin\": {\r\n      \"x\": 0,\r\n      \"y\": 0\r\n    }\r\n  },\r\n  \"AcuteAccent\": {\r\n    \"svgSrc\": \"<path d=\\\"M4 0C-.614.52-.614.52-.803-3.182l60.768-108.422c4.52-7.182 10.543-13.67 18.075-13.67 5.27 0 14.31 1.264 23.346 7.793 7.53 5.223 8.803 11.752 8.803 16.975 0 3.917-.52 11.1-8.05 17.628L4 0z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M4 0C-.614.52-.614.52-.803-3.182l60.768-108.422c4.52-7.182 10.543-13.67 18.075-13.67 5.27 0 14.31 1.264 23.346 7.793 7.53 5.223 8.803 11.752 8.803 16.975 0 3.917-.52 11.1-8.05 17.628L4 0z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 110.99200439453125,\r\n      \"height\": 125.79399108886719\r\n    },\r\n    \"origin\": {\r\n      \"x\": 0.8030000329017639,\r\n      \"y\": 125.27399444580078\r\n    }\r\n  },\r\n  \"Stropha\": {\r\n    \"svgSrc\": \"<path d=\\\"M1.22-73.438c4.165 13.02 12.238 27.084 24.217 42.188L49.657 0 34.812 27.344C18.666 55.47-.084 72.396-21.438 78.124c4.687-3.645 7.03-8.593 7.03-14.843 0-8.853-4.947-20.572-14.843-35.155L-48 0 1.22-73.438z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M1.22-73.438c4.165 13.02 12.238 27.084 24.217 42.188L49.657 0 34.812 27.344C18.666 55.47-.084 72.396-21.438 78.124c4.687-3.645 7.03-8.593 7.03-14.843 0-8.853-4.947-20.572-14.843-35.155L-48 0 1.22-73.438z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 97.65699768066406,\r\n      \"height\": 151.56201171875\r\n    },\r\n    \"origin\": {\r\n      \"x\": 48,\r\n      \"y\": 73.43800354003906\r\n    }\r\n  },\r\n  \"BeginningAscLiquescent\": {\r\n    \"svgSrc\": \"<path d=\\\"M-50 43.688V-61c4.167 7.292 12.76 10.938 25.78 10.938 9.376 0 20.053-1.563 32.032-4.688C31.773-60.48 45.833-71.677 50-88.344v117.97C43.75 42.645 32.812 51.5 17.187 56.186-.52 61.398-15.886 64-28.906 64-42.97 64-50 57.23-50 43.687z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-50 43.688V-61c4.167 7.292 12.76 10.938 25.78 10.938 9.376 0 20.053-1.563 32.032-4.688C31.773-60.48 45.833-71.677 50-88.344v117.97C43.75 42.645 32.812 51.5 17.187 56.186-.52 61.398-15.886 64-28.906 64-42.97 64-50 57.23-50 43.687z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 152.343994140625\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 88.34400177001953\r\n    }\r\n  },\r\n  \"BeginningDesLiquescent\": {\r\n    \"svgSrc\": \"<path d=\\\"M-50-56.03c0-13.022 7.03-19.532 21.094-19.532 13.02 0 28.385 2.604 46.093 7.812C32.813-63.583 43.75-54.73 50-41.187V76C45.833 59.854 31.77 48.656 7.812 42.406c-11.98-3.125-22.656-4.687-32.03-4.687-13.022 0-21.615 3.905-25.782 11.718v-105.47z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-50-56.03c0-13.022 7.03-19.532 21.094-19.532 13.02 0 28.385 2.604 46.093 7.812C32.813-63.583 43.75-54.73 50-41.187V76C45.833 59.854 31.77 48.656 7.812 42.406c-11.98-3.125-22.656-4.687-32.03-4.687-13.022 0-21.615 3.905-25.782 11.718v-105.47z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 151.56199645996094\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 75.56199645996094\r\n    }\r\n  },\r\n  \"CustodDescLong\": {\r\n    \"svgSrc\": \"<path d=\\\"M39.063 273.472c5.73.52 7.29-6.25 4.687-20.312V-65.59c-13.542 2.083-24.22 5.468-32.03 10.156C3.905-50.226 0-43.714 0-35.904V71.91c5.73-5.21 10.677-8.594 14.844-10.157 5.73-1.562 12.24-2.343 19.53-2.343v196.875c0 11.458 1.563 17.187 4.688 17.187z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M39.063 273.472c5.73.52 7.29-6.25 4.687-20.312V-65.59c-13.542 2.083-24.22 5.468-32.03 10.156C3.905-50.226 0-43.714 0-35.904V71.91c5.73-5.21 10.677-8.594 14.844-10.157 5.73-1.562 12.24-2.343 19.53-2.343v196.875c0 11.458 1.563 17.187 4.688 17.187\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 46.35300064086914,\r\n      \"height\": 339.58197021484375\r\n    },\r\n    \"origin\": {\r\n      \"x\": 0,\r\n      \"y\": 65.58999633789062\r\n    }\r\n  },\r\n  \"CustodDescShort\": {\r\n    \"svgSrc\": \"<path d=\\\"M34.375 191.923c0 8.333 1.563 12.24 4.688 11.72 3.125-.522 4.687-7.033 4.687-19.533v-250c-13.542 2.084-24.22 5.47-32.03 10.157C3.905-50.525 0-44.015 0-36.203V71.61c5.73-5.208 10.677-8.593 14.844-10.156 5.73-1.562 12.24-2.344 19.53-2.344v132.813z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M34.375 191.923c0 8.333 1.563 12.24 4.688 11.72 3.125-.522 4.687-7.033 4.687-19.533v-250c-13.542 2.084-24.22 5.47-32.03 10.157C3.905-50.525 0-44.015 0-36.203V71.61c5.73-5.208 10.677-8.593 14.844-10.156 5.73-1.562 12.24-2.344 19.53-2.344v132.813z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 43.75,\r\n      \"height\": 270.0530090332031\r\n    },\r\n    \"origin\": {\r\n      \"x\": 0,\r\n      \"y\": 65.88999938964844\r\n    }\r\n  },\r\n  \"CustodLong\": {\r\n    \"svgSrc\": \"<path d=\\\"M39.063-269.562c5.73-.52 7.29 6.25 4.687 20.312V69.5c-13.542-2.083-24.22-5.47-32.03-10.156C3.905 54.134 0 47.624 0 39.812V-68c5.73 5.208 10.677 8.594 14.844 10.156 5.73 1.563 12.24 2.344 19.53 2.344v-196.875c0-11.458 1.563-17.187 4.688-17.187z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M39.063-269.562c5.73-.52 7.29 6.25 4.687 20.312V69.5c-13.542-2.083-24.22-5.47-32.03-10.156C3.905 54.134 0 47.624 0 39.812V-68c5.73 5.208 10.677 8.594 14.844 10.156 5.73 1.563 12.24 2.344 19.53 2.344v-196.875c0-11.458 1.563-17.187 4.688-17.187z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 46.35300064086914,\r\n      \"height\": 339.5820007324219\r\n    },\r\n    \"origin\": {\r\n      \"x\": 0,\r\n      \"y\": 270.0820007324219\r\n    }\r\n  },\r\n  \"CustodShort\": {\r\n    \"svgSrc\": \"<path d=\\\"M34.375-188.125c0-8.333 1.563-12.24 4.688-11.72 3.125.522 4.687 7.033 4.687 19.532v250c-13.542-2.083-24.22-5.468-32.03-10.156C3.905 54.324 0 47.813 0 40V-67.813c5.73 5.21 10.677 8.594 14.844 10.157 5.73 1.562 12.24 2.344 19.53 2.343v-132.812z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M34.375-188.125c0-8.333 1.563-12.24 4.688-11.72 3.125.522 4.687 7.033 4.687 19.532v250c-13.542-2.083-24.22-5.468-32.03-10.156C3.905 54.324 0 47.813 0 40V-67.813c5.73 5.21 10.677 8.594 14.844 10.157 5.73 1.562 12.24 2.344 19.53 2.343v-132.812z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 43.75,\r\n      \"height\": 270.052001953125\r\n    },\r\n    \"origin\": {\r\n      \"x\": 0,\r\n      \"y\": 200.36500549316406\r\n    }\r\n  },\r\n  \"DoClef\": {\r\n    \"svgSrc\": \"<path d=\\\"M0 98.406V-97.688C0-118 5.99-134.275 17.97-146.516c11.978-12.24 27.603-18.36 46.874-18.36 10.937 0 19.53 3.126 25.78 9.376s9.376 14.583 9.376 25v107.813l-6.25-5.47c-4.167-3.645-10.287-7.42-18.36-11.327-8.072-3.907-16.796-5.86-26.17-5.86-11.46 0-21.486 4.427-30.08 13.282-8.593 8.854-12.89 19.53-12.89 32.03s4.297 23.308 12.89 32.423c8.594 9.115 18.62 13.672 30.08 13.672 9.374 0 18.098-1.822 26.17-5.468 8.073-3.646 14.193-7.292 18.36-10.938l6.25-6.25V132c0 9.896-3.125 18.1-9.375 24.61-6.25 6.51-14.844 9.765-25.78 9.765-19.272 0-34.897-6.25-46.876-18.75C5.99 135.125 0 118.72 0 98.405z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M0 98.406V-97.688C0-118 5.99-134.275 17.97-146.516c11.978-12.24 27.603-18.36 46.874-18.36 10.937 0 19.53 3.126 25.78 9.376s9.376 14.583 9.376 25v107.813l-6.25-5.47c-4.167-3.645-10.287-7.42-18.36-11.327-8.072-3.907-16.796-5.86-26.17-5.86-11.46 0-21.486 4.427-30.08 13.282-8.593 8.854-12.89 19.53-12.89 32.03s4.297 23.308 12.89 32.423c8.594 9.115 18.62 13.672 30.08 13.672 9.374 0 18.098-1.822 26.17-5.468 8.073-3.646 14.193-7.292 18.36-10.938l6.25-6.25V132c0 9.896-3.125 18.1-9.375 24.61-6.25 6.51-14.844 9.765-25.78 9.765-19.272 0-34.897-6.25-46.876-18.75C5.99 135.125 0 118.72 0 98.405z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 331.2510070800781\r\n    },\r\n    \"origin\": {\r\n      \"x\": 0,\r\n      \"y\": 164.87600708007812\r\n    }\r\n  },\r\n  \"FaClef\": {\r\n    \"svgSrc\": \"<path d=\\\"M85.156-32v193.75c0 9.375-1.562 14.323-4.687 14.844-1.564 0-2.605-.52-3.126-1.563-.52-1.04-.782-2.603-.78-4.686V56.28c-8.335-8.332-19.793-12.5-34.376-12.5-17.71 0-31.77 3.907-42.188 11.72V-32c0-18.23 14.193-27.344 42.578-27.344 28.385 0 42.578 9.115 42.578 27.344zM98.438 93V-92.156c0-19.27 5.73-34.896 17.187-46.875 11.458-11.98 26.562-17.97 45.313-17.97 10.937 0 19.14 2.865 24.61 8.594 5.467 5.73 8.202 13.542 8.202 23.437v103.126l-5.47-4.687c-3.645-3.647-9.374-7.293-17.186-10.94-7.813-3.645-15.886-5.467-24.22-5.468-11.978 0-22.004 4.167-30.077 12.5-8.073 8.334-12.11 18.36-12.11 30.08 0 11.717 4.037 22.004 12.11 30.858s18.1 13.28 30.078 13.28c8.333 0 16.406-1.822 24.22-5.468 7.81-3.645 13.54-7.03 17.186-10.156l5.47-5.468V125.81c0 9.896-2.865 17.84-8.594 23.83-5.73 5.988-13.802 8.983-24.22 8.983-18.75 0-33.853-6.12-45.31-18.36-11.46-12.24-17.19-27.994-17.19-47.265z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M85.156-32v193.75c0 9.375-1.562 14.323-4.687 14.844-1.564 0-2.605-.52-3.126-1.563-.52-1.04-.782-2.603-.78-4.686V56.28c-8.335-8.332-19.793-12.5-34.376-12.5-17.71 0-31.77 3.907-42.188 11.72V-32c0-18.23 14.193-27.344 42.578-27.344 28.385 0 42.578 9.115 42.578 27.344zM98.438 93V-92.156c0-19.27 5.73-34.896 17.187-46.875 11.458-11.98 26.562-17.97 45.313-17.97 10.937 0 19.14 2.865 24.61 8.594 5.467 5.73 8.202 13.542 8.202 23.437v103.126l-5.47-4.687c-3.645-3.647-9.374-7.293-17.186-10.94-7.813-3.645-15.886-5.467-24.22-5.468-11.978 0-22.004 4.167-30.077 12.5-8.073 8.334-12.11 18.36-12.11 30.08 0 11.717 4.037 22.004 12.11 30.858s18.1 13.28 30.078 13.28c8.333 0 16.406-1.822 24.22-5.468 7.81-3.645 13.54-7.03 17.186-10.156l5.47-5.468V125.81c0 9.896-2.865 17.84-8.594 23.83-5.73 5.988-13.802 8.983-24.22 8.983-18.75 0-33.853-6.12-45.31-18.36-11.46-12.24-17.19-27.994-17.19-47.265z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 193.75201416015625,\r\n      \"height\": 333.5950012207031\r\n    },\r\n    \"origin\": {\r\n      \"x\": 0.001003265380859375,\r\n      \"y\": 157.00100708007812\r\n    }\r\n  },\r\n  \"Flat\": {\r\n    \"svgSrc\": \"<path d=\\\"M7.813-204.406c4.166 0 6.25 5.208 6.25 15.625L12.5-10.657C33.854 13.302 54.167 25.28 73.438 25.28c9.374 0 14.062-4.686 14.062-14.06 0-6.25-1.042-11.72-3.125-16.407-2.083-4.688-7.03-9.766-14.844-15.235-7.81-5.47-13.02-8.984-15.624-10.547L27.344-45.81V-80.97c17.187 0 33.073 4.82 47.656 14.454C89.583-56.88 96.875-47.376 96.875-38c0 67.708-.26 101.562-.78 101.563-38.543 0-69.532-12.24-92.97-36.72C0-52.322-1.042-123.936 0-188c0-10.937 2.604-16.406 7.813-16.406z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M7.813-204.406c4.166 0 6.25 5.208 6.25 15.625L12.5-10.657C33.854 13.302 54.167 25.28 73.438 25.28c9.374 0 14.062-4.686 14.062-14.06 0-6.25-1.042-11.72-3.125-16.407-2.083-4.688-7.03-9.766-14.844-15.235-7.81-5.47-13.02-8.984-15.624-10.547L27.344-45.81V-80.97c17.187 0 33.073 4.82 47.656 14.454C89.583-56.88 96.875-47.376 96.875-38c0 67.708-.26 101.562-.78 101.563-38.543 0-69.532-12.24-92.97-36.72C0-52.322-1.042-123.936 0-188c0-10.937 2.604-16.406 7.813-16.406z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 97.91699981689453,\r\n      \"height\": 267.968994140625\r\n    },\r\n    \"origin\": {\r\n      \"x\": 1.0420000553131104,\r\n      \"y\": 204.406005859375\r\n    }\r\n  },\r\n  \"Mora\": {\r\n    \"svgSrc\": \"<path d=\\\"M47.478-24c6.957 0 12.793 2.288 17.49 6.883C69.662-12.52 72-6.904 72-.267c0 6.64-2.337 12.352-7.033 17.118C60.27 21.618 54.435 24 47.477 24c-6.26 0-11.748-2.383-16.444-7.15C26.337 12.086 24 6.374 24-.265c0-6.638 2.337-12.255 7.033-16.85C35.73-21.713 41.217-24 47.478-24z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M47.478-24c6.957 0 12.793 2.288 17.49 6.883C69.662-12.52 72-6.904 72-.267c0 6.64-2.337 12.352-7.033 17.118C60.27 21.618 54.435 24 47.477 24c-6.26 0-11.748-2.383-16.444-7.15C26.337 12.086 24 6.374 24-.265c0-6.638 2.337-12.255 7.033-16.85C35.73-21.713 41.217-24 47.478-24z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 48,\r\n      \"height\": 48\r\n    },\r\n    \"origin\": {\r\n      \"x\": -24,\r\n      \"y\": 24\r\n    }\r\n  },\r\n  \"Natural\": {\r\n    \"svgSrc\": \"<path d=\\\"M7.906-166.563c-2.864 0-5.614.52-8.218 1.563v13.28l.78 56.25.782 78.907v85.157c.52 3.646 2.604 5.73 6.25 6.25l23.438-3.906 23.437-3.907v29.69c0 42.186-.26 63.54-.78 64.06l6.25 2.345c1.04.52 2.082.78 3.124.78 2.603 0 4.947-1.3 7.03-3.905L67.656-71.25c-.52-2.604-2.083-3.906-4.687-3.906-7.814 0-17.19 1.04-28.126 3.125l-19.53 3.124.78-38.28V-165c-2.604-1.042-5.323-1.562-8.188-1.563zM55.938-40v71.875l-41.407 7.03c0-48.436.262-72.655.783-72.655L55.938-40z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M7.906-166.563c-2.864 0-5.614.52-8.218 1.563v13.28l.78 56.25.782 78.907v85.157c.52 3.646 2.604 5.73 6.25 6.25l23.438-3.906 23.437-3.907v29.69c0 42.186-.26 63.54-.78 64.06l6.25 2.345c1.04.52 2.082.78 3.124.78 2.603 0 4.947-1.3 7.03-3.905L67.656-71.25c-.52-2.604-2.083-3.906-4.687-3.906-7.814 0-17.19 1.04-28.126 3.125l-19.53 3.124.78-38.28V-165c-2.604-1.042-5.323-1.562-8.188-1.563zM55.938-40v71.875l-41.407 7.03c0-48.436.262-72.655.783-72.655L55.938-40z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 70.31100463867188,\r\n      \"height\": 330.468994140625\r\n    },\r\n    \"origin\": {\r\n      \"x\": 0.3120002746582031,\r\n      \"y\": 166.56300354003906\r\n    }\r\n  },\r\n  \"OriscusAsc\": {\r\n    \"svgSrc\": \"<path d=\\\"M50 30.25c0 12.5-3.125 21.354-9.375 26.562-3.125 2.605-7.813 3.907-14.063 3.907-3.125 0-5.99-.522-8.593-1.564-2.605-1.04-5.6-2.474-8.986-4.297C5.6 53.035 2.734 51.603.39 50.56c-2.343-1.04-5.338-2.474-8.984-4.296-3.646-1.823-6.77-3.256-9.375-4.297-2.603-1.043-5.468-1.564-8.593-1.564-6.25 0-10.937 1.563-14.062 4.688C-46.875 50.824-50 59.677-50 71.656v-106.25c0-13.02 3.125-21.875 9.375-26.562 3.125-2.604 7.813-3.906 14.063-3.907 3.125 0 5.99.52 8.593 1.563 2.605 1.042 5.73 2.474 9.376 4.297 3.646 1.823 6.51 2.995 8.594 3.516l10.938 5.468c6.25 3.126 11.458 4.69 15.624 4.69 6.25 0 10.938-1.564 14.063-4.69C46.875-55.426 50-64.02 50-76V30.25z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M50 30.25c0 12.5-3.125 21.354-9.375 26.562-3.125 2.605-7.813 3.907-14.063 3.907-3.125 0-5.99-.522-8.593-1.564-2.605-1.04-5.6-2.474-8.986-4.297C5.6 53.035 2.734 51.603.39 50.56c-2.343-1.04-5.338-2.474-8.984-4.296-3.646-1.823-6.77-3.256-9.375-4.297-2.603-1.043-5.468-1.564-8.593-1.564-6.25 0-10.937 1.563-14.062 4.688C-46.875 50.824-50 59.677-50 71.656v-106.25c0-13.02 3.125-21.875 9.375-26.562 3.125-2.604 7.813-3.906 14.063-3.907 3.125 0 5.99.52 8.593 1.563 2.605 1.042 5.73 2.474 9.376 4.297 3.646 1.823 6.51 2.995 8.594 3.516l10.938 5.468c6.25 3.126 11.458 4.69 15.624 4.69 6.25 0 10.938-1.564 14.063-4.69C46.875-55.426 50-64.02 50-76V30.25z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 147.656005859375\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 76\r\n    }\r\n  },\r\n  \"OriscusDes\": {\r\n    \"svgSrc\": \"<path d=\\\"M-50 30.844v-106.25c0 11.458 3.125 20.052 9.375 25.78 3.125 3.126 7.813 4.69 14.063 4.688 4.687 0 13.41-3.255 26.17-9.765 12.762-6.51 21.746-9.766 26.954-9.766 6.25 0 10.938 1.303 14.063 3.907C46.875-55.874 50-47.02 50-34V72.25c0-11.98-3.125-20.833-9.375-26.563C37.5 42.563 32.812 41 26.562 41 21.875 41 13.023 44.385 0 51.156c-4.167 2.604-8.594 4.948-13.28 7.032-4.69 2.083-9.116 3.124-13.283 3.124-6.25 0-10.937-1.302-14.062-3.906C-46.875 52.198-50 43.344-50 30.844z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-50 30.844v-106.25c0 11.458 3.125 20.052 9.375 25.78 3.125 3.126 7.813 4.69 14.063 4.688 4.687 0 13.41-3.255 26.17-9.765 12.762-6.51 21.746-9.766 26.954-9.766 6.25 0 10.938 1.303 14.063 3.907C46.875-55.874 50-47.02 50-34V72.25c0-11.98-3.125-20.833-9.375-26.563C37.5 42.563 32.812 41 26.562 41 21.875 41 13.023 44.385 0 51.156c-4.167 2.604-8.594 4.948-13.28 7.032-4.69 2.083-9.116 3.124-13.283 3.124-6.25 0-10.937-1.302-14.062-3.906C-46.875 52.198-50 43.344-50 30.844z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 147.656005859375\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 75.40599822998047\r\n    }\r\n  },\r\n  \"PodatusLower\": {\r\n    \"svgSrc\": \"<path d=\\\"M-4.688-30.28c22.396 0 34.636-.262 36.72-.782 5.728-1.563 8.593-5.21 8.593-10.938H50v97.656c0 2.604-1.302 4.167-3.906 4.688-5.21.52-21.355.78-48.438.78-23.958 0-38.54-.26-43.75-.78-2.604 0-3.906-1.302-3.906-3.906v-82.032c0-3.646 1.302-5.468 3.906-5.468h2.344c2.604.52 15.625.78 39.063.78z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-4.688-30.28c22.396 0 34.636-.262 36.72-.782 5.728-1.563 8.593-5.21 8.593-10.938H50v97.656c0 2.604-1.302 4.167-3.906 4.688-5.21.52-21.355.78-48.438.78-23.958 0-38.54-.26-43.75-.78-2.604 0-3.906-1.302-3.906-3.906v-82.032c0-3.646 1.302-5.468 3.906-5.468h2.344c2.604.52 15.625.78 39.063.78z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 103.12399291992188\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 42\r\n    }\r\n  },\r\n  \"PodatusUpper\": {\r\n    \"svgSrc\": \"<path d=\\\"M-46.094-63.78c13.542 0 24.61 2.473 33.203 7.42C-4.298-51.41 0-43.99 0-34.093V62h-9.375c0-10.938-2.604-19.14-7.812-24.61-5.21-5.468-14.844-8.203-28.907-8.202-18.23 0-33.333 4.166-45.312 12.5v-75.782c0-19.79 15.104-29.687 45.312-29.687z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-46.094-63.78c13.542 0 24.61 2.473 33.203 7.42C-4.298-51.41 0-43.99 0-34.093V62h-9.375c0-10.938-2.604-19.14-7.812-24.61-5.21-5.468-14.844-8.203-28.907-8.202-18.23 0-33.333 4.166-45.312 12.5v-75.782c0-19.79 15.104-29.687 45.312-29.687z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 91.406005859375,\r\n      \"height\": 125.78099822998047\r\n    },\r\n    \"origin\": {\r\n      \"x\": 91.406005859375,\r\n      \"y\": 63.78099822998047\r\n    }\r\n  },\r\n  \"Porrectus1\": {\r\n    \"svgSrc\": \"<path d=\\\"M233.594 162.875c-58.855 0-107.032-6.25-144.53-18.75C34.895 125.895-11.46 99.855-50 66V-52.75C-21.354-24.625 26.302 6.885 92.97 41.78 123.697 57.928 163.54 66 212.5 66c21.354 0 34.635-9.896 39.844-29.688V151.94c0 7.29-6.25 10.937-18.75 10.937z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M233.594 162.875c-58.855 0-107.032-6.25-144.53-18.75C34.895 125.895-11.46 99.855-50 66V-52.75C-21.354-24.625 26.302 6.885 92.97 41.78 123.697 57.928 163.54 66 212.5 66c21.354 0 34.635-9.896 39.844-29.688V151.94c0 7.29-6.25 10.937-18.75 10.937z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 302.343994140625,\r\n      \"height\": 215.6269989013672\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 52.75\r\n    }\r\n  },\r\n  \"Porrectus2\": {\r\n    \"svgSrc\": \"<path d=\\\"M309.375 259.375c-50.52 0-110.938-22.396-181.25-67.188C48.437 141.667-10.938 94.272-50 50V-68.75C0-3.125 60.417 52.083 131.25 96.875c58.333 36.98 110.677 58.854 157.03 65.625h7.033c16.145 0 26.822-9.896 32.03-29.688v114.844c0 7.812-5.99 11.72-17.968 11.72z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M309.375 259.375c-50.52 0-110.938-22.396-181.25-67.188C48.437 141.667-10.938 94.272-50 50V-68.75C0-3.125 60.417 52.083 131.25 96.875c58.333 36.98 110.677 58.854 157.03 65.625h7.033c16.145 0 26.822-9.896 32.03-29.688v114.844c0 7.812-5.99 11.72-17.968 11.72z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 377.3429870605469,\r\n      \"height\": 328.1260070800781\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 68.75\r\n    }\r\n  },\r\n  \"Porrectus3\": {\r\n    \"svgSrc\": \"<path d=\\\"M309.375 355.78c-48.96-16.666-109.115-55.468-180.47-116.405C79.428 198.23 19.793 134.687-50 48.75V-70C20 40 94.104 103.79 135.25 148.063 190 200 230 230 288.28 258.906c4.168 2.083 8.334 3.125 12.5 3.125 12.5 0 21.355-10.937 26.564-32.81v114.06c0 9.376-3.386 14.063-10.156 14.064-2.084 0-4.688-.522-7.813-1.563z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M309.375 355.78c-48.96-16.666-109.115-55.468-180.47-116.405C79.428 198.23 19.793 134.687-50 48.75V-70C20 40 94.104 103.79 135.25 148.063 190 200 230 230 288.28 258.906c4.168 2.083 8.334 3.125 12.5 3.125 12.5 0 21.355-10.937 26.564-32.81v114.06c0 9.376-3.386 14.063-10.156 14.064-2.084 0-4.688-.522-7.813-1.563z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 377.343994140625,\r\n      \"height\": 427.3450012207031\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 70\r\n    }\r\n  },\r\n  \"Porrectus4\": {\r\n    \"svgSrc\": \"<path d=\\\"M350 453.438c-52.754-22.397-120-77.345-201.74-164.844C90.87 227.656 24.784 147.708-50 48.75V-70C-8.84-1.25 58.406 86.51 151.74 193.28c60.868 69.793 119.13 124.22 174.782 163.282 5.797 3.646 11.014 5.47 15.652 5.47 12.173 0 21.45-11.72 27.826-35.157V441.72c0 9.373-3.19 14.06-9.565 14.06-2.9 0-6.377-.78-10.435-2.342z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M350 453.438c-52.754-22.397-120-77.345-201.74-164.844C90.87 227.656 24.784 147.708-50 48.75V-70C-8.84-1.25 58.406 86.51 151.74 193.28c60.868 69.793 119.13 124.22 174.782 163.282 5.797 3.646 11.014 5.47 15.652 5.47 12.173 0 21.45-11.72 27.826-35.157V441.72c0 9.373-3.19 14.06-9.565 14.06-2.9 0-6.377-.78-10.435-2.342z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 420,\r\n      \"height\": 525.780029296875\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 70\r\n    }\r\n  },\r\n  \"PunctumCavum\": {\r\n    \"svgSrc\": \"<path d=\\\"M0-60.906c33.333 0 50 9.635 50 28.906v94.53C39.062 51.595 22.396 46.126 0 46.126s-39.063 5.47-50 16.406V-32c0-19.27 16.667-28.906 50-28.906z\\\"/><path fill=\\\"#fff\\\" d=\\\"M.08-42.56c9.585.206 20.126.53 27.954 6.822 4.96 3.9 4.71 10.792 4.574 16.482v51.278C22.09 27.066 7.283 26.072.168 26.01c-7.72.23-21.895.935-32.616 4.674.04-19.197-.083-38.395.064-57.59.567-7.5 7.834-12.33 14.62-13.774 5.818-1.498 11.857-1.86 17.844-1.88z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M0-60.906c33.333 0 50 9.635 50 28.906v94.53C39.062 51.595 22.396 46.126 0 46.126s-39.063 5.47-50 16.406V-32c0-19.27 16.667-28.906 50-28.906z\"\r\n    },\r\n    {\r\n      \"type\": \"negative\",\r\n      \"data\": \"M.08-42.56c9.585.206 20.126.53 27.954 6.822 4.96 3.9 4.71 10.792 4.574 16.482v51.278C22.09 27.066 7.283 26.072.168 26.01c-7.72.23-21.895.935-32.616 4.674.04-19.197-.083-38.395.064-57.59.567-7.5 7.834-12.33 14.62-13.774 5.818-1.498 11.857-1.86 17.844-1.88z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 123.43799591064453\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 60.90599822998047\r\n    }\r\n  },\r\n  \"PunctumCuadratum\": {\r\n    \"svgSrc\": \"<path d=\\\"M0-60.906c33.333 0 50 9.635 50 28.906v94.53C39.062 51.595 22.396 46.126 0 46.126s-39.063 5.47-50 16.406V-32c0-19.27 16.667-28.906 50-28.906z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M0-60.906c33.333 0 50 9.635 50 28.906v94.53C39.062 51.595 22.396 46.126 0 46.126s-39.063 5.47-50 16.406V-32c0-19.27 16.667-28.906 50-28.906z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 123.43799591064453\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 60.90599822998047\r\n    }\r\n  },\r\n  \"PunctumCuadratumAscLiquescent\": {\r\n    \"svgSrc\": \"<path d=\\\"M-50 43.688V-61c4.167 7.292 12.76 10.938 25.78 10.938 9.376 0 20.053-1.563 32.032-4.688C31.773-60.48 45.833-71.677 50-88.344v117.97C43.75 42.645 32.812 51.5 17.187 56.186-.52 61.398-15.886 64-28.906 64-42.97 64-50 57.23-50 43.687z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-50 43.688V-61c4.167 7.292 12.76 10.938 25.78 10.938 9.376 0 20.053-1.563 32.032-4.688C31.773-60.48 45.833-71.677 50-88.344v117.97C43.75 42.645 32.812 51.5 17.187 56.186-.52 61.398-15.886 64-28.906 64-42.97 64-50 57.23-50 43.687z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 152.343994140625\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 88.34400177001953\r\n    }\r\n  },\r\n  \"PunctumCuadratumDesLiquescent\": {\r\n    \"svgSrc\": \"<path d=\\\"M-50-56.03c0-13.022 7.03-19.532 21.094-19.532 13.02 0 28.385 2.604 46.093 7.812C32.813-63.583 43.75-54.73 50-41.187V76C45.833 59.854 31.77 48.656 7.812 42.406c-11.98-3.125-22.656-4.687-32.03-4.687-13.022 0-21.615 3.905-25.782 11.718v-105.47z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-50-56.03c0-13.022 7.03-19.532 21.094-19.532 13.02 0 28.385 2.604 46.093 7.812C32.813-63.583 43.75-54.73 50-41.187V76C45.833 59.854 31.77 48.656 7.812 42.406c-11.98-3.125-22.656-4.687-32.03-4.687-13.022 0-21.615 3.905-25.782 11.718v-105.47z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 151.56199645996094\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 75.56199645996094\r\n    }\r\n  },\r\n  \"PunctumInclinatum\": {\r\n    \"svgSrc\": \"<path d=\\\"M0-75.78L50 0 0 75-50 0 0-75.78z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M0-75.78L50 0 0 75-50 0 0-75.78z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 150.77999877929688\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 75.77999877929688\r\n    }\r\n  },\r\n  \"Quilisma\": {\r\n    \"svgSrc\": \"<path d=\\\"M-50 34.938V-51c5.73 20.833 13.02 31.25 21.875 31.25 7.813 0 12.5-15.625 14.063-46.875 3.645 12.5 6.9 21.224 9.765 26.172s6.9 7.422 12.11 7.422c5.208 0 9.374-14.324 12.5-42.97 5.73 22.917 10.677 34.375 14.843 34.375 5.73 0 10.677-15.885 14.844-47.656v100c0 17.707-3.125 26.56-9.375 26.56-4.688 0-9.115-5.988-13.28-17.968-2.085 21.875-8.074 32.813-17.97 32.813-7.813 0-16.146-7.292-25-21.875-4.688 20.312-10.677 30.47-17.97 30.47-5.207 0-9.244-2.605-12.108-7.814C-48.568 47.698-50 41.708-50 34.938z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-50 34.938V-51c5.73 20.833 13.02 31.25 21.875 31.25 7.813 0 12.5-15.625 14.063-46.875 3.645 12.5 6.9 21.224 9.765 26.172s6.9 7.422 12.11 7.422c5.208 0 9.374-14.324 12.5-42.97 5.73 22.917 10.677 34.375 14.843 34.375 5.73 0 10.677-15.885 14.844-47.656v100c0 17.707-3.125 26.56-9.375 26.56-4.688 0-9.115-5.988-13.28-17.968-2.085 21.875-8.074 32.813-17.97 32.813-7.813 0-16.146-7.292-25-21.875-4.688 20.312-10.677 30.47-17.97 30.47-5.207 0-9.244-2.605-12.108-7.814C-48.568 47.698-50 41.708-50 34.938z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 150\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 89.28199768066406\r\n    }\r\n  },\r\n  \"TerminatingAscLiquescent\": {\r\n    \"svgSrc\": \"<path d=\\\"M-9.375 40.22c0-11.98-4.948-17.97-14.844-17.97-10.936 0-19.53 3.646-25.78 10.938v-53.126c0-6.77 2.604-12.76 7.813-17.968 5.208-5.21 10.677-8.594 16.406-10.157 2.603-.52 5.207-.78 7.81-.78 3.647 0 7.032.78 10.157 2.343C-2.603-43.896 0-39.73 0-34V73.03h-9.375V40.22z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-9.375 40.22c0-11.98-4.948-17.97-14.844-17.97-10.936 0-19.53 3.646-25.78 10.938v-53.126c0-6.77 2.604-12.76 7.813-17.968 5.208-5.21 10.677-8.594 16.406-10.157 2.603-.52 5.207-.78 7.81-.78 3.647 0 7.032.78 10.157 2.343C-2.603-43.896 0-39.73 0-34V73.03h-9.375V40.22z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 49.999000549316406,\r\n      \"height\": 121.87299346923828\r\n    },\r\n    \"origin\": {\r\n      \"x\": 49.999000549316406,\r\n      \"y\": 48.842994689941406\r\n    }\r\n  },\r\n  \"TerminatingDesLiquescent\": {\r\n    \"svgSrc\": \"<path d=\\\"M-9.375-48.156V-80.97H0V26.845c0 5.73-2.604 9.896-7.813 12.5-3.125 1.562-6.51 2.343-10.156 2.343-2.603 0-5.207-.26-7.81-.78-5.73-1.563-11.2-4.95-16.407-10.157C-47.398 25.542-50 19.292-50 12v-52.344c6.25 7.292 14.844 10.938 25.78 10.938 9.897 0 14.845-6.25 14.845-18.75z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-9.375-48.156V-80.97H0V26.845c0 5.73-2.604 9.896-7.813 12.5-3.125 1.562-6.51 2.343-10.156 2.343-2.603 0-5.207-.26-7.81-.78-5.73-1.563-11.2-4.95-16.407-10.157C-47.398 25.542-50 19.292-50 12v-52.344c6.25 7.292 14.844 10.938 25.78 10.938 9.897 0 14.845-6.25 14.845-18.75z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 50,\r\n      \"height\": 122.65800476074219\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 80.97000122070312\r\n    }\r\n  },\r\n  \"VerticalEpisemaAbove\": {\r\n    \"svgSrc\": \"<path d=\\\"M-8-80H8L4 0h-8l-4-80z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-8-80H8L4 0h-8l-4-80z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 16,\r\n      \"height\": 80\r\n    },\r\n    \"origin\": {\r\n      \"x\": 8,\r\n      \"y\": 80\r\n    }\r\n  },\r\n  \"VerticalEpisemaBelow\": {\r\n    \"svgSrc\": \"<path d=\\\"M-8 80H8L4 0h-8l-4 80z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M-8 80H8L4 0h-8l-4 80z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 16,\r\n      \"height\": 80\r\n    },\r\n    \"origin\": {\r\n      \"x\": 8,\r\n      \"y\": 0\r\n    }\r\n  },\r\n  \"VirgaLong\": {\r\n    \"svgSrc\": \"<path d=\\\"M50-38v285.156c0 6.77-2.344 10.937-7.03 12.5-1.564 0-2.605-.78-3.126-2.344-.52-1.562-.782-10.156-.782-25.78V54.186C29.168 45.334 16.146 40.907 0 40.907c-22.917 0-39.583 5.208-50 15.624V-38c0-19.27 16.667-28.906 50-28.906S50-57.27 50-38z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M50-38v285.156c0 6.77-2.344 10.937-7.03 12.5-1.564 0-2.605-.78-3.126-2.344-.52-1.562-.782-10.156-.782-25.78V54.186C29.168 45.334 16.146 40.907 0 40.907c-22.917 0-39.583 5.208-50 15.624V-38c0-19.27 16.667-28.906 50-28.906S50-57.27 50-38z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 326.56201171875\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 66.90599822998047\r\n    }\r\n  },\r\n  \"VirgaShort\": {\r\n    \"svgSrc\": \"<path d=\\\"M50-38v211.72c0 7.29-2.344 11.457-7.03 12.5-1.564 0-2.606-.783-3.126-2.345-.52-1.563-.782-10.156-.782-25.78V54.187C29.167 45.332 16.146 40.906 0 40.906c-22.917 0-39.583 5.21-50 15.625V-38c0-19.27 16.667-28.906 50-28.906S50-57.27 50-38z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M50-38v211.72c0 7.29-2.344 11.457-7.03 12.5-1.564 0-2.606-.783-3.126-2.345-.52-1.563-.782-10.156-.782-25.78V54.187C29.167 45.332 16.146 40.906 0 40.906c-22.917 0-39.583 5.21-50 15.625V-38c0-19.27 16.667-28.906 50-28.906S50-57.27 50-38z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 100,\r\n      \"height\": 253.12600708007812\r\n    },\r\n    \"origin\": {\r\n      \"x\": 50,\r\n      \"y\": 66.90599822998047\r\n    }\r\n  },\r\n  \"Virgula\": {\r\n    \"svgSrc\": \"<path d=\\\"M8.178-55.66c0-22.137 12.092-33.2 36.287-33.2 11.835 0 23.53 5.66 35.108 16.98C91.15-60.547 96.94-41.766 96.94-15.534c0 53.515-31.646 87.487-94.937 101.895-2.048-2.06-3.077-5.146-3.077-9.273 0-1.03.247-1.8.76-2.316 42.71-19.027 64.075-41.678 64.075-67.92 0-11.322-2.325-20.326-6.945-27.016-4.62-6.69-9.52-11.052-14.676-13.11-5.147-2.048-11.836-3.85-20.07-5.403C12.81-39.707 8.18-45.37 8.18-55.66z\\\"/>\",\r\n    \"paths\": [{\r\n      \"type\": \"positive\",\r\n      \"data\": \"M8.178-55.66c0-22.137 12.092-33.2 36.287-33.2 11.835 0 23.53 5.66 35.108 16.98C91.15-60.547 96.94-41.766 96.94-15.534c0 53.515-31.646 87.487-94.937 101.895-2.048-2.06-3.077-5.146-3.077-9.273 0-1.03.247-1.8.76-2.316 42.71-19.027 64.075-41.678 64.075-67.92 0-11.322-2.325-20.326-6.945-27.016-4.62-6.69-9.52-11.052-14.676-13.11-5.147-2.048-11.836-3.85-20.07-5.403C12.81-39.707 8.18-45.37 8.18-55.66z\"\r\n    }],\r\n    \"bounds\": {\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"width\": 98.01399993896484,\r\n      \"height\": 175.2209930419922\r\n    },\r\n    \"origin\": {\r\n      \"x\": 1.0739939212799072,\r\n      \"y\": 88.86000061035156\r\n    }\r\n  }\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Glyphs.js\n **/","//\r\n// Author(s):\r\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\r\n//\r\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n//\r\n\r\nimport { Units, Pitch, Point, Rect, Margins, Size, Step, MarkingPositionHint } from 'Exsurge.Core'\r\nimport { Glyphs } from 'Exsurge.Glyphs'\r\nimport { Latin } from 'Exsurge.Text'\r\n\r\n\r\n// load in the web font for special chant characters here:\r\nvar __exsurgeCharactersFont = require(\"url?limit=30000!../assets/fonts/ExsurgeChar.otf\");\r\n\r\nexport let GlyphCode = {\r\n\r\n  None: \"None\",\r\n\r\n  AcuteAccent: \"AcuteAccent\",\r\n  Stropha: \"Stropha\",\r\n  //  StrophaLiquescent: \"StrophaLiquescent\",\r\n\r\n  BeginningAscLiquescent: \"BeginningAscLiquescent\",\r\n  BeginningDesLiquescent: \"BeginningDesLiquescent\",\r\n\r\n  CustodDescLong: \"CustodDescLong\",\r\n  CustodDescShort: \"CustodDescShort\",\r\n  CustodLong: \"CustodLong\",\r\n  CustodShort: \"CustodShort\",\r\n\r\n  // clefs and other markings\r\n  DoClef: \"DoClef\",\r\n  FaClef: \"FaClef\",\r\n  Flat: \"Flat\",\r\n  Mora: \"Mora\",\r\n  Natural: \"Natural\",\r\n  OriscusAsc: \"OriscusAsc\",\r\n  OriscusDes: \"OriscusDes\",\r\n\r\n  PodatusLower: \"PodatusLower\",\r\n  PodatusUpper: \"PodatusUpper\",\r\n\r\n  Porrectus1: \"Porrectus1\", // 1 staff line difference,\r\n  Porrectus2: \"Porrectus2\", // 2 lines difference, etc...\r\n  Porrectus3: \"Porrectus3\",\r\n  Porrectus4: \"Porrectus4\",\r\n\r\n  PunctumCavum: \"PunctumCavum\",\r\n  PunctumCuadratum: \"PunctumCuadratum\",\r\n  PunctumCuadratumAscLiquescent: \"PunctumCuadratumAscLiquescent\",\r\n  PunctumCuadratumDesLiquescent: \"PunctumCuadratumDesLiquescent\",\r\n  PunctumInclinatum: \"PunctumInclinatum\",\r\n  PunctumInclinatumLiquescent: \"PunctumInclinatumLiquescent\",\r\n  Quilisma: \"Quilisma\",\r\n\r\n  TerminatingAscLiquescent: \"TerminatingAscLiquescent\",\r\n  TerminatingDesLiquescent: \"TerminatingDesLiquescent\",\r\n  VerticalEpisemaAbove: \"VerticalEpisemaAbove\",\r\n  VerticalEpisemaBelow: \"VerticalEpisemaBelow\",\r\n  VirgaLong: \"VirgaLong\",\r\n  VirgaShort: \"VirgaShort\",\r\n  Virgula: \"Virgula\"\r\n}; // GlyphCode\r\n\r\nexport var QuickSvg = {\r\n\r\n  // namespaces  \r\n  ns: 'http://www.w3.org/2000/svg',\r\n  xmlns: 'http://www.w3.org/2000/xmlns/',\r\n  xlink: 'http://www.w3.org/1999/xlink',\r\n\r\n  // create the root level svg object\r\n  svg: function(width, height) {\r\n    var node = document.createElementNS(this.ns,'svg');\r\n\r\n    node.setAttribute('xmlns', this.ns); \r\n    node.setAttribute('version', '1.1');\r\n    node.setAttributeNS(this.xmlns, 'xmlns:xlink', this.xlink);\r\n\r\n    node.setAttribute('width', width);\r\n    node.setAttribute('height', height);\r\n\r\n    // create the defs element\r\n    var defs = document.createElementNS(this.ns, 'defs');\r\n    node.appendChild(defs);\r\n\r\n    node.defs = defs;\r\n\r\n    node.clearNotations = function() {\r\n      // clear out all children except defs\r\n      node.removeChild(defs);\r\n\r\n      while (node.hasChildNodes())\r\n        node.removeChild(node.lastChild);\r\n      \r\n      node.appendChild(defs);\r\n    }\r\n\r\n    return node;\r\n  },\r\n\r\n  defs: function() {\r\n    return node;\r\n  },\r\n\r\n  rect: function(width, height) {\r\n    var node = document.createElementNS(this.ns, 'rect');\r\n\r\n    node.setAttribute('width', width);\r\n    node.setAttribute('height', height);\r\n\r\n    return node;\r\n  },\r\n\r\n  line: function(x1, y1, x2, y2) {\r\n    var node = document.createElementNS(this.ns, 'line');\r\n\r\n    node.setAttribute('x1', x1);\r\n    node.setAttribute('y1', y1);\r\n    node.setAttribute('x2', x2);\r\n    node.setAttribute('y2', y2);\r\n\r\n    return node;\r\n  },\r\n\r\n  g: function() {\r\n    var node = document.createElementNS(this.ns, 'g');\r\n\r\n    return node;\r\n  },\r\n\r\n  text: function() {\r\n    var node = document.createElementNS(this.ns, 'text');\r\n\r\n    return node;\r\n  },\r\n\r\n  tspan: function(str) {\r\n    var node = document.createElementNS(this.ns, 'tspan');\r\n    node.textContent = str;\r\n\r\n    return node;\r\n  },\r\n\r\n  // nodeRef should be the id of the object in defs (without the #)\r\n  use: function(nodeRef) {\r\n    var node = document.createElementNS(this.ns, 'use');\r\n    node.setAttributeNS(this.xlink, \"xlink:href\", '#' + nodeRef);\r\n\r\n    return node;\r\n  },\r\n\r\n  createFragment: function(name, attributes, child) {\r\n    if (child === undefined || child === null)\r\n      child = '';\r\n\r\n    var fragment = '<' + name + ' ';\r\n\r\n    for (var attr in attributes) {\r\n      if (attributes.hasOwnProperty(attr))\r\n        fragment += attr + '=\"' + attributes[attr] + '\" ';\r\n    }\r\n\r\n    fragment += '>' + child + '</' + name + '>';\r\n\r\n    return fragment;\r\n  },\r\n\r\n  parseFragment: function(fragment) {\r\n\r\n    // create temporary holder\r\n    var well = document.createElement('svg');\r\n\r\n    // act as a setter if svg is given\r\n    if (fragment) {\r\n\r\n      var container = this.g();\r\n\r\n      // dump raw svg\r\n      // do this to allow the browser to automatically create svg nodes?\r\n      well.innerHTML = '<svg>' + fragment.replace(/\\n/, '').replace(/<(\\w+)([^<]+?)\\/>/g, '<$1$2></$1>') + '</svg>'\r\n\r\n      // transplant nodes\r\n      for (var i = 0, il = well.firstChild.childNodes.length; i < il; i++)\r\n        container.appendChild(well.firstChild.firstChild)\r\n      \r\n      return container;\r\n    }\r\n  },\r\n\r\n  translate: function(node, x, y) {\r\n    node.setAttribute('transform', 'translate(' + x + ',' + y + ')');\r\n    return node;\r\n  },\r\n\r\n  scale: function(node, sx, sy) {\r\n    node.setAttribute('transform', 'scale(' + sx + ',' + sy + ')');\r\n    return node;\r\n  }\r\n}\r\n\r\n/*\r\n * ChantContext\r\n */\r\nexport class ChantContext {\r\n\r\n  constructor() {\r\n\r\n    this.defs = {};\r\n\r\n    // font styles\r\n    this.lyricTextSize = 16; // in points?\r\n    this.lyricTextFont = \"'Palatino Linotype', 'Book Antiqua', Palatino, serif\";\r\n    this.lyricTextColor = \"#000\";\r\n    \r\n    this.dropCapTextSize = 64;\r\n    this.dropCapTextFont = this.lyricTextFont;\r\n    this.dropCapTextColor = this.lyricTextColor;\r\n    \r\n    this.annotationTextSize = 13;\r\n    this.annotationTextFont = this.lyricTextFont;\r\n    this.annotationTextColor = this.lyricTextColor;\r\n\r\n    // everything depends on the scale of the punctum\r\n    this.glyphPunctumWidth = Glyphs.PunctumCuadratum.bounds.width;\r\n    this.glyphPunctumHeight = Glyphs.PunctumCuadratum.bounds.height;\r\n\r\n    // fixme: for now, we just set these using the glyph scales as noted above, presuming a\r\n    // staff line size of 0.5 in. Really what we should do is scale the punctum size based\r\n    // on the text metrics, right? 1 punctum ~ x height size?\r\n    this.glyphScaling = 1.0 / 16.0; \r\n\r\n    this.staffInterval = this.glyphPunctumWidth * this.glyphScaling;\r\n    this.staffLineWeight = this.glyphPunctumWidth * this.glyphScaling / 8;\r\n    this.neumeLineWeight = this.glyphPunctumWidth * this.glyphScaling / 8; // the weight of connecting lines in the glyphs.\r\n    this.dividerLineWeight = this.neumeLineWeight; // of quarter bar, half bar, etc.\r\n    this.episemaLineWeight = this.neumeLineWeight; // of horizontal episemae\r\n\r\n    // for keeping track of the clef\r\n    this.activeClef = null;\r\n\r\n    this.staffLineColor = \"#000\";\r\n    this.dividerLineColor = \"#000\";\r\n\r\n    this.defaultLanguage = new Latin();\r\n\r\n    this.svgTextMeasurer = QuickSvg.svg(1,1);\r\n    this.svgTextMeasurer.setAttribute('id', \"TextMeasurer\");\r\n    document.querySelector('body').appendChild(this.svgTextMeasurer);\r\n\r\n    // measure the size of a hyphen for the lyrics\r\n    var hyphen = new Lyric(this, \"-\", LyricType.SingleSyllable);\r\n    this.hyphenWidth = hyphen.bounds.width;\r\n\r\n    this.minLyricWordSpacing = this.hyphenWidth;\r\n\r\n    this.intraNeumeSpacing = this.staffInterval / 2.0;\r\n\r\n    // for connecting neume syllables...\r\n    this.syllableConnector = '-';\r\n\r\n    this.drawGuides = false;\r\n    this.drawDebuggingBounds = true;\r\n\r\n    // chant notation elements are normally separated by a minimum fixed amount of space\r\n    // on the staff line. It can happen, however, that two text elements are almost close\r\n    // enough to merge, only to be separated much more by the required hyphen (or other\r\n    // connecting string).\r\n    //\r\n    // This tolerance value allows a little bit of flexibility to merge two close lyrical\r\n    // elements, thus bringing the chant notation elements a bit closer than otherwise\r\n    // would be normally allowed.\r\n    //\r\n    // condensing tolerance is a percentage value (0.0-1.0, inclusive) that indicates\r\n    // how much the default spacing can shrink. E.g., a value of 0.80 allows the layout\r\n    // engine to separate two glyphs by only 80% of the normal inter-neume spacing value.\r\n    //\r\n    // fixme: condensing tolerance is not implemented yet!\r\n    this.condensingTolerance = 0.9;\r\n\r\n    // if auto color is true, then exsurge tries to automatically colorize\r\n    // some elements of the chant (directives become rubric color, etc.)\r\n    this.autoColor = true;\r\n\r\n    this.insertFontsInDoc();\r\n  }\r\n\r\n  calculateHeightFromStaffPosition(staffPosition) {\r\n    return -staffPosition * this.staffInterval;\r\n  }\r\n\r\n  insertFontsInDoc() {\r\n\r\n    var styleElement = document.getElementById('exsurge-fonts');\r\n\r\n    if (styleElement === null) {\r\n      // create it since it doesn't exist yet.\r\n      styleElement = document.createElement('style');\r\n      styleElement.id = 'exsurge-fonts';\r\n\r\n      styleElement.appendChild(document.createTextNode(\"@font-face{font-family: 'Exsurge Characters';font-weight: normal;font-style: normal;src: url(\" + __exsurgeCharactersFont + \") format('opentype');}\"));\r\n\r\n      document.head.appendChild(styleElement);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * ChantLayoutElement\r\n */\r\nexport class ChantLayoutElement {\r\n\r\n  constructor() {\r\n\r\n    this.bounds = new Rect();\r\n    this.origin = new Point(0, 0);\r\n\r\n    this.selected = false;\r\n    this.highlighted = false;\r\n  }\r\n\r\n  // draws the element an html5 canvas\r\n  draw(ctxt) {\r\n\r\n  }\r\n\r\n  // returns svg code for the element, used for printing support\r\n  createDrawable(ctxt) {\r\n    throw \"ChantLayout Elements must implement createDrawable(ctxt)\";\r\n  }\r\n}\r\n\r\n\r\nexport class DividerLineVisualizer extends ChantLayoutElement {\r\n\r\n  constructor(ctxt, staffPosition0, staffPosition1) {\r\n    super();\r\n\r\n    var y0 = ctxt.calculateHeightFromStaffPosition(staffPosition0);\r\n    var y1 = ctxt.calculateHeightFromStaffPosition(staffPosition1);\r\n\r\n    if (y0 > y1) {\r\n      var temp = y0;\r\n      y0 = y1;\r\n      y1 = temp;\r\n    }\r\n\r\n    this.bounds.x = 0;\r\n    this.bounds.y = y0;\r\n    this.bounds.width = ctxt.dividerLineWeight;\r\n    this.bounds.height = y1 - y0;\r\n\r\n    this.origin.x = this.bounds.width / 2;\r\n    this.origin.y = y0;\r\n  }\r\n\r\n  createDrawable(ctxt) {\r\n\r\n    return QuickSvg.createFragment('rect', {\r\n      'x': this.bounds.x,\r\n      'y': this.bounds.y,\r\n      'width': ctxt.dividerLineWeight,\r\n      'height': this.bounds.height,\r\n      'fill': ctxt.dividerLineColor,\r\n      'class': 'dividerLine'\r\n    });\r\n  }\r\n}\r\n\r\nexport class NeumeLineVisualizer extends ChantLayoutElement {\r\n\r\n  constructor(ctxt, note0, note1, hanging) {\r\n    super();\r\n\r\n    var y0 = ctxt.calculateHeightFromStaffPosition(note0.staffPosition);\r\n    var y1 = ctxt.calculateHeightFromStaffPosition(note1.staffPosition);\r\n\r\n    if (y0 > y1) {\r\n      var temp = y0;\r\n      y0 = y1;\r\n      y1 = temp;\r\n    }\r\n\r\n    if (hanging)\r\n      y1 += ctxt.glyphPunctumHeight * ctxt.glyphScaling / 2.2;\r\n\r\n    this.bounds.x = 0;\r\n    this.bounds.y = y0;\r\n    this.bounds.width = ctxt.neumeLineWeight;\r\n    this.bounds.height = y1 - y0;\r\n\r\n    this.origin.x = 0;\r\n    this.origin.y = 0;\r\n  }\r\n\r\n  createDrawable(ctxt) {\r\n\r\n    return QuickSvg.createFragment('rect', {\r\n      'x': this.bounds.x,\r\n      'y': this.bounds.y,\r\n      'width': ctxt.neumeLineWeight,\r\n      'height': this.bounds.height,\r\n      'fill': ctxt.neumeLineColor,\r\n      'class': 'neumeLine'\r\n    });\r\n  }\r\n}\r\n\r\nexport class HorizontalEpisemaVisualizer extends ChantLayoutElement {\r\n\r\n  constructor(ctxt, x, y, width) {\r\n    super();\r\n\r\n    this.bounds.x = x;\r\n    this.bounds.y = y;\r\n    this.bounds.width = width;\r\n    this.bounds.height = ctxt.episemaLineWeight;\r\n\r\n    this.origin.x = 0;\r\n    this.origin.y = 0;\r\n  }\r\n\r\n  createDrawable(ctxt) {\r\n\r\n    return QuickSvg.createFragment('rect', {\r\n      'x': this.bounds.x,\r\n      'y': this.bounds.y,\r\n      'width': this.bounds.width,\r\n      'height': this.bounds.height,\r\n      'fill': ctxt.neumeLineColor,\r\n      'class': 'horizontalEpisema'\r\n    });\r\n  }\r\n}\r\n\r\n\r\nexport class GlyphVisualizer extends ChantLayoutElement {\r\n\r\n  constructor(ctxt, glyphCode) {\r\n    super();\r\n\r\n    this.glyph = null;\r\n\r\n    this.setGlyphShape(ctxt, glyphCode);\r\n  }\r\n\r\n  setGlyphShape(ctxt, glyphCode) {\r\n\r\n    if (this.glyphCode === glyphCode)\r\n      return;\r\n\r\n    if (typeof glyphCode === 'undefined' || glyphCode === null || glyphCode === \"\")\r\n      this.glyphCode = GlyphCode.None;\r\n    else\r\n      this.glyphCode = glyphCode;\r\n\r\n    this.glyph = Glyphs[this.glyphCode];\r\n\r\n    // if this glyph hasn't been used yet, then load it up in the defs section for sharing\r\n    if (!ctxt.defs.hasOwnProperty(this.glyphCode)) {\r\n      var glyphSrc = this.glyph.svgSrc;\r\n\r\n      // create the ref\r\n      ctxt.defs[this.glyphCode] = QuickSvg.createFragment('g', {\r\n        id: this.glyphCode,\r\n        'class': 'glyph',\r\n        transform: 'scale(' + ctxt.glyphScaling + ')'\r\n      }, glyphSrc);\r\n    }\r\n\r\n\r\n    this.origin.x = this.glyph.origin.x * ctxt.glyphScaling;\r\n    this.origin.y = this.glyph.origin.y * ctxt.glyphScaling;\r\n\r\n    this.bounds.x = 0;\r\n    this.bounds.y = -this.origin.y;\r\n    this.bounds.width = this.glyph.bounds.width * ctxt.glyphScaling;\r\n    this.bounds.height = this.glyph.bounds.height * ctxt.glyphScaling;\r\n  }\r\n\r\n  setStaffPosition(ctxt, staffPosition) {\r\n    this.bounds.y += ctxt.calculateHeightFromStaffPosition(staffPosition);\r\n  }\r\n\r\n  createDrawable(ctxt) {\r\n\r\n    return QuickSvg.createFragment('use', {\r\n      'xlink:href': '#' + this.glyphCode,\r\n      x: this.bounds.x + this.origin.x,\r\n      y: this.bounds.y + this.origin.y\r\n    });\r\n  }\r\n}\r\n\r\nvar TextSpan = function(text, properties) {\r\n  if (typeof properties === 'undefined' || properties === null)\r\n    properties = \"\";\r\n\r\n  this.text = text;\r\n  this.properties = properties;\r\n};\r\n\r\nvar boldMarkup = \"*\";\r\nvar italicMarkup = \"_\";\r\nvar redMarkup = \"^\";\r\nvar smallCapsMarkup = \"%\";\r\n\r\nfunction MarkupStackFrame(symbol, startIndex, properties) {\r\n  this.symbol = symbol;\r\n  this.startIndex = startIndex;\r\n  this.properties = properties;\r\n}\r\n\r\nMarkupStackFrame.createStackFrame = function(symbol, startIndex) {\r\n\r\n  var properties = \"\";\r\n\r\n  switch(symbol) {\r\n    case boldMarkup:\r\n      properties = 'font-weight:bold;';\r\n      break;\r\n    case italicMarkup:\r\n      properties = 'font-style:italic;';\r\n      break;\r\n    case redMarkup:\r\n      properties = 'fill:#f00;'; // SVG text color is set by the fill property\r\n      break;\r\n    case smallCapsMarkup:\r\n      properties = \"font-feature-settings:'smcp';-webkit-font-feature-settings:'smcp';\";\r\n      break;\r\n  }\r\n\r\n  return new MarkupStackFrame(symbol, startIndex, properties);\r\n};\r\n\r\n\r\nexport class TextElement extends ChantLayoutElement {\r\n\r\n  constructor(ctxt, text, fontFamily, fontSize, textAnchor) {\r\n    super();\r\n\r\n    // set these to some sane values for now...\r\n    this.bounds.x = 0;\r\n    this.bounds.y = 0;\r\n    this.bounds.width = 0;\r\n    this.bounds.height = 0;\r\n    this.origin.x = 0;\r\n    this.origin.y = 0;\r\n\r\n    this.fontFamily = fontFamily;\r\n    this.fontSize = fontSize;\r\n    this.textAnchor = textAnchor;\r\n    this.dominantBaseline = 'baseline'; // default placement\r\n\r\n    this.generateSpansFromText(ctxt, text);\r\n\r\n    this.recalculateMetrics(ctxt);\r\n  }\r\n\r\n  generateSpansFromText(ctxt, text) {\r\n\r\n    this.unsanitizedText = text;\r\n    this.text = \"\";\r\n    this.spans = [];\r\n\r\n    // save ourselves a lot of grief for a very common text:\r\n    if (text === \"*\" || text === \"†\") {\r\n      this.spans.push(new TextSpan(text, \"\"));\r\n      return;\r\n    }\r\n\r\n    var markupStack = [];\r\n    var spanStartIndex = 0;\r\n\r\n    var filterFrames = (frame, symbol) => frame.Symbol === symbol;\r\n\r\n    var that = this;\r\n    var closeSpan = function (spanText, extraProperties) {\r\n      if (spanText === \"\")\r\n        return;\r\n\r\n      that.text += spanText;\r\n\r\n      var properties = \"\";\r\n      for (var i = 0; i < markupStack.length; i++)\r\n        properties += markupStack[i].properties;\r\n\r\n      if (extraProperties)\r\n        properties = properties + extraProperties;\r\n\r\n      that.spans.push(new TextSpan(spanText, properties));\r\n    };\r\n\r\n    var markupRegex = /(\\*|_|\\^|%|[ARVarv]\\/\\.)/g;\r\n\r\n    var match = null;\r\n    while ((match = markupRegex.exec(text))) {\r\n\r\n      var markupSymbol = match[0];\r\n\r\n      // non-matching symbols first\r\n      if (markupSymbol === \"A/.\" || markupSymbol === \"R/.\" || markupSymbol === \"V/.\" ||\r\n          markupSymbol === \"a/.\" || markupSymbol === \"r/.\" || markupSymbol === \"v/.\") {\r\n        closeSpan(text[match.index] + \".\", \"font-family:'Exsurge Characters';fill:#f00;\");\r\n      } else if (markupStack.length === 0) {\r\n        // otherwise we're dealing with matching markup delimeters\r\n        // if this is our first markup frame, then just create an inline for preceding text and push the stack frame\r\n        closeSpan(text.substring(spanStartIndex, match.index));\r\n        markupStack.push(MarkupStackFrame.createStackFrame(markupSymbol, match.index));\r\n      } else {\r\n\r\n        if (markupStack[markupStack.length - 1].symbol === markupSymbol) {\r\n          // group close\r\n          closeSpan(text.substring(spanStartIndex, match.index));\r\n          markupStack.pop();\r\n        } else if (markupStack.filter(filterFrames).length > 0) {\r\n          // trying to open a recursive group (or forgot to close a previous group)\r\n          // in either case, we just unwind to the previous stack frame\r\n          spanStartIndex = markupStack[markupStack.length - 1].startIndex;\r\n          markupStack.pop();\r\n          continue;\r\n        } else {\r\n          // group open\r\n          closeSpan(text.substring(spanStartIndex, match.index));\r\n          markupStack.push(MarkupStackFrame.createStackFrame(markupSymbol, match.index));\r\n        }\r\n      }\r\n\r\n      // advance the start index past the current markup\r\n      spanStartIndex = match.index + markupSymbol.length;\r\n    }\r\n\r\n    // if we finished matches, and there is still some text left, create one final run\r\n    if (spanStartIndex < text.length)\r\n      closeSpan(text.substring(spanStartIndex, text.length));\r\n\r\n    // if after all of that we still didn't create any runs, then just add the entire text\r\n    // string itself as a run\r\n    if (this.spans.length === 0)\r\n      closeSpan(text);\r\n  }\r\n\r\n  recalculateMetrics(ctxt) {\r\n\r\n    this.bounds.x = 0;\r\n    this.bounds.y = 0;\r\n\r\n    var xml = '<svg xmlns=\"http://www.w3.org/2000/svg\">' + this.createDrawable(ctxt) + '</svg>';\r\n    var doc = new DOMParser().parseFromString(xml, 'application/xml');\r\n    while(ctxt.svgTextMeasurer.firstChild) {\r\n      ctxt.svgTextMeasurer.firstChild.remove();\r\n    }\r\n    ctxt.svgTextMeasurer.appendChild( ctxt.svgTextMeasurer.ownerDocument.importNode(doc.documentElement, true).firstChild );\r\n\r\n    var bbox = ctxt.svgTextMeasurer.firstChild.getBBox();\r\n\r\n    this.bounds.x = 0;\r\n    this.bounds.y = 0;\r\n    this.bounds.width = bbox.width;\r\n    this.bounds.height = bbox.height;\r\n    this.origin.x = 0;\r\n    this.origin.y = 0; // baseline?\r\n  }\r\n\r\n  getCssClasses() {\r\n    return \"\";\r\n  }\r\n\r\n  getExtraStyleProperties(ctxt) {\r\n    return \"\";\r\n  }\r\n\r\n  createDrawable(ctxt) {\r\n\r\n    var spans = \"\";\r\n\r\n    for (var i = 0; i < this.spans.length; i++) {\r\n      var options = {};\r\n\r\n      if (this.spans[i].properties)\r\n        options['style'] = this.spans[i].properties;\r\n\r\n      spans += QuickSvg.createFragment('tspan', options, this.spans[i].text);\r\n    }\r\n\r\n    var styleProperties = \"font-family:\" + this.fontFamily +\r\n      \";font-size:\" + this.fontSize + \"px\" +\r\n      \";font-kerning:normal;\" +\r\n      this.getExtraStyleProperties(ctxt);\r\n\r\n    return QuickSvg.createFragment('text', {\r\n      'x': this.bounds.x,\r\n      'y': this.bounds.y,\r\n      'class': this.getCssClasses().trim(),\r\n      'text-anchor': this.textAnchor,\r\n      'dominant-baseline': this.dominantBaseline,\r\n      'style': styleProperties\r\n    }, spans);\r\n  }\r\n}\r\n\r\nexport var LyricType = {\r\n  SingleSyllable: 0,\r\n  BeginningSyllable: 1,\r\n  MiddleSyllable: 2,\r\n  EndingSyllable: 3,\r\n\r\n  Directive: 4 // for asterisks, \"ij.\" elements, or other performance notes.\r\n};\r\n\r\nexport class Lyric extends TextElement {\r\n  constructor(ctxt, text, lyricType) {\r\n    super(ctxt, text, ctxt.lyricTextFont, ctxt.lyricTextSize, 'start');\r\n\r\n    this.cssClasses += \" Lyric\";\r\n\r\n    if (typeof lyricType === 'undefined' || lyricType === null || lyricType === \"\")\r\n      this.lyricType = LyricType.SingleSyllable;\r\n    else\r\n      this.lyricType = lyricType;\r\n\r\n    this.needsConnector = false;\r\n  }\r\n\r\n  allowsConnector() {\r\n    return this.lyricType === LyricType.BeginningSyllable ||\r\n            this.lyricType === LyricType.MiddleSyllable;\r\n  }\r\n\r\n  setNeedsConnector(needs) {\r\n    if (needs === true) {\r\n      this.needsConnector = true;\r\n      this.bounds.width = this.widthWithConnector;\r\n\r\n      if (this.spans.length > 0)\r\n        this.spans[this.spans.length - 1].text = this.lastSpanTextWithConnector;\r\n    } else {\r\n      this.needsConnector = false;\r\n      this.bounds.width = this.widthWithoutConnector;\r\n\r\n      if (this.spans.length > 0)\r\n        this.spans[this.spans.length - 1].text = this.lastSpanText;\r\n    }\r\n  }\r\n\r\n  generateSpansFromText(ctxt, text) {\r\n    super.generateSpansFromText(ctxt, text);\r\n\r\n    if (this.spans.length > 0) {\r\n      this.lastSpanText = this.spans[this.spans.length - 1].text;\r\n      this.lastSpanTextWithConnector = this.lastSpanText + ctxt.syllableConnector;\r\n    } else {\r\n      this.lastSpanText = \"\";\r\n      this.lastSpanTextWithConnector = \"\";\r\n    }\r\n  }\r\n\r\n  recalculateMetrics(ctxt) {\r\n    super.recalculateMetrics(ctxt);\r\n\r\n    this.widthWithoutConnector = this.bounds.width;\r\n    this.textWithConnector = this.text + ctxt.syllableConnector;\r\n\r\n    this.widthWithConnector = this.bounds.width + ctxt.hyphenWidth;\r\n\r\n    var activeLanguage = ctxt.defaultLanguage;\r\n\r\n    // calculate the point where the text lines up to the staff notation\r\n    // and offset the rect that much\r\n    var offset = 0;\r\n\r\n    if (this.lyricType !== LyricType.Directive) {\r\n\r\n      // Non-directive elements are lined up to the chant notation based on vowel segments.\r\n      // First we determine the vowel segment of the text, then we calculate the center point\r\n      // of that vowel segment.\r\n      var result = activeLanguage.findVowelSegment(this.text, 0);\r\n      if (result.found === true) {\r\n\r\n        // svgTextMeasurer still has the current lyric in it...\r\n        \r\n\r\n        var x1 = ctxt.svgTextMeasurer.firstChild.getSubStringLength(0, result.startIndex);\r\n        var x2 = ctxt.svgTextMeasurer.firstChild.getSubStringLength(0, result.startIndex + result.length);\r\n\r\n        offset = x1 + (x2 - x1) / 2;\r\n      } else {\r\n        // no vowels found according the text's language. for now we just center the text\r\n        offset = this.widthWithoutConnector / 2;\r\n      }\r\n\r\n    } else {\r\n      // directives are always centered on the chant notation\r\n      offset = this.widthWithoutConnector / 2;\r\n    }\r\n\r\n    this.bounds.x = -offset;\r\n    this.bounds.y = 0;\r\n\r\n    this.origin.x = offset;\r\n\r\n    this.bounds.width = this.widthWithoutConnector;\r\n    this.bounds.height = ctxt.lyricTextSize;\r\n  }\r\n\r\n  getCssClasses() {\r\n\r\n    var classes = \"lyric \";\r\n\r\n    if (this.lyricType === LyricType.Directive)\r\n      classes += \"directive \";\r\n\r\n    return classes + super.getCssClasses();\r\n  }\r\n\r\n  getExtraStyleProperties(ctxt) {\r\n    var props = super.getExtraStyleProperties();\r\n\r\n    if (this.lyricType === LyricType.Directive && ctxt.autoColor === true)\r\n      props += \"fill:#f00;\";\r\n\r\n    return props;\r\n  }\r\n\r\n  createDrawable(ctxt) {\r\n    if (this.spans.length > 0) {\r\n      if (this.needsConnector)\r\n        this.spans[this.spans.length - 1].text = this.lastSpanTextWithConnector;\r\n      else\r\n        this.spans[this.spans.length - 1].text = this.lastSpanText;\r\n    }\r\n\r\n    return super.createDrawable(ctxt);\r\n  }\r\n}\r\n\r\nexport class DropCap extends TextElement {\r\n\r\n  /**\r\n   * @param {String} text\r\n   */\r\n  constructor(ctxt, text) {\r\n    super(ctxt, text, ctxt.dropCapTextFont, ctxt.dropCapTextSize, 'middle');\r\n\r\n    this.padding = ctxt.staffInterval * 2;\r\n  }\r\n\r\n  getCssClasses() {\r\n    return \"dropCap \" + super.getCssClasses();\r\n  }\r\n}\r\n\r\nexport class Annotation extends TextElement {\r\n\r\n  /**\r\n   * @param {String} text\r\n   */\r\n  constructor(ctxt, text) {\r\n    super(ctxt, text, ctxt.annotationTextFont, ctxt.annotationTextSize, 'middle');\r\n    this.padding = ctxt.staffInterval;\r\n    this.dominantBaseline = 'hanging'; // so that annotations can be aligned at the top.\r\n  }\r\n\r\n  getCssClasses() {\r\n    return \"annotation \" + super.getCssClasses();\r\n  }\r\n}\r\n\r\n\r\n\r\nexport class ChantNotationElement extends ChantLayoutElement {\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    //double\r\n    this.leadingSpace = 0.0;\r\n    this.trailingSpace = -1; // if less than zero, this is automatically calculated at layout time\r\n    this.keepWithNext = false;\r\n\r\n    this.lyric = null;\r\n\r\n    this.score = null; // the ChantScore\r\n    this.line = null; // the ChantLine\r\n\r\n    this.visualizers = [];\r\n  }\r\n\r\n  hasLyric() {\r\n    if (this.lyric !== null)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  getLyricLeft() {\r\n    return this.bounds.x + this.lyric.bounds.x;\r\n  }\r\n\r\n  getLyricRight() {\r\n    return this.bounds.x + this.lyric.bounds.x + this.lyric.bounds.width;\r\n  }\r\n\r\n  // used by subclasses while building up the chant notations.\r\n  addVisualizer(chantLayoutElement) {\r\n    if (this.bounds.isEmpty())\r\n      this.bounds = chantLayoutElement.bounds.clone();\r\n    else\r\n      this.bounds.union(chantLayoutElement.bounds);\r\n\r\n    this.visualizers.push(chantLayoutElement);\r\n  }\r\n\r\n  // same as addVisualizer, except the element is unshifted to the front\r\n  // of the visualizer array rather than the end. This way, some\r\n  // visualizers can be placed behind the others...ledge lines for example.\r\n  prependVisualizer(chantLayoutElement) {\r\n    if (this.bounds.isEmpty())\r\n      this.bounds = chantLayoutElement.bounds.clone();\r\n    else\r\n      this.bounds.union(chantLayoutElement.bounds);\r\n\r\n    this.visualizers.unshift(chantLayoutElement);\r\n  }\r\n\r\n  // chant notation elements are given an opportunity to perform their layout via this function.\r\n  // subclasses should call this function first in overrides of this function.\r\n  // on completion, exsurge presumes that the bounds, the origin, and the drawable objects are\r\n  // all valid and prepared for higher level layout.\r\n  performLayout(ctxt) {\r\n\r\n    if (this.trailingSpace < 0)\r\n      this.trailingSpace = ctxt.intraNeumeSpacing * 4;\r\n\r\n    // reset the bounds and the staff notations before doing a layout\r\n    this.visualizers = [];\r\n    this.bounds = new Rect(Infinity, Infinity, -Infinity, -Infinity);\r\n\r\n    if (this.hasLyric())\r\n      this.lyric.recalculateMetrics(ctxt);\r\n  }\r\n\r\n  // a helper function for subclasses to call after they are done performing layout...\r\n  finishLayout(ctxt) {\r\n    //this.origin.x -= -this.bounds.x;\r\n    this.bounds.x = 0;\r\n\r\n    // add the lyric and line it up\r\n    if (this.hasLyric())\r\n      this.lyric.bounds.x = this.origin.x - this.lyric.origin.x;\r\n  }\r\n\r\n  createDrawable(ctxt) {\r\n    var inner = \"\";\r\n\r\n    for (var i = 0; i < this.visualizers.length; i++)\r\n      inner += this.visualizers[i].createDrawable(ctxt);\r\n\r\n    if (this.lyric)\r\n      inner += this.lyric.createDrawable(ctxt);\r\n\r\n    return QuickSvg.createFragment('g', {\r\n      'class': 'ChantNotationElement ' + this.constructor.name,\r\n      'transform': 'translate(' + this.bounds.x + ',' + 0 + ')'\r\n    }, inner);\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Drawing.js\n **/","module.exports = \"data:font/opentype;base64,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eHN1cmdlIENoYXJhY3RlcnM6VmVyc2lvbiAxLjAwVmVyc2lvbiAxLjAwIEZlYnJ1YXJ5IDE4LCAyMDE2LCBpbml0aWFsIHJlbGVhc2VFeHN1cmdlQ2hhcmFjdGVyc1RoaXMgRm9udCBTb2Z0d2FyZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgU0lMIE9wZW4gRm9udCBMaWNlbnNlLCBWZXJzaW9uIDEuMS4gVGhpcyBsaWNlbnNlIGlzIGNvcGllZCBiZWxvdywgYW5kIGlzIGFsc28gYXZhaWxhYmxlIHdpdGggYSBGQVEgYXQ6IGh0dHA6Ly9zY3JpcHRzLnNpbC5vcmcvT0ZMDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClNJTCBPUEVOIEZPTlQgTElDRU5TRSBWZXJzaW9uIDEuMSAtIDI2IEZlYnJ1YXJ5IDIwMDcNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNClBSRUFNQkxFDQpUaGUgZ29hbHMgb2YgdGhlIE9wZW4gRm9udCBMaWNlbnNlIChPRkwpIGFyZSB0byBzdGltdWxhdGUgd29ybGR3aWRlIGRldmVsb3BtZW50IG9mIGNvbGxhYm9yYXRpdmUgZm9udCBwcm9qZWN0cywgdG8gc3VwcG9ydCB0aGUgZm9udCBjcmVhdGlvbiBlZmZvcnRzIG9mIGFjYWRlbWljIGFuZCBsaW5ndWlzdGljIGNvbW11bml0aWVzLCBhbmQgdG8gcHJvdmlkZSBhIGZyZWUgYW5kIG9wZW4gZnJhbWV3b3JrIGluIHdoaWNoIGZvbnRzIG1heSBiZSBzaGFyZWQgYW5kIGltcHJvdmVkIGluIHBhcnRuZXJzaGlwIHdpdGggb3RoZXJzLg0KDQpUaGUgT0ZMIGFsbG93cyB0aGUgbGljZW5zZWQgZm9udHMgdG8gYmUgdXNlZCwgc3R1ZGllZCwgbW9kaWZpZWQgYW5kIHJlZGlzdHJpYnV0ZWQgZnJlZWx5IGFzIGxvbmcgYXMgdGhleSBhcmUgbm90IHNvbGQgYnkgdGhlbXNlbHZlcy4gVGhlIGZvbnRzLCBpbmNsdWRpbmcgYW55IGRlcml2YXRpdmUgd29ya3MsIGNhbiBiZSBidW5kbGVkLCBlbWJlZGRlZCwgcmVkaXN0cmlidXRlZCBhbmQvb3Igc29sZCB3aXRoIGFueSBzb2Z0d2FyZSBwcm92aWRlZCB0aGF0IGFueSByZXNlcnZlZCBuYW1lcyBhcmUgbm90IHVzZWQgYnkgZGVyaXZhdGl2ZSB3b3Jrcy4gVGhlIGZvbnRzIGFuZCBkZXJpdmF0aXZlcywgaG93ZXZlciwgY2Fubm90IGJlIHJlbGVhc2VkIHVuZGVyIGFueSBvdGhlciB0eXBlIG9mIGxpY2Vuc2UuIFRoZSByZXF1aXJlbWVudCBmb3IgZm9udHMgdG8gcmVtYWluIHVuZGVyIHRoaXMgbGljZW5zZSBkb2VzIG5vdCBhcHBseSB0byBhbnkgZG9jdW1lbnQgY3JlYXRlZCB1c2luZyB0aGUgZm9udHMgb3IgdGhlaXIgZGVyaXZhdGl2ZXMuDQoNCkRFRklOSVRJT05TDQoiRm9udCBTb2Z0d2FyZSIgcmVmZXJzIHRvIHRoZSBzZXQgb2YgZmlsZXMgcmVsZWFzZWQgYnkgdGhlIENvcHlyaWdodCBIb2xkZXIocykgdW5kZXIgdGhpcyBsaWNlbnNlIGFuZCBjbGVhcmx5IG1hcmtlZCBhcyBzdWNoLiBUaGlzIG1heSBpbmNsdWRlIHNvdXJjZSBmaWxlcywgYnVpbGQgc2NyaXB0cyBhbmQgZG9jdW1lbnRhdGlvbi4NCg0KIlJlc2VydmVkIEZvbnQgTmFtZSIgcmVmZXJzIHRvIGFueSBuYW1lcyBzcGVjaWZpZWQgYXMgc3VjaCBhZnRlciB0aGUgY29weXJpZ2h0IHN0YXRlbWVudChzKS4NCg0KIk9yaWdpbmFsIFZlcnNpb24iIHJlZmVycyB0byB0aGUgY29sbGVjdGlvbiBvZiBGb250IFNvZnR3YXJlIGNvbXBvbmVudHMgYXMgZGlzdHJpYnV0ZWQgYnkgdGhlIENvcHlyaWdodCBIb2xkZXIocykuDQoNCiJNb2RpZmllZCBWZXJzaW9uIiByZWZlcnMgdG8gYW55IGRlcml2YXRpdmUgbWFkZSBieSBhZGRpbmcgdG8sIGRlbGV0aW5nLCBvciBzdWJzdGl0dXRpbmcgLS0gaW4gcGFydCBvciBpbiB3aG9sZSAtLSBhbnkgb2YgdGhlIGNvbXBvbmVudHMgb2YgdGhlIE9yaWdpbmFsIFZlcnNpb24sIGJ5IGNoYW5naW5nIGZvcm1hdHMgb3IgYnkgcG9ydGluZyB0aGUgRm9udCBTb2Z0d2FyZSB0byBhIG5ldyBlbnZpcm9ubWVudC4NCg0KIkF1dGhvciIgcmVmZXJzIHRvIGFueSBkZXNpZ25lciwgZW5naW5lZXIsIHByb2dyYW1tZXIsIHRlY2huaWNhbCB3cml0ZXIgb3Igb3RoZXIgcGVyc29uIHdobyBjb250cmlidXRlZCB0byB0aGUgRm9udCBTb2Z0d2FyZS4NCg0KUEVSTUlTU0lPTiAmIENPTkRJVElPTlMNClBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhlIEZvbnQgU29mdHdhcmUsIHRvIHVzZSwgc3R1ZHksIGNvcHksIG1lcmdlLCBlbWJlZCwgbW9kaWZ5LCByZWRpc3RyaWJ1dGUsIGFuZCBzZWxsIG1vZGlmaWVkIGFuZCB1bm1vZGlmaWVkIGNvcGllcyBvZiB0aGUgRm9udCBTb2Z0d2FyZSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6DQoNCjEpIE5laXRoZXIgdGhlIEZvbnQgU29mdHdhcmUgbm9yIGFueSBvZiBpdHMgaW5kaXZpZHVhbCBjb21wb25lbnRzLCBpbiBPcmlnaW5hbCBvciBNb2RpZmllZCBWZXJzaW9ucywgbWF5IGJlIHNvbGQgYnkgaXRzZWxmLg0KDQoyKSBPcmlnaW5hbCBvciBNb2RpZmllZCBWZXJzaW9ucyBvZiB0aGUgRm9udCBTb2Z0d2FyZSBtYXkgYmUgYnVuZGxlZCwgcmVkaXN0cmlidXRlZCBhbmQvb3Igc29sZCB3aXRoIGFueSBzb2Z0d2FyZSwgcHJvdmlkZWQgdGhhdCBlYWNoIGNvcHkgY29udGFpbnMgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgbGljZW5zZS4gVGhlc2UgY2FuIGJlIGluY2x1ZGVkIGVpdGhlciBhcyBzdGFuZC1hbG9uZSB0ZXh0IGZpbGVzLCBodW1hbi1yZWFkYWJsZSBoZWFkZXJzIG9yIGluIHRoZSBhcHByb3ByaWF0ZSBtYWNoaW5lLXJlYWRhYmxlIG1ldGFkYXRhIGZpZWxkcyB3aXRoaW4gdGV4dCBvciBiaW5hcnkgZmlsZXMgYXMgbG9uZyBhcyB0aG9zZSBmaWVsZHMgY2FuIGJlIGVhc2lseSB2aWV3ZWQgYnkgdGhlIHVzZXIuDQoNCjMpIE5vIE1vZGlmaWVkIFZlcnNpb24gb2YgdGhlIEZvbnQgU29mdHdhcmUgbWF5IHVzZSB0aGUgUmVzZXJ2ZWQgRm9udCBOYW1lKHMpIHVubGVzcyBleHBsaWNpdCB3cml0dGVuIHBlcm1pc3Npb24gaXMgZ3JhbnRlZCBieSB0aGUgY29ycmVzcG9uZGluZyBDb3B5cmlnaHQgSG9sZGVyLiBUaGlzIHJlc3RyaWN0aW9uIG9ubHkgYXBwbGllcyB0byB0aGUgcHJpbWFyeSBmb250IG5hbWUgYXMgcHJlc2VudGVkIHRvIHRoZSB1c2Vycy4NCg0KNCkgVGhlIG5hbWUocykgb2YgdGhlIENvcHlyaWdodCBIb2xkZXIocykgb3IgdGhlIEF1dGhvcihzKSBvZiB0aGUgRm9udCBTb2Z0d2FyZSBzaGFsbCBub3QgYmUgdXNlZCB0byBwcm9tb3RlLCBlbmRvcnNlIG9yIGFkdmVydGlzZSBhbnkgTW9kaWZpZWQgVmVyc2lvbiwgZXhjZXB0IHRvIGFja25vd2xlZGdlIHRoZSBjb250cmlidXRpb24ocykgb2YgdGhlIENvcHlyaWdodCBIb2xkZXIocykgYW5kIHRoZSBBdXRob3Iocykgb3Igd2l0aCB0aGVpciBleHBsaWNpdCB3cml0dGVuIHBlcm1pc3Npb24uDQoNCjUpIFRoZSBGb250IFNvZnR3YXJlLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkLCBpbiBwYXJ0IG9yIGluIHdob2xlLCBtdXN0IGJlIGRpc3RyaWJ1dGVkIGVudGlyZWx5IHVuZGVyIHRoaXMgbGljZW5zZSwgYW5kIG11c3Qgbm90IGJlIGRpc3RyaWJ1dGVkIHVuZGVyIGFueSBvdGhlciBsaWNlbnNlLiBUaGUgcmVxdWlyZW1lbnQgZm9yIGZvbnRzIHRvIHJlbWFpbiB1bmRlciB0aGlzIGxpY2Vuc2UgZG9lcyBub3QgYXBwbHkgdG8gYW55IGRvY3VtZW50IGNyZWF0ZWQgdXNpbmcgdGhlIEZvbnQgU29mdHdhcmUuDQoNClRFUk1JTkFUSU9ODQpUaGlzIGxpY2Vuc2UgYmVjb21lcyBudWxsIGFuZCB2b2lkIGlmIGFueSBvZiB0aGUgYWJvdmUgY29uZGl0aW9ucyBhcmUgbm90IG1ldC4NCg0KRElTQ0xBSU1FUg0KVEhFIEZPTlQgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIEFOWSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVCBPRiBDT1BZUklHSFQsIFBBVEVOVCwgVFJBREVNQVJLLCBPUiBPVEhFUiBSSUdIVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBJTkNMVURJTkcgQU5ZIEdFTkVSQUwsIFNQRUNJQUwsIElORElSRUNULCBJTkNJREVOVEFMLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgVEhFIFVTRSBPUiBJTkFCSUxJVFkgVE8gVVNFIFRIRSBGT05UIFNPRlRXQVJFIE9SIEZST00gT1RIRVIgREVBTElOR1MgSU4gVEhFIEZPTlQgU09GVFdBUkUuAEMAbwBwAHkAcgBpAGcAaAB0ACAAKABjACkAIAAyADAAMQA2ACAARgByAC4AIABNAGEAdAB0AGgAZQB3ACAAUwBwAGUAbgBjAGUAcgAsACAATwAuAFMALgBKAC4AUgBlAGcAdQBsAGEAcgBFAHgAcwB1AHIAZwBlACAAQwBoAGEAcgBhAGMAdABlAHIAcwA6AFYAZQByAHMAaQBvAG4AIAAxAC4AMAAwAFYAZQByAHMAaQBvAG4AIAAxAC4AMAAwACAARgBlAGIAcgB1AGEAcgB5ACAAMQA4ACwAIAAyADAAMQA2ACwAIABpAG4AaQB0AGkAYQBsACAAcgBlAGwAZQBhAHMAZQBFAHgAcwB1AHIAZwBlAEMAaABhAHIAYQBjAHQAZQByAHMAVABoAGkAcwAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIABpAHMAIABsAGkAYwBlAG4AcwBlAGQAIAB1AG4AZABlAHIAIAB0AGgAZQAgAFMASQBMACAATwBwAGUAbgAgAEYAbwBuAHQAIABMAGkAYwBlAG4AcwBlACwAIABWAGUAcgBzAGkAbwBuACAAMQAuADEALgAgAFQAaABpAHMAIABsAGkAYwBlAG4AcwBlACAAaQBzACAAYwBvAHAAaQBlAGQAIABiAGUAbABvAHcALAAgAGEAbgBkACAAaQBzACAAYQBsAHMAbwAgAGEAdgBhAGkAbABhAGIAbABlACAAdwBpAHQAaAAgAGEAIABGAEEAUQAgAGEAdAA6ACAAaAB0AHQAcAA6AC8ALwBzAGMAcgBpAHAAdABzAC4AcwBpAGwALgBvAHIAZwAvAE8ARgBMAA0ACgANAAoADQAKAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQANAAoAUwBJAEwAIABPAFAARQBOACAARgBPAE4AVAAgAEwASQBDAEUATgBTAEUAIABWAGUAcgBzAGkAbwBuACAAMQAuADEAIAAtACAAMgA2ACAARgBlAGIAcgB1AGEAcgB5ACAAMgAwADAANwANAAoALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAC0ALQAtAA0ACgANAAoAUABSAEUAQQBNAEIATABFAA0ACgBUAGgAZQAgAGcAbwBhAGwAcwAgAG8AZgAgAHQAaABlACAATwBwAGUAbgAgAEYAbwBuAHQAIABMAGkAYwBlAG4AcwBlACAAKABPAEYATAApACAAYQByAGUAIAB0AG8AIABzAHQAaQBtAHUAbABhAHQAZQAgAHcAbwByAGwAZAB3AGkAZABlACAAZABlAHYAZQBsAG8AcABtAGUAbgB0ACAAbwBmACAAYwBvAGwAbABhAGIAbwByAGEAdABpAHYAZQAgAGYAbwBuAHQAIABwAHIAbwBqAGUAYwB0AHMALAAgAHQAbwAgAHMAdQBwAHAAbwByAHQAIAB0AGgAZQAgAGYAbwBuAHQAIABjAHIAZQBhAHQAaQBvAG4AIABlAGYAZgBvAHIAdABzACAAbwBmACAAYQBjAGEAZABlAG0AaQBjACAAYQBuAGQAIABsAGkAbgBnAHUAaQBzAHQAaQBjACAAYwBvAG0AbQB1AG4AaQB0AGkAZQBzACwAIABhAG4AZAAgAHQAbwAgAHAAcgBvAHYAaQBkAGUAIABhACAAZgByAGUAZQAgAGEAbgBkACAAbwBwAGUAbgAgAGYAcgBhAG0AZQB3AG8AcgBrACAAaQBuACAAdwBoAGkAYwBoACAAZgBvAG4AdABzACAAbQBhAHkAIABiAGUAIABzAGgAYQByAGUAZAAgAGEAbgBkACAAaQBtAHAAcgBvAHYAZQBkACAAaQBuACAAcABhAHIAdABuAGUAcgBzAGgAaQBwACAAdwBpAHQAaAAgAG8AdABoAGUAcgBzAC4ADQAKAA0ACgBUAGgAZQAgAE8ARgBMACAAYQBsAGwAbwB3AHMAIAB0AGgAZQAgAGwAaQBjAGUAbgBzAGUAZAAgAGYAbwBuAHQAcwAgAHQAbwAgAGIAZQAgAHUAcwBlAGQALAAgAHMAdAB1AGQAaQBlAGQALAAgAG0AbwBkAGkAZgBpAGUAZAAgAGEAbgBkACAAcgBlAGQAaQBzAHQAcgBpAGIAdQB0AGUAZAAgAGYAcgBlAGUAbAB5ACAAYQBzACAAbABvAG4AZwAgAGEAcwAgAHQAaABlAHkAIABhAHIAZQAgAG4AbwB0ACAAcwBvAGwAZAAgAGIAeQAgAHQAaABlAG0AcwBlAGwAdgBlAHMALgAgAFQAaABlACAAZgBvAG4AdABzACwAIABpAG4AYwBsAHUAZABpAG4AZwAgAGEAbgB5ACAAZABlAHIAaQB2AGEAdABpAHYAZQAgAHcAbwByAGsAcwAsACAAYwBhAG4AIABiAGUAIABiAHUAbgBkAGwAZQBkACwAIABlAG0AYgBlAGQAZABlAGQALAAgAHIAZQBkAGkAcwB0AHIAaQBiAHUAdABlAGQAIABhAG4AZAAvAG8AcgAgAHMAbwBsAGQAIAB3AGkAdABoACAAYQBuAHkAIABzAG8AZgB0AHcAYQByAGUAIABwAHIAbwB2AGkAZABlAGQAIAB0AGgAYQB0ACAAYQBuAHkAIAByAGUAcwBlAHIAdgBlAGQAIABuAGEAbQBlAHMAIABhAHIAZQAgAG4AbwB0ACAAdQBzAGUAZAAgAGIAeQAgAGQAZQByAGkAdgBhAHQAaQB2AGUAIAB3AG8AcgBrAHMALgAgAFQAaABlACAAZgBvAG4AdABzACAAYQBuAGQAIABkAGUAcgBpAHYAYQB0AGkAdgBlAHMALAAgAGgAbwB3AGUAdgBlAHIALAAgAGMAYQBuAG4AbwB0ACAAYgBlACAAcgBlAGwAZQBhAHMAZQBkACAAdQBuAGQAZQByACAAYQBuAHkAIABvAHQAaABlAHIAIAB0AHkAcABlACAAbwBmACAAbABpAGMAZQBuAHMAZQAuACAAVABoAGUAIAByAGUAcQB1AGkAcgBlAG0AZQBuAHQAIABmAG8AcgAgAGYAbwBuAHQAcwAgAHQAbwAgAHIAZQBtAGEAaQBuACAAdQBuAGQAZQByACAAdABoAGkAcwAgAGwAaQBjAGUAbgBzAGUAIABkAG8AZQBzACAAbgBvAHQAIABhAHAAcABsAHkAIAB0AG8AIABhAG4AeQAgAGQAbwBjAHUAbQBlAG4AdAAgAGMAcgBlAGEAdABlAGQAIAB1AHMAaQBuAGcAIAB0AGgAZQAgAGYAbwBuAHQAcwAgAG8AcgAgAHQAaABlAGkAcgAgAGQAZQByAGkAdgBhAHQAaQB2AGUAcwAuAA0ACgANAAoARABFAEYASQBOAEkAVABJAE8ATgBTAA0ACgAiAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIgAgAHIAZQBmAGUAcgBzACAAdABvACAAdABoAGUAIABzAGUAdAAgAG8AZgAgAGYAaQBsAGUAcwAgAHIAZQBsAGUAYQBzAGUAZAAgAGIAeQAgAHQAaABlACAAQwBvAHAAeQByAGkAZwBoAHQAIABIAG8AbABkAGUAcgAoAHMAKQAgAHUAbgBkAGUAcgAgAHQAaABpAHMAIABsAGkAYwBlAG4AcwBlACAAYQBuAGQAIABjAGwAZQBhAHIAbAB5ACAAbQBhAHIAawBlAGQAIABhAHMAIABzAHUAYwBoAC4AIABUAGgAaQBzACAAbQBhAHkAIABpAG4AYwBsAHUAZABlACAAcwBvAHUAcgBjAGUAIABmAGkAbABlAHMALAAgAGIAdQBpAGwAZAAgAHMAYwByAGkAcAB0AHMAIABhAG4AZAAgAGQAbwBjAHUAbQBlAG4AdABhAHQAaQBvAG4ALgANAAoADQAKACIAUgBlAHMAZQByAHYAZQBkACAARgBvAG4AdAAgAE4AYQBtAGUAIgAgAHIAZQBmAGUAcgBzACAAdABvACAAYQBuAHkAIABuAGEAbQBlAHMAIABzAHAAZQBjAGkAZgBpAGUAZAAgAGEAcwAgAHMAdQBjAGgAIABhAGYAdABlAHIAIAB0AGgAZQAgAGMAbwBwAHkAcgBpAGcAaAB0ACAAcwB0AGEAdABlAG0AZQBuAHQAKABzACkALgANAAoADQAKACIATwByAGkAZwBpAG4AYQBsACAAVgBlAHIAcwBpAG8AbgAiACAAcgBlAGYAZQByAHMAIAB0AG8AIAB0AGgAZQAgAGMAbwBsAGwAZQBjAHQAaQBvAG4AIABvAGYAIABGAG8AbgB0ACAAUwBvAGYAdAB3AGEAcgBlACAAYwBvAG0AcABvAG4AZQBuAHQAcwAgAGEAcwAgAGQAaQBzAHQAcgBpAGIAdQB0AGUAZAAgAGIAeQAgAHQAaABlACAAQwBvAHAAeQByAGkAZwBoAHQAIABIAG8AbABkAGUAcgAoAHMAKQAuAA0ACgANAAoAIgBNAG8AZABpAGYAaQBlAGQAIABWAGUAcgBzAGkAbwBuACIAIAByAGUAZgBlAHIAcwAgAHQAbwAgAGEAbgB5ACAAZABlAHIAaQB2AGEAdABpAHYAZQAgAG0AYQBkAGUAIABiAHkAIABhAGQAZABpAG4AZwAgAHQAbwAsACAAZABlAGwAZQB0AGkAbgBnACwAIABvAHIAIABzAHUAYgBzAHQAaQB0AHUAdABpAG4AZwAgAC0ALQAgAGkAbgAgAHAAYQByAHQAIABvAHIAIABpAG4AIAB3AGgAbwBsAGUAIAAtAC0AIABhAG4AeQAgAG8AZgAgAHQAaABlACAAYwBvAG0AcABvAG4AZQBuAHQAcwAgAG8AZgAgAHQAaABlACAATwByAGkAZwBpAG4AYQBsACAAVgBlAHIAcwBpAG8AbgAsACAAYgB5ACAAYwBoAGEAbgBnAGkAbgBnACAAZgBvAHIAbQBhAHQAcwAgAG8AcgAgAGIAeQAgAHAAbwByAHQAaQBuAGcAIAB0AGgAZQAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIAB0AG8AIABhACAAbgBlAHcAIABlAG4AdgBpAHIAbwBuAG0AZQBuAHQALgANAAoADQAKACIAQQB1AHQAaABvAHIAIgAgAHIAZQBmAGUAcgBzACAAdABvACAAYQBuAHkAIABkAGUAcwBpAGcAbgBlAHIALAAgAGUAbgBnAGkAbgBlAGUAcgAsACAAcAByAG8AZwByAGEAbQBtAGUAcgAsACAAdABlAGMAaABuAGkAYwBhAGwAIAB3AHIAaQB0AGUAcgAgAG8AcgAgAG8AdABoAGUAcgAgAHAAZQByAHMAbwBuACAAdwBoAG8AIABjAG8AbgB0AHIAaQBiAHUAdABlAGQAIAB0AG8AIAB0AGgAZQAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUALgANAAoADQAKAFAARQBSAE0ASQBTAFMASQBPAE4AIAAmACAAQwBPAE4ARABJAFQASQBPAE4AUwANAAoAUABlAHIAbQBpAHMAcwBpAG8AbgAgAGkAcwAgAGgAZQByAGUAYgB5ACAAZwByAGEAbgB0AGUAZAAsACAAZgByAGUAZQAgAG8AZgAgAGMAaABhAHIAZwBlACwAIAB0AG8AIABhAG4AeQAgAHAAZQByAHMAbwBuACAAbwBiAHQAYQBpAG4AaQBuAGcAIABhACAAYwBvAHAAeQAgAG8AZgAgAHQAaABlACAARgBvAG4AdAAgAFMAbwBmAHQAdwBhAHIAZQAsACAAdABvACAAdQBzAGUALAAgAHMAdAB1AGQAeQAsACAAYwBvAHAAeQAsACAAbQBlAHIAZwBlACwAIABlAG0AYgBlAGQALAAgAG0AbwBkAGkAZgB5ACwAIAByAGUAZABpAHMAdAByAGkAYgB1AHQAZQAsACAAYQBuAGQAIABzAGUAbABsACAAbQBvAGQAaQBmAGkAZQBkACAAYQBuAGQAIAB1AG4AbQBvAGQAaQBmAGkAZQBkACAAYwBvAHAAaQBlAHMAIABvAGYAIAB0AGgAZQAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUALAAgAHMAdQBiAGoAZQBjAHQAIAB0AG8AIAB0AGgAZQAgAGYAbwBsAGwAbwB3AGkAbgBnACAAYwBvAG4AZABpAHQAaQBvAG4AcwA6AA0ACgANAAoAMQApACAATgBlAGkAdABoAGUAcgAgAHQAaABlACAARgBvAG4AdAAgAFMAbwBmAHQAdwBhAHIAZQAgAG4AbwByACAAYQBuAHkAIABvAGYAIABpAHQAcwAgAGkAbgBkAGkAdgBpAGQAdQBhAGwAIABjAG8AbQBwAG8AbgBlAG4AdABzACwAIABpAG4AIABPAHIAaQBnAGkAbgBhAGwAIABvAHIAIABNAG8AZABpAGYAaQBlAGQAIABWAGUAcgBzAGkAbwBuAHMALAAgAG0AYQB5ACAAYgBlACAAcwBvAGwAZAAgAGIAeQAgAGkAdABzAGUAbABmAC4ADQAKAA0ACgAyACkAIABPAHIAaQBnAGkAbgBhAGwAIABvAHIAIABNAG8AZABpAGYAaQBlAGQAIABWAGUAcgBzAGkAbwBuAHMAIABvAGYAIAB0AGgAZQAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIABtAGEAeQAgAGIAZQAgAGIAdQBuAGQAbABlAGQALAAgAHIAZQBkAGkAcwB0AHIAaQBiAHUAdABlAGQAIABhAG4AZAAvAG8AcgAgAHMAbwBsAGQAIAB3AGkAdABoACAAYQBuAHkAIABzAG8AZgB0AHcAYQByAGUALAAgAHAAcgBvAHYAaQBkAGUAZAAgAHQAaABhAHQAIABlAGEAYwBoACAAYwBvAHAAeQAgAGMAbwBuAHQAYQBpAG4AcwAgAHQAaABlACAAYQBiAG8AdgBlACAAYwBvAHAAeQByAGkAZwBoAHQAIABuAG8AdABpAGMAZQAgAGEAbgBkACAAdABoAGkAcwAgAGwAaQBjAGUAbgBzAGUALgAgAFQAaABlAHMAZQAgAGMAYQBuACAAYgBlACAAaQBuAGMAbAB1AGQAZQBkACAAZQBpAHQAaABlAHIAIABhAHMAIABzAHQAYQBuAGQALQBhAGwAbwBuAGUAIAB0AGUAeAB0ACAAZgBpAGwAZQBzACwAIABoAHUAbQBhAG4ALQByAGUAYQBkAGEAYgBsAGUAIABoAGUAYQBkAGUAcgBzACAAbwByACAAaQBuACAAdABoAGUAIABhAHAAcAByAG8AcAByAGkAYQB0AGUAIABtAGEAYwBoAGkAbgBlAC0AcgBlAGEAZABhAGIAbABlACAAbQBlAHQAYQBkAGEAdABhACAAZgBpAGUAbABkAHMAIAB3AGkAdABoAGkAbgAgAHQAZQB4AHQAIABvAHIAIABiAGkAbgBhAHIAeQAgAGYAaQBsAGUAcwAgAGEAcwAgAGwAbwBuAGcAIABhAHMAIAB0AGgAbwBzAGUAIABmAGkAZQBsAGQAcwAgAGMAYQBuACAAYgBlACAAZQBhAHMAaQBsAHkAIAB2AGkAZQB3AGUAZAAgAGIAeQAgAHQAaABlACAAdQBzAGUAcgAuAA0ACgANAAoAMwApACAATgBvACAATQBvAGQAaQBmAGkAZQBkACAAVgBlAHIAcwBpAG8AbgAgAG8AZgAgAHQAaABlACAARgBvAG4AdAAgAFMAbwBmAHQAdwBhAHIAZQAgAG0AYQB5ACAAdQBzAGUAIAB0AGgAZQAgAFIAZQBzAGUAcgB2AGUAZAAgAEYAbwBuAHQAIABOAGEAbQBlACgAcwApACAAdQBuAGwAZQBzAHMAIABlAHgAcABsAGkAYwBpAHQAIAB3AHIAaQB0AHQAZQBuACAAcABlAHIAbQBpAHMAcwBpAG8AbgAgAGkAcwAgAGcAcgBhAG4AdABlAGQAIABiAHkAIAB0AGgAZQAgAGMAbwByAHIAZQBzAHAAbwBuAGQAaQBuAGcAIABDAG8AcAB5AHIAaQBnAGgAdAAgAEgAbwBsAGQAZQByAC4AIABUAGgAaQBzACAAcgBlAHMAdAByAGkAYwB0AGkAbwBuACAAbwBuAGwAeQAgAGEAcABwAGwAaQBlAHMAIAB0AG8AIAB0AGgAZQAgAHAAcgBpAG0AYQByAHkAIABmAG8AbgB0ACAAbgBhAG0AZQAgAGEAcwAgAHAAcgBlAHMAZQBuAHQAZQBkACAAdABvACAAdABoAGUAIAB1AHMAZQByAHMALgANAAoADQAKADQAKQAgAFQAaABlACAAbgBhAG0AZQAoAHMAKQAgAG8AZgAgAHQAaABlACAAQwBvAHAAeQByAGkAZwBoAHQAIABIAG8AbABkAGUAcgAoAHMAKQAgAG8AcgAgAHQAaABlACAAQQB1AHQAaABvAHIAKABzACkAIABvAGYAIAB0AGgAZQAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIABzAGgAYQBsAGwAIABuAG8AdAAgAGIAZQAgAHUAcwBlAGQAIAB0AG8AIABwAHIAbwBtAG8AdABlACwAIABlAG4AZABvAHIAcwBlACAAbwByACAAYQBkAHYAZQByAHQAaQBzAGUAIABhAG4AeQAgAE0AbwBkAGkAZgBpAGUAZAAgAFYAZQByAHMAaQBvAG4ALAAgAGUAeABjAGUAcAB0ACAAdABvACAAYQBjAGsAbgBvAHcAbABlAGQAZwBlACAAdABoAGUAIABjAG8AbgB0AHIAaQBiAHUAdABpAG8AbgAoAHMAKQAgAG8AZgAgAHQAaABlACAAQwBvAHAAeQByAGkAZwBoAHQAIABIAG8AbABkAGUAcgAoAHMAKQAgAGEAbgBkACAAdABoAGUAIABBAHUAdABoAG8AcgAoAHMAKQAgAG8AcgAgAHcAaQB0AGgAIAB0AGgAZQBpAHIAIABlAHgAcABsAGkAYwBpAHQAIAB3AHIAaQB0AHQAZQBuACAAcABlAHIAbQBpAHMAcwBpAG8AbgAuAA0ACgANAAoANQApACAAVABoAGUAIABGAG8AbgB0ACAAUwBvAGYAdAB3AGEAcgBlACwAIABtAG8AZABpAGYAaQBlAGQAIABvAHIAIAB1AG4AbQBvAGQAaQBmAGkAZQBkACwAIABpAG4AIABwAGEAcgB0ACAAbwByACAAaQBuACAAdwBoAG8AbABlACwAIABtAHUAcwB0ACAAYgBlACAAZABpAHMAdAByAGkAYgB1AHQAZQBkACAAZQBuAHQAaQByAGUAbAB5ACAAdQBuAGQAZQByACAAdABoAGkAcwAgAGwAaQBjAGUAbgBzAGUALAAgAGEAbgBkACAAbQB1AHMAdAAgAG4AbwB0ACAAYgBlACAAZABpAHMAdAByAGkAYgB1AHQAZQBkACAAdQBuAGQAZQByACAAYQBuAHkAIABvAHQAaABlAHIAIABsAGkAYwBlAG4AcwBlAC4AIABUAGgAZQAgAHIAZQBxAHUAaQByAGUAbQBlAG4AdAAgAGYAbwByACAAZgBvAG4AdABzACAAdABvACAAcgBlAG0AYQBpAG4AIAB1AG4AZABlAHIAIAB0AGgAaQBzACAAbABpAGMAZQBuAHMAZQAgAGQAbwBlAHMAIABuAG8AdAAgAGEAcABwAGwAeQAgAHQAbwAgAGEAbgB5ACAAZABvAGMAdQBtAGUAbgB0ACAAYwByAGUAYQB0AGUAZAAgAHUAcwBpAG4AZwAgAHQAaABlACAARgBvAG4AdAAgAFMAbwBmAHQAdwBhAHIAZQAuAA0ACgANAAoAVABFAFIATQBJAE4AQQBUAEkATwBOAA0ACgBUAGgAaQBzACAAbABpAGMAZQBuAHMAZQAgAGIAZQBjAG8AbQBlAHMAIABuAHUAbABsACAAYQBuAGQAIAB2AG8AaQBkACAAaQBmACAAYQBuAHkAIABvAGYAIAB0AGgAZQAgAGEAYgBvAHYAZQAgAGMAbwBuAGQAaQB0AGkAbwBuAHMAIABhAHIAZQAgAG4AbwB0ACAAbQBlAHQALgANAAoADQAKAEQASQBTAEMATABBAEkATQBFAFIADQAKAFQASABFACAARgBPAE4AVAAgAFMATwBGAFQAVwBBAFIARQAgAEkAUwAgAFAAUgBPAFYASQBEAEUARAAgACIAQQBTACAASQBTACIALAAgAFcASQBUAEgATwBVAFQAIABXAEEAUgBSAEEATgBUAFkAIABPAEYAIABBAE4AWQAgAEsASQBOAEQALAAgAEUAWABQAFIARQBTAFMAIABPAFIAIABJAE0AUABMAEkARQBEACwAIABJAE4AQwBMAFUARABJAE4ARwAgAEIAVQBUACAATgBPAFQAIABMAEkATQBJAFQARQBEACAAVABPACAAQQBOAFkAIABXAEEAUgBSAEEATgBUAEkARQBTACAATwBGACAATQBFAFIAQwBIAEEATgBUAEEAQgBJAEwASQBUAFkALAAgAEYASQBUAE4ARQBTAFMAIABGAE8AUgAgAEEAIABQAEEAUgBUAEkAQwBVAEwAQQBSACAAUABVAFIAUABPAFMARQAgAEEATgBEACAATgBPAE4ASQBOAEYAUgBJAE4ARwBFAE0ARQBOAFQAIABPAEYAIABDAE8AUABZAFIASQBHAEgAVAAsACAAUABBAFQARQBOAFQALAAgAFQAUgBBAEQARQBNAEEAUgBLACwAIABPAFIAIABPAFQASABFAFIAIABSAEkARwBIAFQALgAgAEkATgAgAE4ATwAgAEUAVgBFAE4AVAAgAFMASABBAEwATAAgAFQASABFACAAQwBPAFAAWQBSAEkARwBIAFQAIABIAE8ATABEAEUAUgAgAEIARQAgAEwASQBBAEIATABFACAARgBPAFIAIABBAE4AWQAgAEMATABBAEkATQAsACAARABBAE0AQQBHAEUAUwAgAE8AUgAgAE8AVABIAEUAUgAgAEwASQBBAEIASQBMAEkAVABZACwAIABJAE4AQwBMAFUARABJAE4ARwAgAEEATgBZACAARwBFAE4ARQBSAEEATAAsACAAUwBQAEUAQwBJAEEATAAsACAASQBOAEQASQBSAEUAQwBUACwAIABJAE4AQwBJAEQARQBOAFQAQQBMACwAIABPAFIAIABDAE8ATgBTAEUAUQBVAEUATgBUAEkAQQBMACAARABBAE0AQQBHAEUAUwAsACAAVwBIAEUAVABIAEUAUgAgAEkATgAgAEEATgAgAEEAQwBUAEkATwBOACAATwBGACAAQwBPAE4AVABSAEEAQwBUACwAIABUAE8AUgBUACAATwBSACAATwBUAEgARQBSAFcASQBTAEUALAAgAEEAUgBJAFMASQBOAEcAIABGAFIATwBNACwAIABPAFUAVAAgAE8ARgAgAFQASABFACAAVQBTAEUAIABPAFIAIABJAE4AQQBCAEkATABJAFQAWQAgAFQATwAgAFUAUwBFACAAVABIAEUAIABGAE8ATgBUACAAUwBPAEYAVABXAEEAUgBFACAATwBSACAARgBSAE8ATQAgAE8AVABIAEUAUgAgAEQARQBBAEwASQBOAEcAUwAgAEkATgAgAFQASABFACAARgBPAE4AVAAgAFMATwBGAFQAVwBBAFIARQAuAAAAAgAAAAAAAP8GAGQAAAAAAAAAAAAAAAAAAAAAAAAAAABfAAMABAAFAAYABwAIAAkACgALAAwADQAOAA8AEAARABIAEwAUABUAFgAXABgAGQAaABsAHAAdAB4AHwAgACEAIgAjACQAJQAmACcAKAApACoAKwAsAC0ALgAvADAAMQAyADMANAA1ADYANwA4ADkAOgA7ADwAPQA+AD8AQABBAEIAQwBEAEUARgBHAEgASQBKAEsATABNAE4ATwBQAFEAUgBTAFQAVQBWAFcAWABZAFoAWwBcAF0AXgBfAGAAYQAAAAMACAACABAAAf//AAIAAAABAAAAAAABAAAADgAAAAAAAAAAAAIAAQAAAF4AAQABAAAACgBKAGQAAmN5cmwADmxhdG4AGAAEAAAAAP//AAAAEAACSVBBIAAaVklUIAAiAAD//wACAAEAAAAA//8AAQABAAD//wAAAAJrZXJuAA5tYXJrABQAAAABAAEAAAABAAAAAgAGAA4ABAAEAAEAEAACAAAAAQAsAAEADAAQAAAAIAAiAAIAAAABAAYAIQAyADYAQQBSAFYAAAAGAAEAjgAEAAAABgAWADAASgBkAHIAgAAGAA7/nAAhADYAQQA2ADIADQA2//IAUgAXAAYADv+cACEAWABBAFgAMgChADYAvQBSAE8ABgAO/nAAIf6TAEH+kwAy//kANgAOAFL/YQADAA7/nABSABcAVv/VAAMADv+cAFIANgBWAEwAAwAO/nAAUgAJAFYAGQABAAYAIQAyADYAQQBSAFYAAQAAAAoATgBoAAJjeXJsAA5sYXRuABoABAAAAAD//wABAAAAEAACSVBBIAAaVklUIAAiAAD//wACAAAAAQAA//8AAQAAAAD//wABAAAAAmFhbHQADnNtY3AAFAAAAAEAAAAAAAEAAAABAAQAAwAAAAEACAABABgAAwAMABAAFAABAEEAAQBSAAEAVgABAAMAIQAyADYAAA==\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/url-loader?limit=30000!./assets/fonts/ExsurgeChar.otf\n ** module id = 5\n ** module chunks = 0\n **/","//\r\n// Author(s):\r\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\r\n//\r\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n//\r\n\r\nimport * as Exsurge from './Exsurge.Core'\r\nimport { Step, Pitch, Rect, Point, Margins } from './Exsurge.Core'\r\nimport { ctxt, QuickSvg, ChantLayoutElement, ChantNotationElement, GlyphCode, GlyphVisualizer, Lyric, Annotation, DropCap } from './Exsurge.Drawing'\r\nimport { Glyphs } from './Exsurge.Glyphs'\r\nimport { Custod, AccidentalType } from './Exsurge.Chant.Signs'\r\nimport { Gabc } from './Exsurge.Gabc'\r\n\r\n\r\nexport var LiquescentType = {\r\n  None: 0,\r\n  LargeAscending: 1,\r\n  LargeDescending: 2,\r\n  SmallAscending: 3,\r\n  SmallDescending: 4,\r\n  InitioDebilis: 5\r\n};\r\n\r\nexport var NoteShape = {\r\n  Default: 0,\r\n\r\n  Inclinatum: 1,\r\n  Virga: 2,\r\n  Quilisma: 3,\r\n  Cavum: 4,\r\n  OriscusAscending: 5,\r\n  OriscusDescending: 6,\r\n\r\n  Stropha: 7,\r\n\r\n  AscLiquescent: 8,\r\n  DesLiquescent: 9\r\n};\r\n\r\n/**\r\n * @class\r\n */\r\nexport class Note extends ChantLayoutElement {\r\n\r\n  /**\r\n   * @para {Pitch} pitch\r\n   */\r\n  constructor(pitch) {\r\n    super();\r\n\r\n    if (typeof pitch !== 'undefined')\r\n      this.pitch = pitch;\r\n    else\r\n      this.pitch = null;\r\n\r\n    this.glyphVisualizer = null;\r\n\r\n    // The staffPosition on a note is an integer that indicates the vertical position on the staff.\r\n    // 0 is the center space on the staff (equivalent to gabc 'g'). Positive numbers go up\r\n    // the staff, and negative numbers go down, i.e., 1 is gabc 'h', 2 is gabc 'i', -1 is gabc 'f', etc.\r\n    this.staffPosition = 0;\r\n    this.liquescent = LiquescentType.None;\r\n    this.shape = NoteShape.Default;\r\n    this.markings = [];\r\n  }\r\n\r\n  setGlyphShape(ctxt, glyphCode) {\r\n    if (this.glyphVisualizer)\r\n      this.glyphVisualizer.setGlyphShape(ctxt, glyphCode);\r\n    else\r\n      this.glyphVisualizer = new GlyphVisualizer(ctxt, glyphCode);\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n\r\n    if (this.glyphVisualizer === null) {\r\n      console.log(\"Tried to perform layout on a note with no glyphCode assigned!\");\r\n    }\r\n\r\n    this.glyphVisualizer.setStaffPosition(ctxt, this.staffPosition);\r\n\r\n    // assign glyphvisualizer metrics to this note\r\n    this.bounds.x = this.glyphVisualizer.bounds.x;\r\n    this.bounds.y = this.glyphVisualizer.bounds.y;\r\n    this.bounds.width = this.glyphVisualizer.bounds.width;\r\n    this.bounds.height = this.glyphVisualizer.bounds.height;\r\n\r\n    this.origin.x = this.glyphVisualizer.origin.x;\r\n    this.origin.y = this.glyphVisualizer.origin.y;\r\n  }\r\n\r\n  draw(ctxt) {\r\n\r\n    this.glyphVisualizer.bounds.x = this.bounds.x;\r\n    this.glyphVisualizer.bounds.y = this.bounds.y;\r\n\r\n    this.glyphVisualizer.draw(ctxt);\r\n  }\r\n\r\n  createDrawable(ctxt) {\r\n\r\n    this.glyphVisualizer.bounds.x = this.bounds.x;\r\n    this.glyphVisualizer.bounds.y = this.bounds.y;\r\n    return this.glyphVisualizer.createDrawable(ctxt);\r\n  }\r\n}\r\n\r\nexport class Clef extends ChantNotationElement {\r\n\r\n  constructor(staffPosition, octave, defaultAccidental = null) {\r\n    super();\r\n\r\n    this.isClef = true;\r\n    this.staffPosition = staffPosition;\r\n    this.octave = octave;\r\n    this.defaultAccidental = defaultAccidental;\r\n    this.activeAccidental = defaultAccidental;\r\n  }\r\n\r\n  resetAccidentals() {\r\n    this.activeAccidental = this.defaultAccidental;\r\n  }\r\n\r\n  pitchToStaffPosition(pitch) {\r\n\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n    ctxt.activeClef = this;\r\n\r\n    if (this.defaultAccidental)\r\n      this.defaultAccidental.performLayout(ctxt);\r\n\r\n    super.performLayout(ctxt);\r\n  }\r\n\r\n  finishLayout(ctxt) {\r\n\r\n    // if we have a default accidental, then add a glyph for it now\r\n    if (this.defaultAccidental) {\r\n      var accidentalGlyph = this.defaultAccidental.createGlyphVisualizer(ctxt);\r\n      accidentalGlyph.bounds.x += this.visualizers[0].bounds.right() + ctxt.intraNeumeSpacing;\r\n      this.addVisualizer(accidentalGlyph);\r\n    }\r\n\r\n    super.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\nexport class DoClef extends Clef {\r\n\r\n  constructor(staffPosition, octave, defaultAccidental = null) {\r\n    super(staffPosition, octave, defaultAccidental);\r\n\r\n    this.leadingSpace = 0.0;\r\n  }\r\n\r\n  pitchToStaffPosition(pitch) {\r\n    return (pitch.octave - this.octave) * 7 + this.staffPosition +\r\n            Pitch.stepToStaffOffset(pitch.step) -\r\n            Pitch.stepToStaffOffset(Step.Do);\r\n  }\r\n\r\n  staffPositionToPitch(staffPosition) {\r\n    var offset = staffPosition - this.staffPosition;\r\n    var octaveOffset = Math.floor(offset / 7);\r\n\r\n    var step = Pitch.staffOffsetToStep(offset);\r\n\r\n    if (this.defaultAccidental !== null && step === this.defaultAccidental.step)\r\n      step += this.defaultAccidental.accidentalType;\r\n\r\n    return new Pitch(step, this.octave + octaveOffset);\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var glyph = new GlyphVisualizer(ctxt, GlyphCode.DoClef);\r\n    glyph.setStaffPosition(ctxt, this.staffPosition);\r\n    this.addVisualizer(glyph);\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n\r\n  clone() {\r\n    return new DoClef(this.staffPosition, this.octave, this.defaultAccidental);\r\n  }\r\n}\r\n\r\n\r\nexport class FaClef extends Clef {\r\n\r\n  constructor(staffPosition, octave, defaultAccidental = null) {\r\n    super(staffPosition, octave, defaultAccidental);\r\n\r\n    this.octave = octave;\r\n\r\n    this.leadingSpace = 0;\r\n  }\r\n\r\n  pitchToStaffPosition(pitch) {\r\n    return (pitch.octave - this.octave) * 7 + this.staffPosition +\r\n            Pitch.stepToStaffOffset(pitch.step) -\r\n            Pitch.stepToStaffOffset(Step.Fa);\r\n  }\r\n\r\n  staffPositionToPitch(staffPosition) {\r\n    var offset = staffPosition - this.staffPosition + 3; // + 3 because it's a fa clef (3 == offset from Do)\r\n    var octaveOffset = Math.floor(offset / 7);\r\n\r\n    var step = Pitch.staffOffsetToStep(offset);\r\n\r\n    if (step === Step.Ti && this.defaultAccidental === AccidentalType.Flat)\r\n      step = Step.Te;\r\n\r\n    return new Pitch(step, this.octave + octaveOffset);\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var glyph = new GlyphVisualizer(ctxt, GlyphCode.FaClef);\r\n    glyph.setStaffPosition(ctxt, this.staffPosition);\r\n    this.addVisualizer(glyph);\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n\r\n  clone() {\r\n    return new FaClef(this.staffPosition, this.octave, this.defaultAccidental);\r\n  }\r\n}\r\n\r\nexport class ChantLineBreak extends ChantNotationElement {\r\n\r\n  constructor(justify) {\r\n    super();\r\n\r\n    this.justify = justify;\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n\r\n    // reset the bounds before doing a layout\r\n    this.bounds = new Rect(0, 0, 0, 0);\r\n  }\r\n\r\n  clone() {\r\n    var lb = new ChantLineBreak();\r\n    lb.justify = this.justify;\r\n\r\n    return lb;\r\n  }\r\n}\r\n\r\n\r\n// a chant line represents one staff line on the page. ChantLines are created by the score\r\n// and laid out by the page\r\nexport class ChantLine extends ChantLayoutElement {\r\n\r\n  constructor(score) {\r\n    super();\r\n\r\n    this.score = score;\r\n\r\n    this.scoreNotationStart = 0;\r\n    this.scoreNotationCount = 0;\r\n    this.notations = [];\r\n    this.notationBounds = null; // Rect\r\n\r\n    this.lyricBounds = null; // Rect\r\n\r\n    this.staffLeft = 0;\r\n    this.staffRight = 0;\r\n\r\n    this.custod = null;\r\n\r\n    this.justify = true;\r\n\r\n    this.ledgerLines = [];\r\n\r\n    this.startingClef = null; // necessary for the layout process\r\n\r\n    this.nextLine = null;\r\n    this.previousLine = null; // for layout assistance\r\n\r\n    // fixme: make these configurable values from the score\r\n    this.spaceAfterNotations = 30; // the space between the notation bounds and the first text track\r\n    this.spaceBetweenTextTracks = 20; // spacing between each text track\r\n  }\r\n\r\n  setStartingClef(clef) {\r\n    this.startingClef = clef.clone();\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n\r\n    // start off with a rectangle that holds at least the four staff lines\r\n    // we fudge the 3 to 3.1 so that the svg doesn't crop off the upper/lower staff lines...\r\n    this.notationBounds = new Rect(this.staffLeft, -3.1 * ctxt.staffInterval,\r\n      this.staffRight - this.staffLeft, 6.2 * ctxt.staffInterval);\r\n\r\n    // run through all the elements of the line and calculate the bounds of the notations,\r\n    // as well as the bounds of each text track we will use\r\n    var i;\r\n    var notation = null;\r\n\r\n    for (i = 0; i < this.notations.length; i++)\r\n      this.notationBounds.union(this.notations[i].bounds);\r\n\r\n    this.lyricVerticalOffset = this.notationBounds.y + this.notationBounds.height + ctxt.lyricTextSize;\r\n\r\n    // finalize the lyrics placement\r\n    for (i = 0; i < this.notations.length; i++) {\r\n      notation = this.notations[i];\r\n\r\n      if (!notation.hasLyric())\r\n        continue;\r\n\r\n      notation.lyric.bounds.y = this.lyricVerticalOffset;\r\n    }\r\n\r\n    // dropCap and the annotations\r\n    if (this.scoreNotationStart === 0) {\r\n\r\n      if (this.score.dropCap !== null) {\r\n\r\n        // drop caps and annotations are drawn from their center, so aligning them\r\n        // horizontally is as easy as this.staffLeft / 2\r\n        this.score.dropCap.bounds.x = this.staffLeft / 2;\r\n        this.score.dropCap.bounds.y = this.lyricVerticalOffset;\r\n      }\r\n\r\n      if (this.score.annotation !== null) {\r\n        // annotations use dominant-baseline to align text to the top\r\n        this.score.annotation.bounds.x += this.staffLeft / 2;\r\n        this.score.annotation.bounds.y +=  - ctxt.staffInterval * 3;\r\n      }\r\n    }\r\n\r\n    this.notationBounds.height += ctxt.lyricTextSize;\r\n\r\n    this.bounds.x = 0;\r\n    this.bounds.y = this.notationBounds.y;\r\n    this.bounds.width = this.notationBounds.right();\r\n    this.bounds.height = this.notationBounds.height;\r\n\r\n    // the origin of the chant line's coordinate space is at the center line of the left extremity of the staff\r\n    this.origin = new Point(this.staffLeft, -this.notationBounds.y);\r\n  }\r\n\r\n  createDrawable(ctxt) {\r\n    var inner = \"\";\r\n\r\n    // add the chant lines\r\n    var i, x1 = this.staffLeft, x2 = this.staffRight;\r\n\r\n    // create the staff lines\r\n    for (i = -3; i <= 3; i += 2) {\r\n\r\n      inner += QuickSvg.createFragment('line', {\r\n        'x1': x1,\r\n        'y1': ctxt.staffInterval * i,\r\n        'x2': x2,\r\n        'y2': ctxt.staffInterval * i,\r\n        'stroke': ctxt.staffLineColor,\r\n        'stroke-width': ctxt.staffLineWeight,\r\n        'class': 'staffLine'\r\n      });\r\n    }\r\n\r\n    // create the ledger lines\r\n    for (i = 0; i < this.ledgerLines.length; i++) {\r\n\r\n      var ledgerLine = this.ledgerLines[i];\r\n      var y = ctxt.calculateHeightFromStaffPosition(ledgerLine.staffPosition);\r\n\r\n      inner += QuickSvg.createFragment('line', {\r\n        'x1': ledgerLine.x1,\r\n        'y1': y,\r\n        'x2': ledgerLine.x2,\r\n        'y2': y,\r\n        'stroke': ctxt.staffLineColor,\r\n        'stroke-width': ctxt.staffLineWeight,\r\n        'class': 'ledgerLine'\r\n      });\r\n    }\r\n\r\n    // dropCap and the annotations\r\n    if (this.scoreNotationStart === 0) {\r\n\r\n      if (this.score.dropCap !== null)\r\n        inner += this.score.dropCap.createDrawable(ctxt);\r\n\r\n      if (this.score.annotation !== null)\r\n          inner += this.score.annotation.createDrawable(ctxt);\r\n    }\r\n\r\n    // add all of the notations\r\n    for (i = 0; i < this.notations.length; i++)\r\n      inner += this.notations[i].createDrawable(ctxt);\r\n\r\n    return QuickSvg.createFragment('g', {\r\n      'class': 'chantLine',\r\n      'transform': 'translate(' + this.bounds.x + ',' + this.bounds.y + ')'\r\n    }, inner);\r\n  }\r\n\r\n\r\n  buildFromChantNotationIndex(ctxt, newElementStart, width) {\r\n\r\n    // todo: reset / clear the children we have in case they have data\r\n    this.scoreNotationStart = newElementStart;\r\n    this.scoreNotationCount = 0;\r\n    this.notations = [];\r\n\r\n    this.staffLeft = 0;\r\n\r\n    if (width > 0)\r\n      this.staffRight = this.staffLeft + width;\r\n    else\r\n      this.staffRight = 99999999; // no limit to staff size\r\n\r\n    // If this is the first chant line, then we have to make room for a\r\n    // drop cap and/or annotation, if present\r\n    if (this.scoreNotationStart === 0) {\r\n\r\n      var padding = 0;\r\n\r\n      if (this.score.dropCap !== null)\r\n        padding = this.score.dropCap.bounds.width + this.score.dropCap.padding * 2;\r\n\r\n      if (this.score.annotation !== null)\r\n        padding = Math.max(padding, this.score.annotation.bounds.width + this.score.annotation.padding * 4);\r\n\r\n      this.staffLeft += padding;\r\n    }\r\n\r\n    // set up the clef...\r\n    // Also, add the clef as a child (which will also set the clef in the context)\r\n    this.setStartingClef(ctxt.activeClef);\r\n    this.startingClef.performLayout(ctxt);\r\n    this.startingClef.bounds.x = this.staffLeft;\r\n    this.notations.push(this.startingClef);\r\n\r\n    var current = this.startingClef, previous = null, previousWithLyric = null;\r\n\r\n    // todo: estimate how much space we have available to us\r\n    var rightBoundary = this.staffRight - Glyphs.CustodLong.bounds.width - ctxt.intraNeumeSpacing * 4; // possible custod on the line\r\n\r\n    // todo: iterate through the notations, fittng what we can on this line\r\n    var i, scoreNotations = this.score.notations;\r\n\r\n    for (i = newElementStart; i < scoreNotations.length; i++) {\r\n\r\n      if (current.hasLyric())\r\n        previousWithLyric = current;\r\n\r\n      previous = current;\r\n      current = scoreNotations[i];\r\n\r\n      // try to fit the current element on this line.\r\n      // if it doesn't fit, we finish up here.\r\n      var fitsOnLine = this.positionNotationElement(ctxt, previousWithLyric, previous, current, rightBoundary);\r\n      if (fitsOnLine === false) {\r\n\r\n        // check if the previous elements want to be kept with this one\r\n        for (var k = i - 1; k > this.scoreNotationStart; k--) {\r\n          var cne = this.score.notations[k];\r\n\r\n          if (cne.keepWithNext === true) {\r\n            this.notations.pop(); // remove it from our notations\r\n            this.scoreNotationCount--;\r\n          } else\r\n            break;\r\n        }\r\n\r\n        // we are at the end of the line!\r\n        break;\r\n      }\r\n\r\n      current.chantLine = this;\r\n      this.notations.push(current);\r\n      this.scoreNotationCount++;\r\n\r\n      // line breaks are a special case indicating to stop processing here\r\n      if (current.constructor.name === 'ChantLineBreak' && width > 0) {\r\n        this.justify = current.justify;\r\n        break;\r\n      }\r\n    }\r\n\r\n    var last, extraSpace = 0;\r\n\r\n    if (this.notations.length > 0) {\r\n      last = this.notations[this.notations.length - 1];\r\n\r\n      if (last.hasLyric() && last.getLyricRight() > (last.bounds.right() + last.trailingSpace))\r\n        extraSpace = this.staffRight - last.getLyricRight();\r\n      else\r\n        extraSpace = this.staffRight - (last.bounds.right() + last.trailingSpace);\r\n    }\r\n\r\n    // create the custod at the end of the line (if we need it!)\r\n    // if we find an element following this one that is a neume, we create a custod for it\r\n    for (i = this.scoreNotationStart + this.scoreNotationCount; i < this.score.notations.length; i++) {\r\n      var notation = this.score.notations[i];\r\n\r\n      if ('notes' in notation && notation.notes.length > 0) {\r\n\r\n        var custod = new Custod();\r\n        custod.referringNeume = notation;\r\n\r\n        custod.performLayout(ctxt);\r\n\r\n        if (this.notations.length > 0) {\r\n          last = this.notations[this.notations.length - 1];\r\n          custod.bounds.x = last.bounds.x + last.bounds.width;\r\n        }\r\n\r\n        this.custod = custod;\r\n        this.notations.push(custod);\r\n\r\n        extraSpace -= custod.bounds.width + custod.leadingSpace;\r\n\r\n        // nothing more to see here...\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (width <= 0 && this.notations.length > 0) {\r\n      // set the staff width based on the notations.\r\n      this.staffRight = this.notations[this.notations.length - 1].bounds.right();\r\n    }\r\n\r\n    // Justify the line if we are not the last one\r\n    if (this.justify === true && width > 0 &&\r\n        this.scoreNotationStart + this.scoreNotationCount < this.score.notations.length &&\r\n        extraSpace > 0)\r\n      this.justifyElements(extraSpace);\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n\r\n  justifyElements(extraSpace) {\r\n\r\n    var indices = [];\r\n\r\n    var i, prev = null, curr = null, prevWithLyrics = null;\r\n\r\n    // if we have a custod, place it at the end of the line\r\n    if (this.custod !== null) \r\n      this.custod.bounds.x = this.staffRight - this.custod.bounds.width - this.custod.leadingSpace;\r\n\r\n    // first pass: determine the neumes we can space apart\r\n    // start at 1 to skip the clef\r\n    for (i = 1; i < this.notations.length - 1; i++) {\r\n\r\n      if (curr !== null && curr.hasLyric())\r\n        prevWithLyrics = curr;\r\n\r\n      prev = curr;\r\n      curr = this.notations[i];\r\n\r\n      if (prev !== null && prev.keepWithNext === true)\r\n        continue;\r\n\r\n      if (prevWithLyrics !== null && prevWithLyrics.lyric.allowsConnector() && !prevWithLyrics.lyric.needsConnector)\r\n        continue;\r\n\r\n      if (curr.constructor.name === 'ChantLineBreak')\r\n        continue;\r\n\r\n      // otherwise, we can add space before this element\r\n      indices.push(i);\r\n    }\r\n\r\n    if (indices.length === 0)\r\n      return;\r\n\r\n    var offset = 0;\r\n    var increment = extraSpace / indices.length;\r\n    var lastIndex = (this.notations[this.notations.length - 1].constructor.name === 'Custod') ? this.notations.length - 1 : this.notations.length;\r\n    for (i = 1; i < lastIndex; i++) {\r\n\r\n      curr = this.notations[i];\r\n\r\n      if (indices.indexOf(i) >= 0) {\r\n        curr.bounds.x += offset + increment;\r\n        offset += increment;\r\n      } else\r\n        curr.bounds.x += offset;\r\n    }\r\n\r\n    offset = offset;\r\n  }\r\n\r\n  finishLayout(ctxt) {\r\n\r\n    this.ledgerLines = []; // clear any existing ledger lines\r\n\r\n    var epismata = []; // keep track of epismata in case we can connect some\r\n\r\n    // make a final pass over all of the notes to add any necessary\r\n    // ledger lines and to smooth out epismata\r\n    for (var i = 0; i < this.notations.length; i++) {\r\n\r\n      // if it's not a neume, then skip over it, right?\r\n      if (typeof this.notations[i].notes === 'undefined')\r\n        continue;\r\n\r\n      var neume = this.notations[i];\r\n\r\n      for (var j = 0; j < neume.notes.length; j++) {\r\n        var note = neume.notes[j];\r\n\r\n        // do we need a ledger line for this note?\r\n        var staffPosition = note.staffPosition;\r\n\r\n        if (staffPosition >= 5 || staffPosition <= -5) {\r\n\r\n          var x1 = neume.bounds.x + note.bounds.x - ctxt.staffInterval;\r\n          var x2 = neume.bounds.x + note.bounds.x + note.bounds.width + ctxt.staffInterval;\r\n\r\n          // round the staffPosition to the nearest line\r\n          if (staffPosition > 0)\r\n            staffPosition = staffPosition - (staffPosition - 1) % 2;\r\n          else\r\n            staffPosition = staffPosition - (staffPosition + 1) % 2;\r\n\r\n          // if we have a ledger line close by, then average out the distance between the two\r\n          var minLedgerSeperation = ctxt.staffInterval * 5;\r\n\r\n          if (this.ledgerLines.length > 0 &&\r\n              this.ledgerLines[this.ledgerLines.length - 1].x2 + minLedgerSeperation >= x1) {\r\n\r\n            // average out the distance\r\n            var half = (x1 - this.ledgerLines[this.ledgerLines.length - 1].x2) / 2;\r\n            this.ledgerLines[this.ledgerLines.length - 1].x2 += half;\r\n            x1 -= half;\r\n          }\r\n\r\n          // finally, add the ledger line\r\n          this.ledgerLines.push({\r\n            x1: x1,\r\n            x2: x2,\r\n            staffPosition: staffPosition\r\n          });\r\n        }\r\n\r\n        var noteHasEpisema = false;\r\n\r\n        // blend epismata as we're able\r\n        for (var k = 0; k < note.markings.length; k++) {\r\n\r\n          if (note.markings[k].constructor.name !== \"HorizontalEpisema\")\r\n            continue;\r\n\r\n          noteHasEpisema = true;\r\n          var episema = note.markings[k];\r\n\r\n          // we try to blend the episema if we're able.\r\n          if (epismata.length === 0 ||\r\n              epismata[0].episema.positionHint !== episema.positionHint ||\r\n              epismata[0].episema.terminating === true) {\r\n\r\n            // start a new set of epismata to potentially blend\r\n            epismata = [];\r\n            epismata.push({\r\n              episema: episema,\r\n              neume: neume\r\n            });\r\n          } else {\r\n            // blend all previous with this one\r\n            var newY;\r\n\r\n            if (episema.positionHint === Exsurge.MarkingPositionHint.Below)\r\n              newY = Math.max(episema.bounds.y, epismata[0].episema.bounds.y);\r\n            else\r\n              newY = Math.min(episema.bounds.y, epismata[0].episema.bounds.y);\r\n\r\n            if (episema.bounds.y !== newY)\r\n              episema.updateY(newY);\r\n            else {\r\n              for (var l = 0; l < epismata.length; l++)\r\n                epismata[l].episema.updateY(newY);\r\n            }\r\n\r\n            // extend the last episema to meet the new one\r\n            var newWidth = (neume.bounds.x + episema.bounds.x) - (epismata[epismata.length - 1].neume.bounds.x + epismata[epismata.length - 1].episema.bounds.x);\r\n            epismata[epismata.length - 1].episema.updateWidth(newWidth);\r\n\r\n            epismata.push({\r\n              episema: episema,\r\n              neume: neume\r\n            });\r\n          }\r\n        }\r\n\r\n        // if the note doesn't have any episema, then make sure and stop blending epismata\r\n        if (noteHasEpisema === false)\r\n          epismata = [];\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // this is where the real core of positioning neumes takes place\r\n  // returns true if positioning was able to fit the neume before rightBoundary.\r\n  // returns false if cannot fit before given right margin.\r\n  // fixme: if this returns false, shouldn't we set the connectors on prev to be activated?!\r\n  positionNotationElement(ctxt, prevWithLyric, prev, curr, rightBoundary) {\r\n\r\n    // To begin we just place the current notation right after the previous,\r\n    // irrespective of lyrics.\r\n    curr.bounds.x = prev.bounds.right() + prev.trailingSpace;\r\n\r\n    if (prevWithLyric === null) {\r\n\r\n      var maxRight = curr.bounds.right() + curr.trailingSpace;\r\n\r\n      // if the lyric left is negative, then offset the neume appropriately\r\n      if (curr.hasLyric()) {\r\n        curr.lyric.setNeedsConnector(false); // we hope for the best!\r\n\r\n        if (curr.getLyricLeft() < 0)\r\n          curr.bounds.x += -curr.getLyricLeft();\r\n\r\n        maxRight = Math.max(maxRight, curr.getLyricRight());\r\n      }\r\n\r\n      if (maxRight > rightBoundary)\r\n        return false;\r\n      else\r\n        return true;\r\n    }\r\n\r\n    if (curr.hasLyric() === false) {\r\n\r\n      if (prevWithLyric.lyric.allowsConnector())\r\n        prevWithLyric.lyric.setNeedsConnector(true);\r\n\r\n      if (curr.bounds.right() + curr.trailingSpace < rightBoundary)\r\n        return true;\r\n      else {\r\n        //curr.bounds.x = this.startingClef.bounds.right();\r\n        return false;\r\n      }\r\n    }\r\n\r\n    curr.lyric.setNeedsConnector(false); // we hope for the best!\r\n\r\n    var currLyricLeft = curr.getLyricLeft();\r\n    var prevLyricRight = prevWithLyric.getLyricRight();\r\n\r\n    if (prevWithLyric.lyric.allowsConnector() === false) {\r\n\r\n      // No connector needed, but include space between words if necessary!\r\n      if (prevLyricRight + ctxt.minLyricWordSpacing > currLyricLeft) {\r\n        // push the current element over a bit.\r\n        curr.bounds.x += prevLyricRight + ctxt.minLyricWordSpacing - currLyricLeft;\r\n      }\r\n\r\n    } else {\r\n\r\n      // we may need a connector yet...\r\n\r\n      if (prevLyricRight > currLyricLeft) {\r\n        // in this case, the lyric elements actually overlap.\r\n        // so nope, no connector needed. instead, we just place the lyrics together\r\n        // fixme: for better text layout, we could actually use the kerning values\r\n        // between the prev and curr lyric elements!\r\n        curr.bounds.x += prevLyricRight - currLyricLeft;\r\n\r\n      } else {\r\n\r\n        // bummer, looks like we couldn't merge the syllables together. Better add a connector...\r\n        prevWithLyric.lyric.setNeedsConnector(true);\r\n        prevLyricRight = prevWithLyric.getLyricRight();\r\n\r\n        if (prevLyricRight > currLyricLeft)\r\n          curr.bounds.x += prevLyricRight - currLyricLeft;\r\n      }\r\n    }\r\n\r\n    if (curr.bounds.right() + curr.trailingSpace < rightBoundary)\r\n      return true;\r\n\r\n    // if we made it this far, then the element won't fit on this line.\r\n    // set the position of the current element to the beginning of a chant line,\r\n    // and mark the previous lyric as connecting if needed.\r\n    // curr.bounds.x = this.startingClef.bounds.right();\r\n\r\n    if (prevWithLyric.lyric !== null && prevWithLyric.lyric.allowsConnector())\r\n      prevWithLyric.lyric.setNeedsConnector(true);\r\n\r\n    return false;\r\n  }\r\n}\r\n\r\n/*\r\n * Score, document\r\n */\r\nexport class ChantScore {\r\n\r\n  constructor() {\r\n\r\n    this.startingClef = null; // Clef\r\n\r\n    this.notations = [];\r\n    this.lines = [];\r\n    this.notes = [];\r\n\r\n    this.dropCap = null;\r\n    this.annotation = null;\r\n\r\n    this.compiled = false;\r\n\r\n    this.autoColoring = true;\r\n\r\n    // valid after chant lines are created...\r\n    this.bounds = new Rect();\r\n  }\r\n\r\n  performLayout(ctxt, finishedCallback) {\r\n\r\n    // first order of business: let the clef perform layout\r\n    this.startingClef.performLayout(ctxt);\r\n\r\n    if (this.dropCap)\r\n      this.dropCap.recalculateMetrics(ctxt);\r\n\r\n    if (this.annotation)\r\n      this.annotation.recalculateMetrics(ctxt);\r\n\r\n    if (this.compiled) {\r\n      setTimeout(() => {\r\n        if (finishedCallback)\r\n          finishedCallback();\r\n      }, 0);\r\n    } else {\r\n      // boot the compilation process\r\n      setTimeout(() => {\r\n        this.compileElement(ctxt, 0, finishedCallback);\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  compileElement(ctxt, index, finishedCallback) {\r\n\r\n    if (index >= this.notations.length) {\r\n\r\n      if (!this.compiled) {\r\n        this.compiled = true;\r\n        setTimeout(() => {\r\n          if (finishedCallback)\r\n            finishedCallback();\r\n        }, 0);\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    var timeout = new Date().getTime() + 50; // process for fifty milliseconds\r\n    do {\r\n      var notation = this.notations[index++];\r\n      notation.performLayout(ctxt);\r\n    } while (index < this.notations.length && timeout < new Date().getTime());\r\n\r\n    // schedule the next block of processing\r\n    setTimeout(() => {\r\n      this.compileElement(ctxt, index, finishedCallback);\r\n    }, 0);\r\n  }\r\n\r\n  layoutChantLines(ctxt, width, finishedCallback) {\r\n\r\n    this.lines = [];\r\n\r\n    var y = 0;\r\n    var currIndex = 0;\r\n\r\n    if (ctxt.activeClef === null)\r\n      ctxt.activeClef = this.startingClef;\r\n\r\n    do {\r\n\r\n      var line = new ChantLine(this);\r\n\r\n      line.buildFromChantNotationIndex(ctxt, currIndex, width);\r\n      currIndex += line.scoreNotationCount;\r\n      line.performLayout(ctxt);\r\n      this.lines.push(line);\r\n\r\n      line.bounds.y = -line.bounds.y + y;\r\n      y += line.bounds.height + ctxt.staffInterval * 3;\r\n\r\n    } while (currIndex < this.notations.length);\r\n\r\n    var lastLine = this.lines[this.lines.length - 1];\r\n\r\n    this.bounds.x = 0;\r\n    this.bounds.y = 0;\r\n    this.bounds.width = lastLine.bounds.width;\r\n    this.bounds.height = y;\r\n\r\n    if (finishedCallback)\r\n      finishedCallback(this);\r\n  }\r\n\r\n  createDrawable(ctxt) {\r\n\r\n    var i, drawable = \"\";\r\n\r\n    // create defs section\r\n    for (var def in ctxt.defs)\r\n      if (ctxt.defs.hasOwnProperty(def))\r\n        drawable += ctxt.defs[def];\r\n\r\n    drawable = QuickSvg.createFragment('defs', {}, drawable);\r\n\r\n    for (i = 0; i < this.lines.length; i++)\r\n      drawable += this.lines[i].createDrawable(ctxt);\r\n\r\n    drawable = QuickSvg.createFragment('g', {}, drawable);\r\n\r\n    drawable = QuickSvg.createFragment('svg', {\r\n      'xmlns': 'http://www.w3.org/2000/svg',\r\n      'version': '1.1',\r\n      'xmlns:xlink': 'http://www.w3.org/1999/xlink',\r\n      'class': 'ChantScore',\r\n      'width': this.bounds.width,\r\n      'height': this.bounds.height\r\n    }, drawable);\r\n\r\n    return drawable;\r\n  }\r\n\r\n  unserializeFromJson(data) {\r\n    this.autoColoring = data['auto-coloring'];\r\n\r\n    if (data.annotation !== null && data.annotation !== \"\") {\r\n      // create the annotation\r\n      this.annotation = new Annotation(ctxt, data.annotation);\r\n    } else\r\n      this.annotation = null;\r\n\r\n    var createDropCap = data['drop-cap'] === 'auto' ? true : false;\r\n\r\n    Gabc.parseChantNotations(data.notations, this, createDropCap);\r\n  }\r\n\r\n  serializeToJson() {\r\n    var data = {};\r\n\r\n    data['type'] = \"score\";\r\n    data['auto-coloring'] = true;\r\n\r\n    if (this.annotation !== null)\r\n      data.annotation = this.annotation.unsanitizedText;\r\n    else\r\n      data.annotation = \"\";\r\n\r\n    \r\n\r\n    return data;\r\n  }\r\n}\r\n\r\nexport class ChantDocument {\r\n  constructor() {\r\n\r\n    var defaults = {\r\n      layout: {\r\n        units: \"mm\",\r\n        'default-font': {\r\n          'font-family': \"Crimson\",\r\n          'font-size': 14\r\n        },\r\n        page: {\r\n          width: 8.5,\r\n          height: 11,\r\n          'margin-left': 0,\r\n          'margin-top': 0,\r\n          'margin-right': 0,\r\n          'margin-bottom': 0\r\n        }\r\n      },\r\n      scores: []\r\n    };\r\n\r\n    // default layout\r\n    this.copyLayout(this, defaults);\r\n\r\n    this.scores = defaults.scores;\r\n  }\r\n\r\n  copyLayout(to, from) {\r\n\r\n    to.layout = {\r\n      units: from.layout.units,\r\n      'default-font': {\r\n        'font-family': from.layout['default-font']['font-family'],\r\n        'font-size': from.layout['default-font']['font-size']\r\n      },\r\n      page: {\r\n        width: from.layout.page.width,\r\n        height: from.layout.page.height,\r\n        'margin-left': from.layout.page['margin-left'],\r\n        'margin-top': from.layout.page['margin-top'],\r\n        'margin-right': from.layout.page['margin-right'],\r\n        'margin-bottom': from.layout.page['margin-bottom']\r\n      }\r\n    };\r\n  }\r\n\r\n  unserializeFromJson(data) {\r\n\r\n    this.copyLayout(this, data);\r\n\r\n    this.scores = [];\r\n\r\n    // read in the scores\r\n    for (var i = 0; i < data.scores.length; i++) {\r\n      var score = new ChantScore();\r\n\r\n      score.unserializeFromJson(data.scores[i]);\r\n      this.scores.push(score);\r\n    }\r\n  }\r\n\r\n  serializeToJson() {\r\n    var data = {};\r\n\r\n    this.copyLayout(data, this);\r\n\r\n    data.scores = [];\r\n\r\n    // save scores...\r\n    for (var i = 0; i < this.scores.length; i++)\r\n      data.scores.push(this.scores[i].serializeToJson());\r\n\r\n    return data;\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Chant.js\n **/","//\r\n// Author(s):\r\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\r\n//\r\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n//\r\n\r\nimport * as Exsurge from 'Exsurge.Core'\r\nimport { ctxt, GlyphCode, GlyphVisualizer, DividerLineVisualizer, ChantNotationElement } from 'Exsurge.Drawing'\r\n\r\n/*\r\n *\r\n */\r\nexport class Custod extends ChantNotationElement {\r\n\r\n  constructor() {\r\n    super();\r\n    this.referringNeume = null;\r\n    this.note = null;\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var staffPosition = 0; // a default value just to make sure we don't fail rebuilding\r\n    var glyphCode;\r\n\r\n    if (this.referringNeume !== null) {\r\n      if (this.referringNeume.notes.length > 0)\r\n        staffPosition = this.referringNeume.notes[0].staffPosition;\r\n    } else if (note !== null)\r\n      staffPosition = this.note.staffPosition;\r\n\r\n    glyphCode = Custod.getGlyphCode(staffPosition);\r\n\r\n    var glyph = new GlyphVisualizer(ctxt, glyphCode);\r\n    glyph.setStaffPosition(ctxt, staffPosition);\r\n    this.addVisualizer(glyph);\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n\r\n  static getGlyphCode(staffPosition) {\r\n\r\n    if (staffPosition <= 2) {\r\n\r\n      // ascending custodes\r\n      if (Math.abs(staffPosition) % 2 === 1)\r\n        return GlyphCode.CustodLong;\r\n      else\r\n        return GlyphCode.CustodShort;\r\n    } else {\r\n\r\n      // descending custodes\r\n      if (Math.abs(staffPosition) % 2 === 1)\r\n        return GlyphCode.CustodDescLong;\r\n      else\r\n        return GlyphCode.CustodDescShort;\r\n    }\r\n  }\r\n}\r\n\r\n/*\r\n * DividingLine\r\n */\r\nexport class DividingLine extends ChantNotationElement {\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.resetsAccidentals = true;\r\n  }\r\n}\r\n\r\n/*\r\n * QuarterBar\r\n */\r\nexport class QuarterBar extends DividingLine {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n    this.addVisualizer(new DividerLineVisualizer(ctxt, 2, 4));\r\n\r\n    this.origin.x = this.bounds.width / 2;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * HalfBar\r\n */\r\nexport class HalfBar extends DividingLine {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    this.addVisualizer(new DividerLineVisualizer(ctxt, -2, 2));\r\n\r\n    this.origin.x = this.bounds.width / 2;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * FullBar\r\n */\r\nexport class FullBar extends DividingLine {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n    \r\n    this.addVisualizer(new DividerLineVisualizer(ctxt, -3, 3));\r\n\r\n    this.origin.x = this.bounds.width / 2;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * DoubleBar\r\n */\r\nexport class DoubleBar extends DividingLine {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var line0 = new DividerLineVisualizer(ctxt, -3, 3);\r\n    line0.bounds.x = 0;\r\n    this.addVisualizer(line0);\r\n\r\n    var line1 = new DividerLineVisualizer(ctxt, -3, 3);\r\n    line1.bounds.x = ctxt.intraNeumeSpacing * 2;\r\n    this.addVisualizer(line1);\r\n\r\n    this.origin.x = this.bounds.width / 2;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\nexport const AccidentalType = {\r\n  Flat: -1,\r\n  Natural: 0,\r\n  Sharp: 1\r\n};\r\n\r\n/*\r\n * Accidental\r\n */\r\nexport class Accidental extends ChantNotationElement {\r\n\r\n  constructor(staffPosition, accidentalType) {\r\n    super();\r\n    this.isAccidental = true;\r\n    this.keepWithNext = true; // accidentals should always stay connected...\r\n    \r\n    this.staffPosition = staffPosition;\r\n    this.accidentalType = accidentalType;\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    this.addVisualizer(this.createGlyphVisualizer(ctxt));\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n\r\n  // creation of the glyph visualizer is refactored out or performLayout\r\n  // so that clefs can use the same logic for their accidental glyph\r\n  createGlyphVisualizer(ctxt) {\r\n\r\n    var glyphCode = GlyphCode.Flat;\r\n\r\n    switch (this.accidentalType) {\r\n      case AccidentalType.Natural:\r\n        glyphCode = GlyphCode.Natural;\r\n        break;\r\n      case AccidentalType.Sharp:\r\n        glyphCode = GlyphCode.Sharp;\r\n        break;\r\n      default:\r\n        glyphCode = GlyphCode.Flat;\r\n        break;\r\n    }\r\n\r\n    var glyph = new GlyphVisualizer(ctxt, glyphCode);\r\n    glyph.setStaffPosition(ctxt, this.staffPosition);\r\n\r\n    return glyph;\r\n  }\r\n\r\n  adjustStep(step) {\r\n    switch (this.accidentalType) {\r\n      case AccidentalType.Flat:\r\n        if (step === Step.Ti) return Step.Te;\r\n        if (step === Step.Mi) return Step.Me;\r\n        break;\r\n      case AccidentalType.Sharp:\r\n        if (step === Step.Do) return Step.Du;\r\n        if (step === Step.Fa) return Step.Fu;\r\n        break;\r\n      case AccidentalType.Natural:\r\n        if (step === Step.Te) return Step.Ti;\r\n        if (step === Step.Me) return Step.Mi;\r\n        if (step === Step.Du) return Step.Do;\r\n        if (step === Step.Fu) return Step.Fa;\r\n        break;\r\n    }\r\n\r\n    // no adjustment needed\r\n    return step;\r\n  }\r\n\r\n  applyToPitch(pitch) {\r\n\r\n    // fixme: this is broken since we changed to staff positions\r\n\r\n    // no adjusment needed\r\n    if (this.octave !== pitch.octave)\r\n      return;\r\n\r\n    pitch.step = this.adjustStep(pitch.step);\r\n  }\r\n}\r\n\r\n/*\r\n * Virgula\r\n */\r\nexport class Virgula extends ChantNotationElement {\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    // fixme: the staff position of the virgula is customizable, so that it\r\n    // can be placed on different lines (top or bottom) depending on the\r\n    // notation tradition of what is being notated (e.g., Benedictine has it\r\n    //  on top line, Norbertine at the bottom)\r\n    this.staffPosition = 3;\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var glyph = new GlyphVisualizer(ctxt, GlyphCode.Virgula);\r\n    glyph.setStaffPosition(ctxt, this.staffPosition);\r\n\r\n    this.addVisualizer(glyph);\r\n\r\n    this.origin.x = this.bounds.width / 2;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Chant.Signs.js\n **/","//\r\n// Author(s):\r\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\r\n//\r\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n//\r\n\r\nimport { Units, Pitch, Point, Rect, Margins, Size, Step, MarkingPositionHint } from 'Exsurge.Core'\r\nimport { LyricType, Lyric, DropCap } from 'Exsurge.Drawing'\r\nimport { Note, LiquescentType, NoteShape, ChantScore, ChantDocument, Clef, DoClef, FaClef, ChantLineBreak } from 'Exsurge.Chant'\r\nimport * as Markings from 'Exsurge.Chant.Markings'\r\nimport * as Signs from 'Exsurge.Chant.Signs'\r\nimport * as Neumes from 'Exsurge.Chant.Neumes'\r\nimport { ctxt } from 'Exsurge.Drawing'\r\n\r\n\r\n\r\n// reusable reg exps\r\nvar __syllablesRegex = /(?=.)((?:[^(])*)(?:\\(?([^)]*)\\)?)?/g;\r\nvar __notationsRegex = /z0|z|Z|::|:|;|,|`|c1|c2|c3|c4|f3|f4|cb3|cb4|\\/\\/|\\/|\\!|-?[a-mA-M][owWvVrRsxy#~\\+><_\\.'012345]*/g;\r\n\r\nexport var Gabc = {\r\n\r\n  loadChantScore: function (ctxt, gabcNotations, createDropCap) {\r\n\r\n    var score = new ChantScore();\r\n\r\n    // fixme: no dropcap until the text engine is working again\r\n    this.parseChantNotations(ctxt, gabcNotations, score, createDropCap);\r\n\r\n    return score;\r\n  },\r\n\r\n  parseChantNotations: function (ctxt, gabcNotations, score, createDropCap) {\r\n\r\n    score.notations = [];\r\n\r\n    var passByRef = {\r\n      activeClef: null\r\n    };\r\n\r\n    // split the notations on whitespace boundaries\r\n    var words = gabcNotations.match(/\\S+/g);\r\n\r\n    for (var i = 0; i < words.length; i++) {\r\n      var word = words[i];\r\n\r\n      var currSyllable = 0;\r\n\r\n      if (word === '')\r\n        continue;\r\n\r\n      word = word.trim()\r\n\r\n      var matches = [];\r\n      \r\n      while ((match = __syllablesRegex.exec(word)))\r\n        matches.push(match);\r\n\r\n      for (var j = 0; j < matches.length; j++) {\r\n        var match = matches[j];\r\n\r\n        var lyricText = match[1].trim();\r\n        var notationData = match[2];\r\n\r\n        var items = this.createNotations(ctxt, score, notationData, passByRef);\r\n\r\n        if (items.length === 0)\r\n          continue;\r\n\r\n        // if we are to create a dropCap and we haven't done so yet, do it now\r\n        if (createDropCap && score.dropCap === null && lyricText !== \"\") {\r\n          score.dropCap = new DropCap(ctxt, lyricText.substring(0, 1));\r\n          lyricText = lyricText.substring(1);\r\n        }\r\n\r\n        // create lyric if we have it...\r\n        if (lyricText !== \"\") {\r\n\r\n          var lyricType;\r\n          if (currSyllable === 0 && matches.length === 1)\r\n            lyricType = LyricType.SingleSyllable;\r\n          else if (currSyllable === 0 && matches.length > 1)\r\n            lyricType = LyricType.BeginningSyllable;\r\n          else if (currSyllable === matches.length - 1)\r\n            lyricType = LyricType.EndingSyllable;\r\n          else\r\n            lyricType = LyricType.MiddleSyllable;\r\n\r\n          // add the lyrics to the first notation that makes sense...\r\n          var notationWithLyrics = null;\r\n          for (var k = 0; k < items.length; k++) {\r\n            var cne = items[k];\r\n            if (cne.constructor.name === \"Accidental\")\r\n              continue;\r\n\r\n            notationWithLyrics = cne;\r\n            break;\r\n          }\r\n\r\n          // if it's not a neume then make the lyric a directive\r\n          if (typeof notationWithLyrics.notes === 'undefined')\r\n            lyricType = LyricType.Directive;\r\n\r\n          var lyric = this.makeLyric(ctxt, lyricText, lyricType);\r\n\r\n          // also, new words reset the accidentals, per the Solesmes style (see LU xviij)\r\n          if (lyric.lyricType === LyricType.BeginningSyllable ||\r\n            lyric.lyricType === LyricType.SingleSyllable)\r\n            passByRef.activeClef.resetAccidentals();\r\n\r\n          notationWithLyrics.lyric = lyric;\r\n        }\r\n\r\n        score.notations = score.notations.concat(items);\r\n\r\n        currSyllable++;\r\n      }\r\n    }\r\n  },\r\n\r\n  makeLyric: function (ctxt, text, lyricType) {\r\n\r\n    if (text.length > 1 && text[text.length - 1] === '-') {\r\n      if (lyricType === LyricType.EndingSyllable)\r\n        lyricType = LyricType.MiddleSyllable;\r\n      else if (lyricType === LyricType.SingleSyllable)\r\n        lyricType = LyricType.BeginningSyllable;\r\n\r\n      text = text.substring(0, text.length - 1);\r\n    }\r\n\r\n    var elides = false;\r\n    if (text.length > 1 && text[text.length - 1] === '_') {\r\n      // must be an elision\r\n      elides = true;\r\n      text = text.substring(0, text.length - 1);\r\n    }\r\n\r\n    if (text === \"*\" || text === \"†\")\r\n      lyricType = LyricType.Directive;\r\n\r\n    var s = new Lyric(ctxt, text, lyricType);\r\n    s.elidesToNext = elides;\r\n\r\n    return s;\r\n  },\r\n\r\n  createNotations: function (ctxt, score, data, passByRef) {\r\n\r\n    var notations = [];\r\n\r\n    // if there is no data, then this must be a text only object\r\n    if (data === undefined || data === null || data === \"\") {\r\n      notations.push(new Neumes.TextOnly());\r\n      return notations;\r\n    }\r\n\r\n    var notes = [];\r\n    var out = { trailingSpace: -1 };\r\n\r\n    var that = this;\r\n    var addNotation = function(notation) {\r\n\r\n      // first, if we have any notes left over, we create a neume out of them\r\n      if (notes.length > 0) {\r\n        // create neume(s)\r\n\r\n        var neumes = that.createNeumesFromNotes(ctxt, score, notes, out.trailingSpace);\r\n        for (var i = 0; i < neumes.length; i++)\r\n          notations.push(neumes[i]);\r\n\r\n        // reset the trailing space\r\n        out.trailingSpace = -1;\r\n\r\n        notes = [];\r\n      }\r\n\r\n      // then, if we're passed a notation, let's add it\r\n      // also, perform chant logic here\r\n      if (notation !== null) {\r\n\r\n        if (notation.isClef) {\r\n          if (score.startingClef === null) {\r\n            score.startingClef = notation;\r\n            return;\r\n          }\r\n        } else if (notation.isAccidental)\r\n          passByRef.activeClef.activeAccidental = notation;\r\n        else if (notation.resetsAccidentals)\r\n          passByRef.activeClef.resetAccidentals();\r\n\r\n          notations.push(notation);\r\n      }\r\n    };\r\n\r\n    var atoms = data.match(__notationsRegex);\r\n\r\n    for (var i = 0; i < atoms.length; i++) {\r\n\r\n      var atom = atoms[i], lineBreak = null;\r\n\r\n      // handle the clefs and dividers here\r\n      switch (atom) {\r\n        case \",\":\r\n          addNotation(new Signs.QuarterBar());\r\n          break;\r\n        case \"`\":\r\n          addNotation(new Signs.Virgula());\r\n          break;\r\n        case \";\":\r\n          addNotation(new Signs.HalfBar());\r\n          break;\r\n        case \":\":\r\n          addNotation(new Signs.FullBar());\r\n          break;\r\n        case \"::\":\r\n          addNotation(new Signs.DoubleBar());\r\n          break;\r\n          // other gregorio dividers are not supported\r\n\r\n        case \"c1\":\r\n          passByRef.activeClef = new DoClef(-3, 2);\r\n          addNotation(passByRef.activeClef);\r\n          break;\r\n\r\n        case \"c2\":\r\n          passByRef.activeClef = new DoClef(-1, 2);\r\n          addNotation(passByRef.activeClef);\r\n          break;\r\n\r\n        case \"c3\":\r\n          passByRef.activeClef = new DoClef(1, 2);\r\n          addNotation(passByRef.activeClef);\r\n          break;\r\n\r\n        case \"c4\":\r\n          passByRef.activeClef = new DoClef(3, 2);\r\n          addNotation(passByRef.activeClef);\r\n          break;\r\n\r\n        case \"f3\":\r\n          passByRef.activeClef = new FaClef(1, 2);\r\n          addNotation(passByRef.activeClef);\r\n          break;\r\n\r\n        case \"f4\":\r\n          passByRef.activeClef = new FaClef(3, 2);\r\n          addNotation(passByRef.activeClef);\r\n          break;\r\n\r\n        case \"cb3\":\r\n          passByRef.activeClef = new DoClef(1, 2, new Signs.Accidental(0, Signs.AccidentalType.Flat));\r\n          addNotation(passByRef.activeClef);\r\n          break;\r\n\r\n        case \"cb4\":\r\n          passByRef.activeClef = new DoClef(3, 2, new Signs.Accidental(2, Signs.AccidentalType.Flat));\r\n          addNotation(passByRef.activeClef);\r\n          break;\r\n\r\n          case \"z\":\r\n            lineBreak = new ChantLineBreak(true);\r\n            addNotation(lineBreak);\r\n            break;\r\n          case \"Z\":\r\n            lineBreak = new ChantLineBreak(false);\r\n            addNotation(lineBreak);\r\n            break;\r\n          case \"z0\":\r\n            // unsupported for now...\r\n            break;\r\n\r\n          // spacing indicators\r\n          case \"!\":\r\n            out.trailingSpace = 0;\r\n            addNotation(null);\r\n            break;\r\n          case \"/\":\r\n            out.trailingSpace = ctxt.intraNeumeSpacing;\r\n            addNotation(null);\r\n            break;\r\n          case \"//\":\r\n            out.trailingSpace = ctxt.intraNeumeSpacing * 2;\r\n            addNotation(null);\r\n            break;\r\n\r\n\r\n          default:\r\n            // might be a custod, might be an accidental, or might be a note\r\n            if (atom.length > 1 && atom[1] === '+') {\r\n              // custod\r\n              var custod = new Custod();\r\n\r\n              custod.note = new Note(this.convertGabcStaffPositionToScribamPitch(passByRef.activeClef, data[0]));\r\n\r\n              addNotation(custod);\r\n\r\n            } else if (atom.length > 1 && (atom[1] === 'x' || atom[1] === 'y' || atom[1] === '#')) {\r\n\r\n              var accidentalType;\r\n\r\n              switch (atom[1]) {\r\n                case 'y':\r\n                  accidentalType = Signs.AccidentalType.Natural;\r\n                  break;\r\n                case '#':\r\n                  accidentalType = Signs.AccidentalType.Sharp;\r\n                  break;\r\n                default:\r\n                  accidentalType = Signs.AccidentalType.Flat;\r\n                  break;\r\n              }\r\n\r\n              var note = this.createNoteFromData(ctxt, passByRef.activeClef, atom);\r\n              var accidental = new Signs.Accidental(note.staffPosition, accidentalType);\r\n              accidental.trailingSpace = ctxt.intraNeumeSpacing * 2;\r\n\r\n              passByRef.activeClef.activeAccidental = accidental;\r\n              \r\n              addNotation(accidental);\r\n            } else {\r\n\r\n              // to make our interpreter more robust, make sure we have a clef to work with\r\n              if (passByRef.activeClef === null)\r\n                passByRef.activeClef = new DoClef(1, 2);\r\n\r\n              // looks like it's a note\r\n              notes.push(this.createNoteFromData(ctxt, passByRef.activeClef, atom));\r\n            }\r\n            break;\r\n      }\r\n    }\r\n\r\n    // finish up any remaining notes we have left\r\n    addNotation(null);\r\n\r\n    return notations;\r\n  },\r\n\r\n  createNeumesFromNotes: function (ctxt, score, notes, finalTrailingSpace) {\r\n    \r\n    var neumes = [];\r\n    var intraNeumeSpacing = ctxt.intraNeumeSpacing;\r\n\r\n    var prevNote = null, currNote = null;\r\n    var firstNoteIndex = 0;\r\n    var currNoteIndex = 0;\r\n\r\n    // here we use a simple finite state machine to create the neumes from the notes\r\n    // createNeume is helper function which returns the next state after a neume is created\r\n    // (unknownState). Each state object has a neume() function and a handle() function.\r\n    // neume() allows us to create the neume of the state in the event that we run out\r\n    // of notes. handle() gives the state an opportunity to examine the currNote and\r\n    // determine what to do...either transition to a different neume/state, or\r\n    // continue building the neume of that state. handle() returns the next state\r\n\r\n    var createNeume = function (neume, includeCurrNote) {\r\n\r\n      // add the notes to the neume\r\n      var lastNoteIndex = includeCurrNote ? currNoteIndex : currNoteIndex - 1;\r\n      while (firstNoteIndex <= lastNoteIndex)\r\n        neume.notes.push(notes[firstNoteIndex++]);\r\n\r\n      neumes.push(neume);\r\n\r\n      if (includeCurrNote === false) {\r\n        currNoteIndex--;\r\n        neume.keepWithNext = true;\r\n        neume.trailingSpace = intraNeumeSpacing;\r\n      }\r\n\r\n      return unknownState;\r\n    };\r\n\r\n    var unknownState = {\r\n      neume: function() {\r\n        return new Neumes.Punctum();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n      \r\n        switch (currNote.shape) {\r\n          case NoteShape.Stropha:\r\n            return apostrophaState;\r\n          case NoteShape.Cavum:\r\n            return createNeume(new Neumes.Punctum(), true);\r\n          case NoteShape.OriscusAscending:\r\n            return oriscusState;\r\n          case NoteShape.OriscusDescending:\r\n            return oriscusState;\r\n          case NoteShape.Virga:\r\n            return virgaState;\r\n          default:\r\n            return punctumState;\r\n        }\r\n      }\r\n    };\r\n\r\n    var punctumState = {\r\n      neume: function() {\r\n        return new Neumes.Punctum();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n        \r\n        if (currNote.staffPosition > prevNote.staffPosition)\r\n          return podatusState;\r\n        else if (currNote.staffPosition < prevNote.staffPosition) {\r\n          if (currNote.shape === NoteShape.Inclinatum)\r\n            return climacusState;\r\n          else\r\n            return clivisState;\r\n        } else\r\n          return distrophaState;\r\n      }\r\n    };\r\n\r\n    var oriscusState = {\r\n      neume: function() {\r\n        return new Neumes.Oriscus();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n        \r\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition > prevNote.staffPosition) {\r\n          // force previous oriscus to be ascending\r\n          prevNote.shape = NoteShape.OriscusAscending;\r\n          return createNeume(new Neumes.PesQuassus(), true);\r\n        } else\r\n          // stand alone oriscus\r\n          return createNeume(new Neumes.Oriscus(), true);\r\n      }\r\n    };\r\n\r\n    var podatusState = {\r\n      neume: function() {\r\n        return new Neumes.Podatus();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n\r\n        if (currNote.staffPosition > prevNote.staffPosition) {\r\n          return scandicusState;\r\n        } else if (currNote.staffPosition < prevNote.staffPosition) {\r\n          if (currNote.shape === NoteShape.Inclinatum)\r\n            return pesSubpunctisState;\r\n          else\r\n            return torculusState;\r\n        } else\r\n          return createNeume(new Neumes.Podatus(), false);\r\n      }\r\n    };\r\n\r\n    var clivisState = {\r\n      neume: function() {\r\n        return new Neumes.Clivis();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n\r\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition > prevNote.staffPosition)\r\n          return porrectusState;\r\n        else\r\n          return createNeume(new Neumes.Clivis(), false);\r\n      }\r\n    };\r\n\r\n    var climacusState = {\r\n      neume: function() {\r\n        return new Neumes.Climacus();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n        if (currNote.shape !== NoteShape.Inclinatum)\r\n          return createNeume(new Neumes.Climacus(), false);\r\n        else\r\n          return state;\r\n      }\r\n    };\r\n\r\n    var porrectusState = {\r\n      neume: function() {\r\n        return new Neumes.Porrectus();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n\r\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition < prevNote.staffPosition)\r\n          return createNeume(new Neumes.PorrectusFlexus(), true);\r\n        else\r\n          return createNeume(new Neumes.Porrectus(), false);\r\n      }\r\n    };\r\n\r\n    var pesSubpunctisState = {\r\n      neume: function() {\r\n        return new Neumes.PesSubpunctis();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n    \r\n        if (currNote.shape !== NoteShape.Inclinatum)\r\n          return createNeume(new Neumes.PesSubpunctis(), false);\r\n        else\r\n          return state;\r\n      }\r\n    };\r\n\r\n    var scandicusState = {\r\n      neume: function() {\r\n        return new Neumes.Scandicus();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n\r\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition < prevNote.staffPosition)\r\n          return scandicusFlexusState;\r\n        else\r\n          return createNeume(new Neumes.Scandicus(), false);\r\n      }\r\n    };\r\n\r\n    var scandicusFlexusState = {\r\n      neume: function() {\r\n        return new Neumes.ScandicusFlexus();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n        return createNeume(new Neumes.ScandicusFlexus(), false);\r\n      }\r\n    };\r\n\r\n    var virgaState = {\r\n      neume: function() {\r\n        return new Neumes.Virga();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n    \r\n        if (currNote.shape === NoteShape.Inclinatum && currNote.staffPosition < prevNote.staffPosition)\r\n          return climacusState;\r\n        else if (currNote.shape === NoteShape.Virga && currNote.staffPosition === prevNote.staffPosition)\r\n          return bivirgaState;\r\n        else\r\n          return createNeume(new Neumes.Virga(), false);\r\n      }\r\n    };\r\n\r\n    var bivirgaState = {\r\n      neume: function() {\r\n        return new Neumes.Bivirga();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n    \r\n        if (currNote.shape === NoteShape.Virga && currNote.staffPosition === prevNote.staffPosition)\r\n          return createNeume(new Neumes.Trivirga(), false);\r\n        else\r\n          return createNeume(new Neumes.Bivirga(), false);\r\n      }\r\n    };\r\n\r\n    var apostrophaState = {\r\n      neume: function() {\r\n        return new Neumes.Apostropha();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n        if (currNote.staffPosition === prevNote.staffPosition && currNote.shape === NoteShape.Apostropha)\r\n          return distrophaState;\r\n        else\r\n          return createNeume(new Neumes.Apostropha(), false);\r\n      }\r\n    };\r\n\r\n    var distrophaState = {\r\n      neume: function() {\r\n        return new Neumes.Distropha();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n        if (currNote.staffPosition === prevNote.staffPosition && currNote.shape === NoteShape.Apostropha)\r\n          return createNeume(new Neumes.Tristropha(), true);\r\n        else\r\n          return createNeume(new Neumes.Distropha(), false);\r\n      }\r\n    };\r\n\r\n    var torculusState = {\r\n      neume: function() {\r\n        return new Neumes.Torculus();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition > prevNote.staffPosition)\r\n          return torculusResupinusState;\r\n        else\r\n          return createNeume(new Neumes.Torculus(), false);\r\n      }\r\n    };\r\n\r\n    var torculusResupinusState = {\r\n      neume: function() {\r\n        return new Neumes.TorculusResupinus();\r\n      },\r\n      handle: function(currNote, prevNote) {\r\n        if (currNote.shape === NoteShape.Default && currNote.staffPosition < prevNote.staffPosition)\r\n          return createNeume(new Neumes.TorculusResupinusFlexus(), true);\r\n        else\r\n          return createNeume(new Neumes.TorculusResupinus(), false);\r\n      }\r\n    };\r\n\r\n    var state = unknownState;\r\n\r\n    while (currNoteIndex < notes.length) {\r\n\r\n      prevNote = currNote;\r\n      currNote = notes[currNoteIndex];\r\n\r\n      state = state.handle(currNote, prevNote);\r\n\r\n      // if we are on the last note, then try to create a neume if we need to.\r\n      if (currNoteIndex === notes.length - 1 && state !== unknownState)\r\n        createNeume(state.neume(), true);\r\n\r\n      currNoteIndex++;\r\n    }\r\n\r\n    if (neumes.length > 0) {\r\n      if (finalTrailingSpace >= 0) {\r\n        neumes[neumes.length - 1].keepWithNext = true;\r\n        neumes[neumes.length - 1].trailingSpace = finalTrailingSpace;\r\n      }\r\n    }\r\n\r\n    return neumes;\r\n  },\r\n\r\n  createNoteFromData: function (ctxt, clef, data) {\r\n\r\n    var note = new Note();\r\n\r\n    if (data.length < 1)\r\n      throw 'Invalid note data: ' + data;\r\n\r\n    if (data[0] === '-') { // liquescent initio debilis\r\n      note.liquescent = LiquescentType.InitioDebilis;\r\n      data = data.substring(1);\r\n    }\r\n\r\n    if (data.length < 1)\r\n      throw 'Invalid note data: ' + data;\r\n\r\n    // the next char is always the pitch\r\n    var pitch = this.convertGabcStaffPositionToScribamPitch(clef, data[0]);\r\n\r\n    if (data[0] === data[0].toUpperCase())\r\n      note.shape = NoteShape.Inclinatum;\r\n\r\n    note.staffPosition = this.convertGabcStaffPositionToScribamStaffPosition(clef, data[0]);\r\n    note.pitch = pitch;\r\n\r\n    var mark;\r\n\r\n    // process the modifiers\r\n    for (var i = 1; i < data.length; i++) {\r\n\r\n      var c = data[i];\r\n      var lookahead = '\\0';\r\n\r\n      var haveLookahead = i + 1 < data.length;\r\n      if (haveLookahead)\r\n        lookahead = data[i + 1];\r\n\r\n      switch (c) {\r\n\r\n        // rhythmic markings\r\n        case '.':\r\n          mark = new Markings.Mora(note, ctxt.staffInterval / 4.0);\r\n          if (haveLookahead && lookahead === '1')\r\n            mark.positionHint = MarkingPositionHint.Above;\r\n          else if (haveLookahead && lookahead === '0')\r\n            mark.positionHint = MarkingPositionHint.Below;\r\n          \r\n          note.markings.push(mark);\r\n          break;\r\n\r\n        case '_':\r\n          mark = new Markings.HorizontalEpisema(note);\r\n          if (haveLookahead) {\r\n            if (lookahead === '0')\r\n              mark.positionHint = MarkingPositionHint.Below;\r\n            else if (lookahead === '1')\r\n              mark.positionHint = MarkingPositionHint.Above;\r\n            else if (lookahead === '2')\r\n              mark.terminating = true;\r\n\r\n            // check for another lookahead...\r\n            if (++i + 1 < data.length && data[i + 1] === '2') {\r\n              mark.terminating = true;\r\n              i++;\r\n            }\r\n          }\r\n          note.markings.push(mark);\r\n          break;\r\n\r\n        case '\\'':\r\n          mark = new Markings.Ictus(note);\r\n          if (haveLookahead && lookahead === '1')\r\n            mark.positionHint = MarkingPositionHint.Above;\r\n          else if (haveLookahead && lookahead === '0')\r\n            mark.positionHint = MarkingPositionHint.Below;\r\n\r\n          note.markings.push(mark);\r\n          break;\r\n\r\n          //note shapes\r\n        case 'r':\r\n          if (haveLookahead && lookahead === '1') {\r\n            note.markings.push(new Markings.AcuteAccent(note));\r\n            i++;\r\n          } else\r\n            note.shape = NoteShape.Cavum;\r\n          break;\r\n\r\n        case 's':\r\n          note.shape = NoteShape.Stropha;\r\n          break;\r\n\r\n        case 'v':\r\n          note.shape = NoteShape.Virga;\r\n          break;\r\n\r\n        case 'w':\r\n          note.shape = NoteShape.Quilisma;\r\n          break;\r\n\r\n        case 'o':\r\n          if (haveLookahead && lookahead === '<') {\r\n            note.shape = NoteShape.OriscusAscending;\r\n            i++;\r\n          } else if (haveLookahead && lookahead === '>') {\r\n            note.shape = NoteShape.OriscusDescending;\r\n            i++;\r\n          } else\r\n            note.shape = NoteShape.OriscusAscending;\r\n          break;\r\n\r\n        // liquescents\r\n        case '~':\r\n          if (note.shape === NoteShape.Inclinatum)\r\n            note.liquescent = LiquescentType.SmallDescending;\r\n          else if (note.shape === NoteShape.OriscusAscending ||\r\n            note.shape === NoteShape.OriscusDescending)\r\n            note.liquescent = LiquescentType.LargeAscending;\r\n          else\r\n            note.liquescent = LiquescentType.SmallAscending;\r\n          break;\r\n        case '<':\r\n          note.liquescent = LiquescentType.LargeAscending;\r\n          break;\r\n        case '>':\r\n          note.liquescent = LiquescentType.LargeDescending;\r\n          break;\r\n\r\n        // accidentals\r\n        case 'x':\r\n          if (note.pitch.step === Step.Mi)\r\n            note.pitch.step = Step.Me;\r\n          else if (note.pitch.step === Step.Ti)\r\n            note.pitch.step = Step.Te;\r\n          break;\r\n        case 'y':\r\n          if (note.pitch.step === Step.Te)\r\n            note.pitch.step = Step.Ti;\r\n          else if (note.pitch.step === Step.Me)\r\n            note.pitch.step = Step.Mi;\r\n          else if (note.pitch.step === Step.Du)\r\n            note.pitch.step = Step.Do;\r\n          else if (note.pitch.step === Step.Fu)\r\n            note.pitch.step = Step.Fa;\r\n          break;\r\n        case '#':\r\n          if (note.pitch.step === Step.Do)\r\n            note.pitch.step = Step.Du;\r\n          else if (note.pitch.step === Step.Fa)\r\n            note.pitch.step = Step.Fu;\r\n          break;\r\n      }\r\n    }\r\n\r\n    return note;\r\n  },\r\n\r\n  // returns pitch\r\n  convertGabcStaffPositionToScribamStaffPosition: function (clef, gabcStaffPos) {\r\n    return gabcStaffPos.toLowerCase().charCodeAt(0) - 'a'.charCodeAt(0) - 6;\r\n  },\r\n\r\n  // returns pitch\r\n  convertGabcStaffPositionToScribamPitch: function (clef, gabcStaffPos) {\r\n    var scribamStaffPosition = this.convertGabcStaffPositionToScribamStaffPosition(clef, gabcStaffPos)\r\n\r\n    var pitch = clef.staffPositionToPitch(scribamStaffPosition);\r\n\r\n    if (clef.activeAccidental !== null)\r\n      clef.activeAccidental.applyToPitch(pitch);\r\n\r\n    return pitch;\r\n  }\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Gabc.js\n **/","//\r\n// Author(s):\r\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\r\n//\r\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n//\r\n\r\nimport * as Exsurge from './Exsurge.Core'\r\nimport { ctxt, QuickSvg, ChantLayoutElement, GlyphCode, GlyphVisualizer, HorizontalEpisemaVisualizer } from './Exsurge.Drawing'\r\nimport { Note, NoteShape } from './Exsurge.Chant'\r\n\r\nexport class Marking extends ChantLayoutElement {\r\n\r\n  constructor(note) {\r\n    super();\r\n\r\n    this.note = note;\r\n    this.horizontalOffset = 0;\r\n    this.verticalOffset = 0;\r\n    this.positionHint = Exsurge.MarkingPositionHint.Default;\r\n\r\n    // each marking has its own visualizer\r\n    this.visualizer = null;\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n\r\n  }\r\n}\r\n\r\nexport class AcuteAccent extends Marking {\r\n\r\n  constructor(note) {\r\n    super(note);\r\n\r\n    this.positionHint = Exsurge.MarkingPositionHint.Above;\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n\r\n    this.visualizer = new GlyphVisualizer(ctxt, GlyphCode.AcuteAccent);\r\n\r\n    // fixme: acute markings might need to be positioned vertically over\r\n    // the notation bounds of the chantline after everything has already\r\n    // been laid out on the line...for now we just place them a\r\n    // reasonable height above the staff line.\r\n    this.verticalOffset = -ctxt.staffInterval * 5;\r\n    this.horizontalOffset = -this.visualizer.bounds.x; // center on the note itself\r\n\r\n    this.bounds = this.visualizer.bounds.clone();\r\n    this.bounds.x += this.horizontalOffset;\r\n    this.bounds.y += this.verticalOffset;\r\n\r\n    // position the visualizer too...\r\n    this.visualizer.bounds.x = this.bounds.x;\r\n    this.visualizer.bounds.y = this.bounds.y;\r\n\r\n    super.performLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * HorizontalEpisema\r\n */\r\nexport class HorizontalEpisema extends Marking {\r\n\r\n  constructor(note) {\r\n    super(note);\r\n  }\r\n\r\n  updateY(y) {\r\n    this.bounds.y = y;\r\n    this.visualizer.bounds.y = y;\r\n    this.terminating = false; // indicates if this episema should terminate itself or not\r\n  }\r\n\r\n  updateWidth(width) {\r\n    this.bounds.width = width;\r\n    this.visualizer.bounds.width = width;\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    // following logic helps to keep the episemae away from staff lines if they get too close\r\n    // The idea is this: since the staff lines are odd numbered multiples of ctxt.staffInterval,\r\n    // Math.round(y / ctxt.staffInterval) % 2 tells us if we're closer to a space or a line.\r\n    // If it's an odd number then we shift away from line by adding .5 to the step, which puts\r\n    // us the closest we want to be to a line.\r\n\r\n    var y = 0, step;\r\n    var minDistanceAway = ctxt.staffInterval * 0.4; // min distance from neume\r\n\r\n    if (this.positionHint === Exsurge.MarkingPositionHint.Below) {\r\n      y = this.note.bounds.bottom() + minDistanceAway; // the highest the line could be at\r\n      step = Math.round(y / ctxt.staffInterval);\r\n\r\n      // if it's an odd step, that means we're near a line, and therefore\r\n      // need to shift down\r\n      if (Math.abs(step % 2) === 1)\r\n        y = (step + 0.5) * ctxt.staffInterval;\r\n    } else {\r\n      y = this.note.bounds.y - minDistanceAway; // the lowest the line could be at\r\n      step = Math.round(y / ctxt.staffInterval);\r\n\r\n      // if it's an odd step, that means we're near a line, and therefore\r\n      // need to shift up\r\n      if (Math.abs(step % 2) === 1)\r\n        y = (step - 0.5) * ctxt.staffInterval;\r\n    }\r\n\r\n    var glyphCode = this.note.glyphVisualizer.glyphCode;\r\n    var width;\r\n\r\n    // The porrectus requires special handling of the note width,\r\n    // otherwise the width is just that of the note itself\r\n    if (glyphCode === GlyphCode.Porrectus1 ||\r\n        glyphCode === GlyphCode.Porrectus2 ||\r\n        glyphCode === GlyphCode.Porrectus3 ||\r\n        glyphCode === GlyphCode.Porrectus4)\r\n      width = ctxt.staffInterval;\r\n    else\r\n      width = this.note.bounds.width;\r\n\r\n    this.bounds.x = this.note.bounds.x;\r\n    this.bounds.y = y;\r\n    this.bounds.width = width;\r\n    this.bounds.height = ctxt.episemaLineWeight;\r\n\r\n    this.origin.x = 0;\r\n    this.origin.y = 0;\r\n\r\n    this.visualizer = new HorizontalEpisemaVisualizer(ctxt, this.note.bounds.x, y, width);\r\n  }\r\n}\r\n\r\n/*\r\n * Ictus\r\n */\r\nexport class Ictus extends Marking {\r\n\r\n  constructor(note) {\r\n    super(note);\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n\r\n    var glyphCode;\r\n\r\n    // fixme: this positioning logic doesn't work for the ictus on a virga apparently...?\r\n\r\n    if (this.positionHint === Exsurge.MarkingPositionHint.Above) {\r\n      glyphCode = GlyphCode.VerticalEpisemaAbove;\r\n    } else {\r\n      glyphCode = GlyphCode.VerticalEpisemaBelow;\r\n    }\r\n\r\n    var staffPosition = this.note.staffPosition;\r\n    \r\n    this.horizontalOffset = this.note.bounds.width / 2;\r\n    this.verticalOffset = 0;\r\n\r\n    switch (glyphCode) {\r\n      case GlyphCode.VerticalEpisemaAbove:\r\n        if (staffPosition % 2 === 0)\r\n          this.verticalOffset -= ctxt.staffInterval * 1.5;\r\n        else\r\n          this.verticalOffset -= ctxt.staffInterval * .9;\r\n        break;\r\n\r\n      case GlyphCode.VerticalEpisemaBelow:\r\n      default:\r\n        if (staffPosition % 2 === 0)\r\n          this.verticalOffset += ctxt.staffInterval * 1.5;\r\n        else\r\n          this.verticalOffset += ctxt.staffInterval * .8;\r\n        break;\r\n    }\r\n\r\n    this.visualizer = new GlyphVisualizer(ctxt, glyphCode);\r\n    this.visualizer.setStaffPosition(ctxt, staffPosition);\r\n\r\n    this.bounds = this.visualizer.bounds.clone();\r\n    this.bounds.x = this.note.bounds.x + this.horizontalOffset - this.visualizer.origin.x;\r\n    this.bounds.y += this.verticalOffset;\r\n\r\n    this.visualizer.bounds.x = this.bounds.x;\r\n    this.visualizer.bounds.y = this.bounds.y;\r\n\r\n    super.performLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Mora\r\n */\r\nexport class Mora extends Marking {\r\n\r\n  constructor(note, horizontalOffset) {\r\n    super(note);\r\n\r\n    this.horizontalOffset = horizontalOffset;\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n\r\n    var staffPosition = this.note.staffPosition;\r\n\r\n    this.visualizer = new GlyphVisualizer(ctxt, GlyphCode.Mora);\r\n    this.visualizer.setStaffPosition(ctxt, staffPosition);\r\n\r\n    this.verticalOffset = 0;\r\n    switch (this.positionHint) {\r\n      case Exsurge.MarkingPositionHint.Below:\r\n        if (staffPosition % 2 === 0)\r\n          this.verticalOffset += ctxt.staffInterval / 3.0;\r\n        else\r\n          this.verticalOffset += (ctxt.staffInterval * 2) / 3.0;\r\n        break;\r\n\r\n      case Exsurge.MarkingPositionHint.Default:\r\n      case Exsurge.MarkingPositionHint.Above:\r\n      default:\r\n        if (staffPosition % 2 === 0)\r\n          this.verticalOffset -= ctxt.staffInterval / 3.0;\r\n        else\r\n          this.verticalOffset -= (ctxt.staffInterval * 2) / 3.0;\r\n        break;\r\n    }\r\n\r\n    this.bounds = this.visualizer.bounds.clone();\r\n    this.bounds.x += this.note.bounds.right() + this.horizontalOffset;\r\n    this.bounds.y += this.verticalOffset;\r\n\r\n    this.visualizer.bounds.x = this.bounds.x;\r\n    this.visualizer.bounds.y = this.bounds.y;\r\n\r\n    super.performLayout(ctxt);\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Chant.Markings.js\n **/","//\r\n// Author(s):\r\n// Fr. Matthew Spencer, OSJ <mspencer@osjusa.org>\r\n//\r\n// Copyright (c) 2008-2016 Fr. Matthew Spencer, OSJ\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n//\r\n\r\nimport * as Exsurge from 'Exsurge.Core'\r\nimport { Step, Pitch, Rect, Point, Margins } from 'Exsurge.Core'\r\nimport { ctxt, QuickSvg, ChantLayoutElement, ChantNotationElement, GlyphCode, GlyphVisualizer, NeumeLineVisualizer, HorizontalEpisemaLineVisualizer } from 'Exsurge.Drawing'\r\nimport { Note, LiquescentType, NoteShape } from 'Exsurge.Chant'\r\n\r\n/*\r\n * Neumes base class\r\n */\r\nexport class Neume extends ChantNotationElement {\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.notes = [];\r\n  }\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n  }\r\n\r\n  finishLayout(ctxt) {\r\n\r\n    // allow subclasses an opportunity position their own markings...\r\n    this.positionMarkings();\r\n\r\n    // layout the markings of the notes\r\n    for (var i = 0; i < this.notes.length; i++) {\r\n      var note = this.notes[i];\r\n\r\n      for (var j = 0; j < note.markings.length; j++) {\r\n        var marking = note.markings[j];\r\n\r\n        marking.performLayout(ctxt);\r\n        this.addVisualizer(marking.visualizer);\r\n      }\r\n    }\r\n\r\n    super.finishLayout(ctxt);\r\n  }\r\n\r\n  // subclasses can override this in order to correctly place markings in a neume specific way\r\n  positionMarkings() {\r\n\r\n  }\r\n}\r\n\r\n/*\r\n * Apostropha\r\n */\r\nexport class Apostropha extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    // determine the glyph to use\r\n    var note = this.notes[0];\r\n\r\n    if (note.liquescent !== LiquescentType.None)\r\n      note.setGlyphShape(ctxt, GlyphCode.StrophaLiquescent);\r\n    else\r\n      note.setGlyphShape(ctxt, GlyphCode.Stropha);\r\n\r\n    note.performLayout(ctxt);\r\n    this.addVisualizer(note);\r\n\r\n    this.origin.x = note.origin.x;\r\n    this.origin.y = note.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n\r\n  static determineNoteGlyphCode(note) {\r\n\r\n    switch (note.shape) {\r\n      case NoteShape.Stropha:\r\n        return GlyphCode.Stropha;\r\n      case NoteShape.Cavum:\r\n        return GlyphCode.PunctumCavum;\r\n      default:\r\n        return GlyphCode.PunctumCuadratum;\r\n    }\r\n  }\r\n}\r\n\r\n/*\r\n * Bivirga\r\n *\r\n * For simplicity in implementation, Bivirga's have two notes in the object\r\n * structure. These technically must be the same pitch though.\r\n */\r\nexport class Bivirga extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var note1 = this.notes[0];\r\n    var note2 = this.notes[1];\r\n\r\n    note1.setGlyphShape(ctxt, Virga.getGlyphCode(note1.staffPosition));\r\n    note1.performLayout(ctxt);\r\n\r\n    note2.setGlyphShape(ctxt, Virga.getGlyphCode(note1.staffPosition));\r\n    note2.performLayout(ctxt);\r\n    note2.bounds.x += note1.bounds.width + ctxt.intraNeumeSpacing;\r\n\r\n    this.addVisualizer(note1);\r\n    this.addVisualizer(note2);\r\n\r\n    this.origin.x = note1.origin.x;\r\n    this.origin.y = note1.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Trivirga\r\n *\r\n * For simplicity in implementation, Trivirga's have three notes in the object\r\n * structure. These technically must be the same pitch though.\r\n */\r\nexport class Trivirga extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var note1 = this.notes[0];\r\n    var note2 = this.notes[1];\r\n    var note3 = this.notes[2];\r\n\r\n    note1.setGlyphShape(ctxt, Virga.getGlyphCode(note1.staffPosition));\r\n    note1.performLayout(ctxt);\r\n\r\n    note2.setGlyphShape(ctxt, Virga.getGlyphCode(note1.staffPosition));\r\n    note2.performLayout(ctxt);\r\n    note2.bounds.x += note1.bounds.width + ctxt.intraNeumeSpacing;\r\n\r\n    note3.setGlyphShape(ctxt, Virga.getGlyphCode(staffPosition));\r\n    note3.performLayout(ctxt);\r\n    note3.bounds.x += note1.bounds.width + ctxt.intraNeumeSpacing + note2.bounds.width + ctxt.intraNeumeSpacing;\r\n\r\n    this.addVisualizer(note1);\r\n    this.addVisualizer(note2);\r\n    this.addVisualizer(note3);\r\n\r\n    this.origin.x = note1.origin.x;\r\n    this.origin.y = note1.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Climacus\r\n */\r\nexport class Climacus extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    // the first note is always a virga...\r\n    var staffPosition, prevStaffPosition;\r\n    var x = 0;\r\n\r\n    var note = this.notes[0];\r\n    staffPosition = note.staffPosition;\r\n    note.setGlyphShape(ctxt, Virga.getGlyphCode(staffPosition));\r\n    note.performLayout(ctxt);\r\n\r\n    x += note.bounds.width * 1.2; // fixme: correct spacing after virga\r\n\r\n    this.addVisualizer(note);\r\n\r\n    this.origin.x = note.origin.x;\r\n    this.origin.y = note.origin.y;\r\n\r\n    // now add all the punctum inclinati\r\n    prevStaffPosition = this.notes[1].staffPosition;\r\n    for (var i = 1; i < this.notes.length; i++, prevStaffPosition = staffPosition) {\r\n      note = this.notes[i];\r\n\r\n      if (note.liquescent === LiquescentType.LargeAscending ||\r\n        note.liquescent === LiquescentType.LargeDescending)\r\n        // fixme: is the large inclinatum liquescent the same as the apostropha?\r\n        note.setGlyphShape(ctxt, GlyphCode.Apostropha);\r\n      else if (note.liquescent === LiquescentType.SmallAscending ||\r\n        note.liquescent === LiquescentType.SmallDescending)\r\n        note.setGlyphShape(ctxt, GlyphCode.PunctumInclinatumLiquescent);\r\n      else\r\n        // fixme: some climaci in the new chant books end with a punctum cuadratum\r\n        // (see, for example, the antiphon \"Sancta Maria\" for October 7).\r\n        note.setGlyphShape(ctxt, GlyphCode.PunctumInclinatum);\r\n\r\n      staffPosition = note.staffPosition;\r\n\r\n      note.performLayout(ctxt);\r\n\r\n      // fixme: how do these calculations look for puncti inclinati based on staff position offsets?\r\n      var multiple;\r\n      switch (Math.abs(prevStaffPosition - staffPosition)) {\r\n        case 0:\r\n          multiple = 0;\r\n          break;\r\n        case 1:\r\n          multiple = 0.8;\r\n          break;\r\n        default:\r\n          multiple = 1.2;\r\n          break;\r\n      }\r\n\r\n      x += note.bounds.width * multiple;\r\n      note.bounds.x += x;\r\n\r\n      this.addVisualizer(note);\r\n    }\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Clivis\r\n */\r\nexport class Clivis extends Neume {\r\n\r\n  positionMarkings() {\r\n\r\n    var hasLowerMora = false;\r\n    var marking, i;\r\n\r\n    // 1. morae need to be lined up if both notes have morae\r\n    // 2. like the podatus, mora on lower note needs to below\r\n    //    under certain circumstances\r\n    for (i = 0; i < this.notes[1].markings.length; i++) {\r\n      marking = this.notes[1].markings[i];\r\n\r\n      if (marking.constructor.name === 'Mora') {\r\n\r\n        hasLowerMora = true;\r\n\r\n        if (this.notes[0].staffPosition - this.notes[1].staffPosition === 1 &&\r\n            Math.abs(this.notes[1].staffPosition % 2) === 1)\r\n          marking.positionHint = Exsurge.MarkingPositionHint.Below;\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < this.notes[0].markings.length; i++) {\r\n      marking = this.notes[0].markings[i];\r\n\r\n      if (marking.constructor.name === 'Mora' && hasLowerMora) {\r\n        marking.positionHint = Exsurge.MarkingPositionHint.Above;\r\n        marking.horizontalOffset += this.notes[1].bounds.right() - this.notes[0].bounds.right();\r\n      }\r\n    }    \r\n  }\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var line;\r\n    var smallLiquescent = false;\r\n\r\n    var upper = this.notes[0];\r\n    var lower = this.notes[1];\r\n\r\n    if (lower.liquescent === LiquescentType.LargeAscending) {\r\n      upper.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n      lower.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumAscLiquescent);\r\n    } else if (lower.liquescent === LiquescentType.LargeDescending) {\r\n      upper.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n      lower.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\r\n    } else if (lower.liquescent === LiquescentType.SmallDescending ||\r\n        lower.liquescent === LiquescentType.SmallAscending) {\r\n      upper.setGlyphShape(ctxt, GlyphCode.BeginningDesLiquescent);\r\n      lower.setGlyphShape(ctxt, GlyphCode.TerminatingDesLiquescent);\r\n      smallLiquescent = true;\r\n    } else {\r\n      upper.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n      lower.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n    }\r\n\r\n    var upperStaffPos = upper.staffPosition;\r\n    var lowerStaffPos = lower.staffPosition;\r\n\r\n    upper.performLayout(ctxt);\r\n    lower.performLayout(ctxt);\r\n\r\n    // add the ascending line\r\n    line = new NeumeLineVisualizer(ctxt, lower, upper, true);\r\n    line.bounds.x = upper.bounds.x;\r\n\r\n    this.addVisualizer(line);\r\n    line = null;\r\n\r\n    var x = upper.bounds.right();\r\n\r\n    // do we need to draw a descending line?\r\n    if (upperStaffPos - lowerStaffPos > 1) {\r\n      line = new NeumeLineVisualizer(ctxt, upper, lower, false);\r\n      x -= line.bounds.width;\r\n      line.bounds.x = x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    if (smallLiquescent) {\r\n      if (line !== null)\r\n        x -= lower.bounds.width - line.bounds.width;\r\n      else\r\n        x -= lower.bounds.width;\r\n    }\r\n\r\n    lower.bounds.x = x;\r\n\r\n    this.addVisualizer(upper);\r\n    this.addVisualizer(lower);\r\n\r\n    this.origin.x = upper.origin.x;\r\n    this.origin.y = upper.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n\r\n\r\n/*\r\n * Distropha\r\n *\r\n * For simplicity in implementation, Distropha's have two notes in the object\r\n * structure. These technically must be the same pitch though (like Bivirga).\r\n */\r\nexport class Distropha extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var note1 = this.notes[0];\r\n    var note2 = this.notes[1];\r\n\r\n    note1.setGlyphShape(ctxt, Apostropha.determineNoteGlyphCode(note1));\r\n    note1.performLayout(ctxt);\r\n\r\n    note2.setGlyphShape(ctxt, Apostropha.determineNoteGlyphCode(note2));\r\n    note2.performLayout(ctxt);\r\n\r\n    note2.bounds.x += note1.bounds.width + ctxt.intraNeumeSpacing;\r\n\r\n    this.addVisualizer(note1);\r\n    this.addVisualizer(note2);\r\n\r\n    this.origin.x = note1.origin.x;\r\n    this.origin.y = note1.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Oriscus\r\n */\r\nexport class Oriscus extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    // determine the glyph to use\r\n    var note = this.notes[0];\r\n\r\n    if (note.shape === NoteShape.OriscusAscending)\r\n      note.setGlyphShape(ctxt, GlyphCode.OriscusAsc);\r\n    else\r\n      note.setGlyphShape(ctxt, GlyphCode.OriscusDes);\r\n\r\n    note.performLayout(ctxt);\r\n    this.addVisualizer(note);\r\n\r\n    this.origin.x = note.origin.x;\r\n    this.origin.y = note.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * PesQuassus\r\n */\r\nexport class PesQuassus extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var x = 0;\r\n\r\n    var lower = this.notes[0];\r\n    var upper = this.notes[1];\r\n    var line;\r\n\r\n    var lowerStaffPos = lower.staffPosition;\r\n    var upperStaffPos = upper.staffPosition;\r\n\r\n    if (lower.shape === NoteShape.OriscusAscending)\r\n      lower.setGlyphShape(ctxt, GlyphCode.OriscusAsc);\r\n    else\r\n      lower.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n\r\n    if (upper.liquescent === LiquescentType.LargeDescending)\r\n      upper.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\r\n    else\r\n      upper.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n\r\n    lower.performLayout(ctxt);\r\n    lower.bounds.x = x;\r\n    this.addVisualizer(lower);\r\n\r\n    x += lower.bounds.right();\r\n\r\n    var needsLines = upperStaffPos - lowerStaffPos > 1;\r\n    if (needsLines) {\r\n      line = new NeumeLineVisualizer(ctxt, lower, upper, false);\r\n      x -= line.bounds.width;\r\n      line.bounds.x = x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    upper.bounds.x = x;\r\n\r\n    upper.performLayout(ctxt);\r\n    upper.bounds.x = x;\r\n    this.addVisualizer(upper);\r\n\r\n    x += upper.bounds.width;\r\n\r\n    // add a hanging line if we need it\r\n    if (needsLines) {\r\n      line = new NeumeLineVisualizer(ctxt, upper, lower, true);\r\n      x -= line.bounds.width;\r\n      line.bounds.x = x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    this.origin.x = lower.origin.x;\r\n    this.origin.y = lower.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * PesSubpunctis\r\n */\r\nexport class PesSubpunctis extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var lower = this.notes[0];\r\n    var upper = this.notes[1];\r\n    var staffPosition, prevStaffPosition;\r\n    var x = 0;\r\n\r\n    if (lower.isLiquescent || upper.isLiquescent) {\r\n      lower.setGlyphShape(ctxt, GlyphCode.BeginningAscLiquescent);\r\n      upper.setGlyphShape(ctxt, GlyphCode.TerminatingAscLiquescent);\r\n    } else {\r\n      lower.setGlyphShape(ctxt, GlyphCode.PodatusLower);\r\n      upper.setGlyphShape(ctxt, GlyphCode.PodatusUpper);\r\n    }\r\n\r\n    if (lower.shape === NoteShape.Quilisma)\r\n      lower.setGlyphShape(ctxt, GlyphCode.Quilisma);\r\n\r\n    lower.performLayout(ctxt);\r\n    upper.performLayout(ctxt);\r\n\r\n    var line = new NeumeLineVisualizer(ctxt, lower, upper, false);\r\n\r\n    line.bounds.x = lower.bounds.right() - line.bounds.width;\r\n    upper.bounds.x = lower.bounds.right() - upper.bounds.width;\r\n\r\n    // add the elements\r\n    this.addVisualizer(lower);\r\n    this.addVisualizer(line);\r\n    this.addVisualizer(upper);\r\n\r\n    x += Math.max(lower.bounds.width, upper.bounds.width) * 1.2; // fixme: correct spacing after podatus\r\n\r\n    // now add all the punctum inclinati\r\n    staffPosition = upper.staffPosition;\r\n    prevStaffPosition = lower.staffPosition;\r\n    for (var i = 2; i < this.notes.length; i++, prevStaffPosition = staffPosition) {\r\n      var note = this.notes[i];\r\n\r\n      if (note.liquescent !== LiquescentType.None)\r\n        note.setGlyphShape(ctxt, GlyphCode.PunctumInclinatumLiquescent);\r\n      else {\r\n        // fixme: some climaci in the new chant books end with a punctum cuadratum\r\n        // (see, for example, the antiphon \"Sancta Maria\" for October 7).\r\n        note.setGlyphShape(ctxt, GlyphCode.PunctumInclinatum);\r\n      }\r\n\r\n      staffPosition = note.staffPosition;\r\n\r\n      note.performLayout(ctxt);\r\n\r\n      // fixme: how do these calculations look for puncti inclinati based on staff position offsets?\r\n      var multiple;\r\n      switch (Math.abs(prevStaffPosition - staffPosition)) {\r\n        case 0:\r\n          multiple = 0;\r\n          break;\r\n        case 1:\r\n          multiple = 0.8;\r\n          break;\r\n        default:\r\n          multiple = 1.2;\r\n          break;\r\n      }\r\n\r\n      x += note.bounds.width * multiple;\r\n      note.bounds.x += x;\r\n\r\n      this.addVisualizer(note);\r\n    }\r\n\r\n    this.origin.x = lower.origin.x;\r\n    this.origin.y = lower.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Podatus\r\n *\r\n * This podatus class handles a few neume types actually, depending on the note\r\n * data: Podatus (including various liquescent types on the upper note),\r\n * Podatus initio debilis, and Quilisma-Pes\r\n */\r\nexport class Podatus extends Neume {\r\n\r\n  positionMarkings() {\r\n    var marking, i;\r\n\r\n    // 1. episema on lower note should always be below, upper note above\r\n    // 2. morae: \r\n    //   a. if podatus difference is 1 and lower note is on a line,\r\n    //      the lower mora should be below\r\n    for (i = 0; i < this.notes[0].markings.length; i++) {\r\n      marking = this.notes[0].markings[i];\r\n\r\n      if (marking.constructor.name === 'HorizontalEpisema')\r\n        marking.positionHint = Exsurge.MarkingPositionHint.Below;\r\n      else if (marking.constructor.name === 'Mora' &&\r\n          (this.notes[1].staffPosition - this.notes[0].staffPosition) === 1 &&\r\n          Math.abs(this.notes[0].staffPosition % 2) === 1)\r\n        marking.positionHint = Exsurge.MarkingPositionHint.Below;\r\n    }\r\n\r\n    for (i = 0; i < this.notes[1].markings.length; i++) {\r\n      marking = this.notes[1].markings[i];\r\n\r\n      if (marking.constructor.name === 'HorizontalEpisema')\r\n        marking.positionHint = Exsurge.MarkingPositionHint.Above;\r\n    }    \r\n  }\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var lower = this.notes[0];\r\n    var upper = this.notes[1];\r\n    var overhangUpperNote = true;\r\n\r\n    if (lower.liquescent === LiquescentType.InitioDebilis) {\r\n\r\n      // liquescent upper note or not?\r\n      if (upper.liquescent === LiquescentType.None)\r\n        upper.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n      else\r\n        upper.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\r\n\r\n      lower.setGlyphShape(ctxt, GlyphCode.TerminatingDesLiquescent);\r\n      overhangUpperNote = false;\r\n    } else if (upper.liquescent === LiquescentType.LargeAscending) {\r\n      lower.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n      upper.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumAscLiquescent);\r\n      overhangUpperNote = false;\r\n    } else if (upper.liquescent === LiquescentType.LargeDescending) {\r\n      lower.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n      upper.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\r\n      overhangUpperNote = false;\r\n    } else if (upper.liquescent === LiquescentType.SmallAscending) {\r\n      lower.setGlyphShape(ctxt, GlyphCode.BeginningAscLiquescent);\r\n      upper.setGlyphShape(ctxt, GlyphCode.TerminatingAscLiquescent);\r\n    } else {\r\n      // standard shape\r\n      lower.setGlyphShape(ctxt, GlyphCode.PodatusLower);\r\n      upper.setGlyphShape(ctxt, GlyphCode.PodatusUpper);\r\n    }\r\n\r\n    // allow a quilisma pes\r\n    if (lower.shape === NoteShape.Quilisma)\r\n      lower.setGlyphShape(ctxt, GlyphCode.Quilisma);\r\n\r\n    lower.performLayout(ctxt);\r\n    upper.performLayout(ctxt);\r\n\r\n    var line = new NeumeLineVisualizer(ctxt, lower, upper, false);\r\n    line.bounds.x = lower.bounds.right() - line.bounds.width;\r\n    this.addVisualizer(line);\r\n\r\n    // if it's overhanging, then right align the glyph\r\n    if (overhangUpperNote === true)\r\n      upper.bounds.x += line.bounds.right() - upper.bounds.width;\r\n    else\r\n      upper.bounds.x += line.bounds.x;\r\n\r\n    // add the elements\r\n    this.addVisualizer(lower);\r\n    this.addVisualizer(upper);\r\n\r\n    this.origin.x = lower.origin.x;\r\n    this.origin.y = lower.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Porrectus\r\n */\r\nexport class Porrectus extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var line;\r\n    var first = this.notes[0];\r\n    var second = this.notes[1];\r\n    var third = this.notes[2];\r\n    var x = 0.0;\r\n\r\n    var firstStaffPosition = first.staffPosition;\r\n    var secondStaffPosition = second.staffPosition;\r\n    var thirdStaffPosition = third.staffPosition;\r\n\r\n    switch (firstStaffPosition - secondStaffPosition) {\r\n      case 1:\r\n        first.setGlyphShape(ctxt, GlyphCode.Porrectus1);\r\n        break;\r\n      case 2:\r\n        first.setGlyphShape(ctxt, GlyphCode.Porrectus2);\r\n        break;\r\n      case 3:\r\n        first.setGlyphShape(ctxt, GlyphCode.Porrectus3);\r\n        break;\r\n      case 4:\r\n        first.setGlyphShape(ctxt, GlyphCode.Porrectus4);\r\n        break;\r\n      default:\r\n        // fixme: should we generate an error here?\r\n        first.setGlyphShape(ctxt, GlyphCode.None);\r\n        break;\r\n    }\r\n\r\n    first.performLayout(ctxt);\r\n\r\n    // the second glyph does not draw anything, but it still has logical importance for the editing\r\n    // environment...it can respond to changes which will then change the swash glyph of the first.\r\n    second.setGlyphShape(ctxt, GlyphCode.None);\r\n    second.performLayout(ctxt);\r\n\r\n    // add the first line and the swash\r\n    line = new NeumeLineVisualizer(ctxt, first, second, true);\r\n\r\n    line.bounds.x = first.bounds.x;\r\n    x = first.bounds.right();\r\n    second.bounds.x = x - second.bounds.width;\r\n    x = second.bounds.right();\r\n\r\n    this.addVisualizer(line);\r\n    this.addVisualizer(first);\r\n    this.addVisualizer(second);\r\n\r\n    // add the connecting line\r\n    if (thirdStaffPosition - secondStaffPosition > 1) {\r\n      line = new NeumeLineVisualizer(ctxt, second, third, false);\r\n      x -= line.bounds.width;\r\n      line.bounds.x = x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    var overhangThirdNote = true;\r\n\r\n    if (third.liquescent === LiquescentType.SmallAscending)\r\n      third.setGlyphShape(ctxt, GlyphCode.TerminatingAscLiquescent);\r\n    else if (third.liquescent === LiquescentType.LargeDescending) {\r\n      third.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\r\n      overhangThirdNote = false;\r\n    } else\r\n      third.setGlyphShape(ctxt, GlyphCode.PodatusUpper);\r\n\r\n    third.performLayout(ctxt);\r\n\r\n    if (overhangThirdNote)\r\n      third.bounds.x = second.bounds.right() - third.bounds.width;\r\n    else\r\n      third.bounds.x = x;\r\n\r\n    this.addVisualizer(third);\r\n\r\n    this.origin.x = first.origin.x;\r\n    this.origin.y = first.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * PorrectusFlexus\r\n */\r\nexport class PorrectusFlexus extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var line;\r\n    var first = this.notes[0];\r\n    var second = this.notes[1];\r\n    var third = this.notes[2];\r\n    var fourth = this.notes[3];\r\n    var x = 0;\r\n\r\n    var firstStaffPosition = first.staffPosition;\r\n    var secondStaffPosition = second.staffPosition;\r\n    var thirdStaffPosition = third.staffPosition;\r\n    var fourthStaffPosition = fourth.staffPosition;\r\n\r\n    switch (firstStaffPosition - secondStaffPosition) {\r\n      case 1:\r\n        first.setGlyphShape(ctxt, GlyphCode.Porrectus1);\r\n        break;\r\n      case 2:\r\n        first.setGlyphShape(ctxt, GlyphCode.Porrectus2);\r\n        break;\r\n      case 3:\r\n        first.setGlyphShape(ctxt, GlyphCode.Porrectus3);\r\n        break;\r\n      case 4:\r\n        first.setGlyphShape(ctxt, GlyphCode.Porrectus4);\r\n        break;\r\n      default:\r\n        // fixme: should we generate an error here?\r\n        first.setGlyphShape(ctxt, GlyphCode.None);\r\n        break;\r\n    }\r\n\r\n    first.performLayout(ctxt);\r\n\r\n    // add the first line and the swash\r\n    line = new NeumeLineVisualizer(ctxt, first, second, true);\r\n\r\n    x = line.bounds.x = first.bounds.x;\r\n    x = first.bounds.right();\r\n    this.addVisualizer(line);\r\n    this.addVisualizer(first);\r\n\r\n\r\n    // the second glyph does not draw anything, but it still has logical importance for the editing\r\n    // environment...it can respond to changes which will then change the swash glyph of the first.\r\n    second.setGlyphShape(ctxt, GlyphCode.None);\r\n    second.performLayout(ctxt);\r\n    second.bounds.x = x;\r\n    x = second.bounds.right();\r\n    this.addVisualizer(second);\r\n\r\n\r\n    // add a connecting line\r\n    if (thirdStaffPosition - secondStaffPosition > 1) {\r\n      line = new NeumeLineVisualizer(ctxt, second, third, false);\r\n      x -= line.bounds.width;\r\n      line.bounds.x += x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    third.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n    third.performLayout(ctxt);\r\n    third.bounds.x = x;\r\n    x = third.bounds.right();\r\n    this.addVisualizer(third);\r\n\r\n    // add a connecting line\r\n    if (thirdStaffPosition - fourthStaffPosition > 1) {\r\n      line = new NeumeLineVisualizer(ctxt, third, fourth, false);\r\n      x -= line.bounds.width;\r\n      line.bounds.x += x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    fourth.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n    fourth.performLayout(ctxt);\r\n    fourth.bounds.x = x;\r\n    this.addVisualizer(fourth);\r\n\r\n    this.origin.x = first.origin.x;\r\n    this.origin.y = first.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Punctum\r\n */\r\nexport class Punctum extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    // determine the glyph to use\r\n\r\n    var note = this.notes[0];\r\n\r\n    if (note.liquescent !== LiquescentType.None) {\r\n      if (note.shape === NoteShape.Inclinatum)\r\n        note.setGlyphShape(ctxt, GlyphCode.PunctumInclinatumLiquescent);\r\n      else if (note.liquescent === LiquescentType.LargeAscending)\r\n        note.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumAscLiquescent);\r\n      else if (note.liquescent === LiquescentType.LargeDescending)\r\n        note.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\r\n\r\n    } else {\r\n      switch (note.shape) {\r\n        case NoteShape.Cavum:\r\n          note.setGlyphShape(ctxt, GlyphCode.PunctumCavum);\r\n          break;\r\n\r\n        case NoteShape.Inclinatum:\r\n          note.setGlyphShape(ctxt, GlyphCode.PunctumInclinatum);\r\n          break;\r\n\r\n        case NoteShape.Quilisma:\r\n          note.setGlyphShape(ctxt, GlyphCode.Quilisma);\r\n          break;\r\n\r\n        default:\r\n          note.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n          break;\r\n      }\r\n    }\r\n\r\n    note.performLayout(ctxt);\r\n    this.addVisualizer(note);\r\n\r\n    this.origin.x = note.origin.x;\r\n    this.origin.y = note.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Scandicus\r\n */\r\nexport class Scandicus extends Neume {\r\n\r\n  // fixme: for now, we render the scandicus as a punctum followed by a podatus. however,\r\n  // it could also be a podatus followed by a virga...see LU, \"Preface,\" xj.\r\n  //\r\n  // perhaps the best way to indicate the virga form is to check if the note shape of\r\n  // the third note is a virga!\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var first = this.notes[0];\r\n    var second = this.notes[1];\r\n    var third = this.notes[2];\r\n\r\n    first.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n\r\n    if (second.isLiquescent || third.isLiquescent) {\r\n      second.setGlyphShape(ctxt, GlyphCode.BeginningAscLiquescent);\r\n      third.setGlyphShape(ctxt, GlyphCode.TerminatingAscLiquescent);\r\n    } else {\r\n      second.setGlyphShape(ctxt, GlyphCode.PodatusLower);\r\n      third.setGlyphShape(ctxt, GlyphCode.PodatusUpper);\r\n    }\r\n\r\n    // fixme: can a scandicus have a quilisma like this?\r\n    if (second.shape === NoteShape.Quilisma)\r\n      second.setGlyphShape(ctxt, GlyphCode.Quilisma);\r\n\r\n    first.performLayout(ctxt);\r\n    second.performLayout(ctxt);\r\n    third.performLayout(ctxt);\r\n\r\n    var line = new NeumeLineVisualizer(ctxt, second, third, false);\r\n\r\n    second.bounds.x = first.bounds.right();\r\n    line.bounds.x = second.bounds.right() - line.bounds.width;\r\n    third.bounds.x = second.bounds.right() - third.bounds.width;\r\n\r\n    // add the elements\r\n    this.addVisualizer(first);\r\n    this.addVisualizer(second);\r\n    this.addVisualizer(line);\r\n    this.addVisualizer(third);\r\n\r\n    this.origin.x = first.origin.x;\r\n    this.origin.y = first.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * Scandicus Flexus\r\n */\r\nexport class ScandicusFlexus extends Neume {\r\n\r\n  // see notes in Scandicus about determining the first three notes.\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var first = this.notes[0];\r\n    var second = this.notes[1];\r\n    var third = this.notes[2];\r\n    var fourth = this.notes[3];\r\n\r\n    first.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n\r\n    if (second.iisLiquescent || third.isLiquescent) {\r\n      second.setGlyphShape(ctxt, GlyphCode.BeginningAscLiquescent);\r\n      third.setGlyphShape(ctxt, GlyphCode.TerminatingAscLiquescent);\r\n    } else {\r\n      second.setGlyphShape(ctxt, GlyphCode.PodatusLower);\r\n      third.setGlyphShape(ctxt, GlyphCode.PodatusUpper);\r\n    }\r\n\r\n    // fixme: can a scandicus have a quilisma like this?\r\n    if (second.shape === NoteShape.Quilisma)\r\n      second.setGlyphShape(ctxt, GlyphCode.Quilisma);\r\n\r\n    first.performLayout(ctxt);\r\n    second.performLayout(ctxt);\r\n    third.performLayout(ctxt);\r\n    fourth.performLayout(ctxt);\r\n\r\n    var line = new NeumeLineVisualizer(ctxt, second, third, false);\r\n\r\n    second.bounds.x = first.bounds.right();\r\n    line.bounds.x = second.bounds.right() - line.bounds.width;\r\n    third.bounds.x = second.bounds.right() - third.bounds.width;\r\n    fourth.bounds.x = third.bounds.right();\r\n\r\n    // do we need to draw a descending line?\r\n    var staffPos3 = third.staffPosition;\r\n    var staffPos4 = fourth.staffPosition;\r\n    if (staffPos3 - staffPos4 > 1) {\r\n      var extraLine = new NeumeLineVisualizer(ctxt, third, fourth, false);\r\n      fourth.bounds.x -= extraLine.bounds.width;\r\n      extraLine.bounds.x -= extraLine.bounds.width;\r\n      this.addVisualizer(extraLine);\r\n    }\r\n\r\n    // add the elements\r\n    this.addVisualizer(first);\r\n    this.addVisualizer(second);\r\n    this.addVisualizer(line);\r\n    this.addVisualizer(third);\r\n    this.addVisualizer(fourth);\r\n\r\n    this.origin.x = first.origin.x;\r\n    this.origin.y = first.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * TextOnly\r\n */\r\nexport class TextOnly extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    // add an empty glyph as a placeholder\r\n    this.addVisualizer(new GlyphVisualizer(ctxt, GlyphCode.None));\r\n\r\n    this.origin.x = 0;\r\n    this.origin.y = 0;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Torculus\r\n */\r\nexport class Torculus extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var note1 = this.notes[0];\r\n    var note2 = this.notes[1];\r\n    var note3 = this.notes[2];\r\n    var drawFirstLine = note2.staffPosition - note1.staffPosition > 1;\r\n    var note3SmallLiquescent = false;\r\n    var line;\r\n\r\n    if (note1.liquescent === LiquescentType.InitioDebilis) {\r\n      note1.setGlyphShape(ctxt, GlyphCode.TerminatingDesLiquescent);\r\n      drawFirstLine = true; // always draw first line with an initio debilis\r\n    } else\r\n      note1.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n\r\n    note2.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n\r\n    if (note3.liquescent === LiquescentType.LargeAscending)\r\n      note3.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumAscLiquescent);\r\n    else if (note3.liquescent === LiquescentType.LargeDescending)\r\n      note3.setGlyphShape(ctxt, GlyphCode.PunctumCuadratumDesLiquescent);\r\n    else if (note3.liquescent === LiquescentType.SmallAscending || \r\n        note3.liquescent === LiquescentType.SmallDescending) {\r\n      note3.setGlyphShape(ctxt, GlyphCode.TerminatingDesLiquescent);\r\n      note3SmallLiquescent = true;\r\n    } else\r\n      note3.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n\r\n    note1.performLayout(ctxt);\r\n    note2.performLayout(ctxt);\r\n    note3.performLayout(ctxt);\r\n\r\n    var x = note1.bounds.right();\r\n\r\n    // do we need to draw the first (ascending) line?\r\n    if (drawFirstLine) {\r\n      line = new NeumeLineVisualizer(ctxt, note1, note2, false);\r\n      x -= line.bounds.width;\r\n      line.bounds.x = x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    note2.bounds.x = x;\r\n    x += note2.bounds.width;\r\n\r\n    // do we need to draw a descending line?\r\n    if (note2.staffPosition - note3.staffPosition > 1) {\r\n      line = new NeumeLineVisualizer(ctxt, note2, note3, false);\r\n      x -= line.bounds.width;\r\n      line.bounds.x = x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    if (note3SmallLiquescent)\r\n      note3.bounds.x = x - note3.bounds.width;\r\n    else\r\n      note3.bounds.x = x;\r\n\r\n    this.addVisualizer(note1);\r\n    this.addVisualizer(note2);\r\n    this.addVisualizer(note3);\r\n\r\n    this.origin.x = note1.origin.x;\r\n    this.origin.y = note1.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * TorculusResupinus\r\n */\r\nexport class TorculusResupinus extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var line;\r\n    var first = this.notes[0];\r\n    var second = this.notes[1];\r\n    var third = this.notes[2];\r\n    var fourth = this.notes[3];\r\n    var x = 0;\r\n\r\n    // first, figure out the porrectus swash\r\n    var firstStaffPosition = first.staffPosition;\r\n    var secondStaffPosition = second.staffPosition;\r\n    var thirdStaffPosition = third.staffPosition;\r\n    var fourthStaffPosition = fourth.staffPosition;\r\n\r\n    switch (first.shape) {\r\n      case NoteShape.Quilisma:\r\n        first.setGlyphShape(ctxt, GlyphCode.Quilisma);\r\n        break;\r\n\r\n      default:\r\n        first.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n        break;\r\n    }\r\n\r\n    first.performLayout(ctxt);\r\n    x = first.bounds.right();\r\n    this.addVisualizer(first);\r\n\r\n    // if we need a line between the first punctum and the porrectus swash, add it now\r\n    if (secondStaffPosition - firstStaffPosition > 1) {\r\n      line = new NeumeLineVisualizer(ctxt, first, second, false);\r\n      x -= line.bounds.width;\r\n      line.bounds.x = x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n\r\n    switch (Math.abs(secondStaffPosition - thirdStaffPosition)) {\r\n      case 1:\r\n        second.setGlyphShape(ctxt, GlyphCode.Porrectus1);\r\n        break;\r\n      case 2:\r\n        second.setGlyphShape(ctxt, GlyphCode.Porrectus2);\r\n        break;\r\n      case 3:\r\n        second.setGlyphShape(ctxt, GlyphCode.Porrectus3);\r\n        break;\r\n      case 4:\r\n        second.setGlyphShape(ctxt, GlyphCode.Porrectus4);\r\n        break;\r\n      default:\r\n        // fixme: this should be an error!\r\n        second.setGlyphShape(ctxt, GlyphCode.Porrectus1);\r\n        break;\r\n    }\r\n\r\n    second.performLayout(ctxt);\r\n    second.bounds.x = x;\r\n    x = second.bounds.right();\r\n    this.addVisualizer(second);\r\n\r\n    // the third glyph does not draw anything, but it still has logical importance for the editing\r\n    // environment...it can respond to changes which will then change the swash glyph of the first.\r\n    third.setGlyphShape(ctxt, GlyphCode.None);\r\n    third.performLayout(ctxt);\r\n\r\n    // do we need an ascending line after the porrectus swash?\r\n    if (fourthStaffPosition - thirdStaffPosition > 1) {\r\n      line = new NeumeLineVisualizer(ctxt, third, fourth, false);\r\n      line.bounds.x = x - line.bounds.width;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    if (fourth.isLiquescent)\r\n      fourth.setGlyphShape(ctxt, GlyphCode.TerminatingAscLiquescent);\r\n    else\r\n      fourth.setGlyphShape(ctxt, GlyphCode.PodatusUpper);\r\n\r\n    fourth.performLayout(ctxt);\r\n    fourth.bounds.x += x;\r\n    this.addVisualizer(fourth);\r\n\r\n    this.origin.x = first.origin.x;\r\n    this.origin.y = first.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * TorculusResupinusFlexus\r\n */\r\nexport class TorculusResupinusFlexus extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var line;\r\n    var first = this.notes[0];\r\n    var second = this.notes[1];\r\n    var third = this.notes[2];\r\n    var fourth = this.notes[3];\r\n    var fifth = this.notes[4];\r\n    var x = 0;\r\n\r\n    var firstStaffPosition = first.staffPosition;\r\n    var secondStaffPosition = second.staffPosition;\r\n    var thirdStaffPosition = third.staffPosition;\r\n    var fourthStaffPosition = fourth.staffPosition;\r\n    var fifthStaffPosition = fifth.staffPosition;\r\n\r\n    switch (first.shape) {\r\n      case NoteShape.Quilisma:\r\n        first.setGlyphShape(ctxt, GlyphCode.Quilisma);\r\n        break;\r\n\r\n      default:\r\n        first.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n        break;\r\n    }\r\n\r\n    first.performLayout(ctxt);\r\n    x = first.bounds.right();\r\n    this.addVisualizer(first);\r\n\r\n    // if we need a line between the first punctum and the porrectus swash, add it now\r\n    if (secondStaffPosition - firstStaffPosition > 1) {\r\n      line = new NeumeLineVisualizer(ctxt, first, second, false);\r\n      x -= line.bounds.width;\r\n      line.bounds.x = x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n\r\n    switch (secondStaffPosition - thirdStaffPosition) {\r\n      case 1:\r\n        second.setGlyphShape(ctxt, GlyphCode.Porrectus1);\r\n        break;\r\n      case 2:\r\n        second.setGlyphShape(ctxt, GlyphCode.Porrectus2);\r\n        break;\r\n      case 3:\r\n        second.setGlyphShape(ctxt, GlyphCode.Porrectus3);\r\n        break;\r\n      case 4:\r\n        second.setGlyphShape(ctxt, GlyphCode.Porrectus4);\r\n        break;\r\n      default:\r\n        // fixme: should we generate an error here?\r\n        second.setGlyphShape(ctxt, GlyphCode.None);\r\n        break;\r\n    }\r\n\r\n    second.performLayout(ctxt);\r\n    second.bounds.x = x;\r\n    x = second.bounds.right();\r\n    this.addVisualizer(second);\r\n\r\n    // the second glyph does not draw anything, but it still has logical importance for the editing\r\n    // environment...it can respond to changes which will then change the swash glyph of the first.\r\n    third.setGlyphShape(ctxt, GlyphCode.None);\r\n    third.performLayout(ctxt);\r\n    third.bounds.x = x;\r\n    x = third.bounds.right();\r\n    this.addVisualizer(third);\r\n\r\n    // add a connecting line\r\n    if (fourthStaffPosition - thirdStaffPosition > 1) {\r\n      line = new NeumeLineVisualizer(ctxt, third, fourth, false);\r\n      x -= line.bounds.width;\r\n      line.bounds.x += x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    fourth.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n    fourth.performLayout(ctxt);\r\n    fourth.bounds.x = x;\r\n    x = fourth.bounds.right();\r\n    this.addVisualizer(fourth);\r\n\r\n    // add a connecting line\r\n    if (fourthStaffPosition - fifthStaffPosition > 1) {\r\n      line = new NeumeLineVisualizer(ctxt, fourth, fifth, false);\r\n      x -= line.bounds.width * 1.5;\r\n      line.bounds.x += x;\r\n      this.addVisualizer(line);\r\n    }\r\n\r\n    fifth.setGlyphShape(ctxt, GlyphCode.PunctumCuadratum);\r\n    fifth.performLayout(ctxt);\r\n    fifth.bounds.x = x;\r\n    this.addVisualizer(fifth);\r\n\r\n    this.origin.x = first.origin.x;\r\n    this.origin.y = first.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Tristropha\r\n *\r\n * For simplicity in implementation, Tristropha's have three notes in the object\r\n * structure. These technically must be the same pitch though (like the\r\n * Distropha and Bivirga).\r\n */\r\nexport class Tristropha extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var note1 = this.notes[0];\r\n    var note2 = this.notes[1];\r\n    var note3 = this.notes[2];\r\n\r\n    var staffPosition = note1.staffPosition;\r\n\r\n    note1.setGlyphShape(ctxt, Apostropha.determineNoteGlyphCode(note1));\r\n    note1.performLayout(ctxt);\r\n\r\n    note2.setGlyphShape(ctxt, Apostropha.determineNoteGlyphCode(note2));\r\n    note2.performLayout(ctxt);\r\n    note2.bounds.x += note1.bounds.width + ctxt.intraNeumeSpacing;\r\n\r\n    note3.setGlyphShape(ctxt, Apostropha.determineNoteGlyphCode(note3));\r\n    note3.performLayout(ctxt);\r\n    note3.bounds.x += note1.bounds.width + note2.bounds.width + ctxt.intraNeumeSpacing * 2;\r\n\r\n    this.addVisualizer(note1);\r\n    this.addVisualizer(note2);\r\n    this.addVisualizer(note3);\r\n\r\n    this.origin.x = note1.origin.x;\r\n    this.origin.y = note1.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n}\r\n\r\n/*\r\n * Virga\r\n */\r\nexport class Virga extends Neume {\r\n\r\n  performLayout(ctxt) {\r\n    super.performLayout(ctxt);\r\n\r\n    var note = this.notes[0];\r\n\r\n    var staffPosition = note.staffPosition;\r\n\r\n    var glyphCode = Virga.getGlyphCode(staffPosition);\r\n    note.setGlyphShape(ctxt, glyphCode);\r\n    note.performLayout(ctxt);\r\n\r\n    this.addVisualizer(note);\r\n\r\n    this.origin.x = note.origin.x;\r\n    this.origin.y = note.origin.y;\r\n\r\n    this.finishLayout(ctxt);\r\n  }\r\n\r\n  // The virga's glyph depends on its staff position. This is a helper function\r\n  // that can be used by other neumes that use the virga glyphs...\r\n  static getGlyphCode(staffPosition) {\r\n    if (Math.abs(staffPosition) % 2 === 1)\r\n      return GlyphCode.VirgaLong;\r\n    else\r\n      return GlyphCode.VirgaShort;\r\n\r\n    // fixme: add logic for virgas low on the staff that are probably short also...\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Exsurge.Chant.Neumes.js\n **/"],"sourceRoot":""}